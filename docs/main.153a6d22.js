parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"J7M1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._Math=void 0;var t={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],r=0;r<256;r++)t[r]=(r<16?"0":"")+r.toString(16);return function(){var r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&o|128]+t[o>>8&255]+"-"+t[o>>16&255]+t[o>>24&255]+t[255&a]+t[a>>8&255]+t[a>>16&255]+t[a>>24&255]).toUpperCase()}}(),clamp:function(t,r,n){return Math.max(r,Math.min(n,t))},euclideanModulo:function(t,r){return(t%r+r)%r},mapLinear:function(t,r,n,o,a){return o+(t-r)*(a-o)/(n-r)},lerp:function(t,r,n){return(1-n)*t+n*r},smoothstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*(3-2*t)},smootherstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*t*(t*(6*t-15)+10)},randInt:function(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(r){return r*t.DEG2RAD},radToDeg:function(r){return r*t.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};exports._Math=t;
},{}],"Rio0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Matrix4=e;var t=require("./Vector3.js");function e(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(e.prototype,{isMatrix4:!0,set:function(t,e,n,r,s,i,o,a,u,h,c,l,m,f,v,x){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=s,y[5]=i,y[9]=o,y[13]=a,y[2]=u,y[6]=h,y[10]=c,y[14]=l,y[3]=m,y[7]=f,y[11]=v,y[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new e).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new t.Vector3;return function(t){var n=this.elements,r=t.elements,s=1/e.setFromMatrixColumn(t,0).length(),i=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,s=t.z,i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),h=Math.cos(s),c=Math.sin(s);if("XYZ"===t.order){var l=i*h,m=i*c,f=o*h,v=o*c;e[0]=a*h,e[4]=-a*c,e[8]=u,e[1]=m+f*u,e[5]=l-v*u,e[9]=-o*a,e[2]=v-l*u,e[6]=f+m*u,e[10]=i*a}else if("YXZ"===t.order){var x=a*h,y=a*c,M=u*h,p=u*c;e[0]=x+p*o,e[4]=M*o-y,e[8]=i*u,e[1]=i*c,e[5]=i*h,e[9]=-o,e[2]=y*o-M,e[6]=p+x*o,e[10]=i*a}else if("ZXY"===t.order){x=a*h,y=a*c,M=u*h,p=u*c;e[0]=x-p*o,e[4]=-i*c,e[8]=M+y*o,e[1]=y+M*o,e[5]=i*h,e[9]=p-x*o,e[2]=-i*u,e[6]=o,e[10]=i*a}else if("ZYX"===t.order){l=i*h,m=i*c,f=o*h,v=o*c;e[0]=a*h,e[4]=f*u-m,e[8]=l*u+v,e[1]=a*c,e[5]=v*u+l,e[9]=m*u-f,e[2]=-u,e[6]=o*a,e[10]=i*a}else if("YZX"===t.order){var d=i*a,z=i*u,g=o*a,w=o*u;e[0]=a*h,e[4]=w-d*c,e[8]=g*c+z,e[1]=c,e[5]=i*h,e[9]=-o*h,e[2]=-u*h,e[6]=z*c+g,e[10]=d-w*c}else if("XZY"===t.order){d=i*a,z=i*u,g=o*a,w=o*u;e[0]=a*h,e[4]=-c,e[8]=u*h,e[1]=d*c+w,e[5]=i*h,e[9]=z*c-g,e[2]=g*c-z,e[6]=o*h,e[10]=w*c+d}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var e=new t.Vector3(0,0,0),n=new t.Vector3(1,1,1);return function(t){return this.compose(e,t,n)}}(),lookAt:function(){var e=new t.Vector3,n=new t.Vector3,r=new t.Vector3;return function(t,s,i){var o=this.elements;return r.subVectors(t,s),0===r.lengthSq()&&(r.z=1),r.normalize(),e.crossVectors(i,r),0===e.lengthSq()&&(1===Math.abs(i.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),e.crossVectors(i,r)),e.normalize(),n.crossVectors(r,e),o[0]=e.x,o[4]=n.x,o[8]=r.x,o[1]=e.y,o[5]=n.y,o[9]=r.y,o[2]=e.z,o[6]=n.z,o[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,s=this.elements,i=n[0],o=n[4],a=n[8],u=n[12],h=n[1],c=n[5],l=n[9],m=n[13],f=n[2],v=n[6],x=n[10],y=n[14],M=n[3],p=n[7],d=n[11],z=n[15],g=r[0],w=r[4],k=r[8],V=r[12],F=r[1],R=r[5],X=r[9],Y=r[13],Z=r[2],b=r[6],A=r[10],C=r[14],P=r[3],S=r[7],_=r[11],q=r[15];return s[0]=i*g+o*F+a*Z+u*P,s[4]=i*w+o*R+a*b+u*S,s[8]=i*k+o*X+a*A+u*_,s[12]=i*V+o*Y+a*C+u*q,s[1]=h*g+c*F+l*Z+m*P,s[5]=h*w+c*R+l*b+m*S,s[9]=h*k+c*X+l*A+m*_,s[13]=h*V+c*Y+l*C+m*q,s[2]=f*g+v*F+x*Z+y*P,s[6]=f*w+v*R+x*b+y*S,s[10]=f*k+v*X+x*A+y*_,s[14]=f*V+v*Y+x*C+y*q,s[3]=M*g+p*F+d*Z+z*P,s[7]=M*w+p*R+d*b+z*S,s[11]=M*k+p*X+d*A+z*_,s[15]=M*V+p*Y+d*C+z*q,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var e=new t.Vector3;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],i=t[1],o=t[5],a=t[9],u=t[13],h=t[2],c=t[6],l=t[10],m=t[14];return t[3]*(+s*a*c-r*u*c-s*o*l+n*u*l+r*o*m-n*a*m)+t[7]*(+e*a*m-e*u*l+s*i*l-r*i*m+r*u*h-s*a*h)+t[11]*(+e*u*c-e*o*m-s*i*c+n*i*m+s*o*h-n*u*h)+t[15]*(-r*o*h-e*a*c+e*o*l+r*i*c-n*i*l+n*a*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,s=r[0],i=r[1],o=r[2],a=r[3],u=r[4],h=r[5],c=r[6],l=r[7],m=r[8],f=r[9],v=r[10],x=r[11],y=r[12],M=r[13],p=r[14],d=r[15],z=f*p*l-M*v*l+M*c*x-h*p*x-f*c*d+h*v*d,g=y*v*l-m*p*l-y*c*x+u*p*x+m*c*d-u*v*d,w=m*M*l-y*f*l+y*h*x-u*M*x-m*h*d+u*f*d,k=y*f*c-m*M*c-y*h*v+u*M*v+m*h*p-u*f*p,V=s*z+i*g+o*w+a*k;if(0===V){var F="Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(F);return console.warn(F),this.identity()}var R=1/V;return n[0]=z*R,n[1]=(M*v*a-f*p*a-M*o*x+i*p*x+f*o*d-i*v*d)*R,n[2]=(h*p*a-M*c*a+M*o*l-i*p*l-h*o*d+i*c*d)*R,n[3]=(f*c*a-h*v*a-f*o*l+i*v*l+h*o*x-i*c*x)*R,n[4]=g*R,n[5]=(m*p*a-y*v*a+y*o*x-s*p*x-m*o*d+s*v*d)*R,n[6]=(y*c*a-u*p*a-y*o*l+s*p*l+u*o*d-s*c*d)*R,n[7]=(u*v*a-m*c*a+m*o*l-s*v*l-u*o*x+s*c*x)*R,n[8]=w*R,n[9]=(y*f*a-m*M*a-y*i*x+s*M*x+m*i*d-s*f*d)*R,n[10]=(u*M*a-y*h*a+y*i*l-s*M*l-u*i*d+s*h*d)*R,n[11]=(m*h*a-u*f*a-m*i*l+s*f*l+u*i*x-s*h*x)*R,n[12]=k*R,n[13]=(m*M*o-y*f*o+y*i*v-s*M*v-m*i*p+s*f*p)*R,n[14]=(y*h*o-u*M*o-y*i*c+s*M*c+u*i*p-s*h*p)*R,n[15]=(u*f*o-m*h*o+m*i*c-s*f*c-u*i*v+s*h*v)*R,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),s=1-n,i=t.x,o=t.y,a=t.z,u=s*i,h=s*o;return this.set(u*i+n,u*o-r*a,u*a+r*o,0,u*o+r*a,h*o+n,h*a-r*i,0,u*a-r*o,h*a+r*i,s*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,s=e._x,i=e._y,o=e._z,a=e._w,u=s+s,h=i+i,c=o+o,l=s*u,m=s*h,f=s*c,v=i*h,x=i*c,y=o*c,M=a*u,p=a*h,d=a*c,z=n.x,g=n.y,w=n.z;return r[0]=(1-(v+y))*z,r[1]=(m+d)*z,r[2]=(f-p)*z,r[3]=0,r[4]=(m-d)*g,r[5]=(1-(l+y))*g,r[6]=(x+M)*g,r[7]=0,r[8]=(f+p)*w,r[9]=(x-M)*w,r[10]=(1-(l+v))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var n=new t.Vector3,r=new e;return function(t,e,s){var i=this.elements,o=n.set(i[0],i[1],i[2]).length(),a=n.set(i[4],i[5],i[6]).length(),u=n.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],r.copy(this);var h=1/o,c=1/a,l=1/u;return r.elements[0]*=h,r.elements[1]*=h,r.elements[2]*=h,r.elements[4]*=c,r.elements[5]*=c,r.elements[6]*=c,r.elements[8]*=l,r.elements[9]*=l,r.elements[10]*=l,e.setFromRotationMatrix(r),s.x=o,s.y=a,s.z=u,this}}(),makePerspective:function(t,e,n,r,s,i){void 0===i&&console.warn("Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*s/(e-t),u=2*s/(n-r),h=(e+t)/(e-t),c=(n+r)/(n-r),l=-(i+s)/(i-s),m=-2*i*s/(i-s);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,s,i){var o=this.elements,a=1/(e-t),u=1/(n-r),h=1/(i-s),c=(e+t)*a,l=(n+r)*u,m=(i+s)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});
},{"./Vector3.js":"TKlu"}],"TKlu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector3=r;var t=require("./Math.js"),i=require("./Matrix4.js"),s=require("./Quaternion.js");function r(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0}Object.assign(r.prototype,{isVector3:!0,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(console.warn("Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return void 0!==i?(console.warn("Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(){var t=new s.Quaternion;return function(i){return i&&i.isEuler||console.error("Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(i))}}(),applyAxisAngle:function(){var t=new s.Quaternion;return function(i,s){return this.applyQuaternion(t.setFromAxisAngle(i,s))}}(),applyMatrix3:function(t){var i=this.x,s=this.y,r=this.z,n=t.elements;return this.x=n[0]*i+n[3]*s+n[6]*r,this.y=n[1]*i+n[4]*s+n[7]*r,this.z=n[2]*i+n[5]*s+n[8]*r,this},applyMatrix4:function(t){var i=this.x,s=this.y,r=this.z,n=t.elements,h=1/(n[3]*i+n[7]*s+n[11]*r+n[15]);return this.x=(n[0]*i+n[4]*s+n[8]*r+n[12])*h,this.y=(n[1]*i+n[5]*s+n[9]*r+n[13])*h,this.z=(n[2]*i+n[6]*s+n[10]*r+n[14])*h,this},applyQuaternion:function(t){var i=this.x,s=this.y,r=this.z,n=t.x,h=t.y,e=t.z,o=t.w,a=o*i+h*r-e*s,u=o*s+e*i-n*r,c=o*r+n*s-h*i,l=-n*i-h*s-e*r;return this.x=a*o+l*-n+u*-e-c*-h,this.y=u*o+l*-h+c*-n-a*-e,this.z=c*o+l*-e+a*-h-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new i.Matrix4;return function(i){return this.applyMatrix4(t.getInverse(i.projectionMatrix)).applyMatrix4(i.matrixWorld)}}(),transformDirection:function(t){var i=this.x,s=this.y,r=this.z,n=t.elements;return this.x=n[0]*i+n[4]*s+n[8]*r,this.y=n[1]*i+n[5]*s+n[9]*r,this.z=n[2]*i+n[6]*s+n[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(){var t=new r,i=new r;return function(s,r){return t.set(s,s,s),i.set(r,r,r),this.clamp(t,i)}}(),clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},cross:function(t,i){return void 0!==i?(console.warn("Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},crossVectors:function(t,i){var s=t.x,r=t.y,n=t.z,h=i.x,e=i.y,o=i.z;return this.x=r*o-n*e,this.y=n*h-s*o,this.z=s*e-r*h,this},projectOnVector:function(t){var i=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(i)},projectOnPlane:function(){var t=new r;return function(i){return t.copy(this).projectOnVector(i),this.sub(t)}}(),reflect:function(){var t=new r;return function(i){return this.sub(t.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(i){var s=this.dot(i)/Math.sqrt(this.lengthSq()*i.lengthSq());return Math.acos(t._Math.clamp(s,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y,r=this.z-t.z;return i*i+s*s+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,i,s){var r=Math.sin(i)*t;return this.x=r*Math.sin(s),this.y=Math.cos(i)*t,this.z=r*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this},setFromMatrixPosition:function(t){var i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this},setFromMatrixScale:function(t){var i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=r,this},setFromMatrixColumn:function(t,i){return this.fromArray(t.elements,4*i)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}});
},{"./Math.js":"J7M1","./Matrix4.js":"Rio0","./Quaternion.js":"eUMQ"}],"eUMQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quaternion=s;var t=require("./Math.js"),i=require("./Vector3.js");function s(t,i,s,h){this._x=t||0,this._y=i||0,this._z=s||0,this._w=void 0!==h?h:1}Object.assign(s,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,n,_,r){var e=s[h+0],a=s[h+1],o=s[h+2],u=s[h+3],c=n[_+0],l=n[_+1],y=n[_+2],x=n[_+3];if(u!==x||e!==c||a!==l||o!==y){var w=1-r,z=e*c+a*l+o*y+u*x,f=z>=0?1:-1,C=1-z*z;if(C>Number.EPSILON){var g=Math.sqrt(C),p=Math.atan2(g,z*f);w=Math.sin(w*p)/g,r=Math.sin(r*p)/g}var M=r*f;if(e=e*w+c*M,a=a*w+l*M,o=o*w+y*M,u=u*w+x*M,w===1-r){var b=1/Math.sqrt(e*e+a*a+o*o+u*u);e*=b,a*=b,o*=b,u*=b}}t[i]=e,t[i+1]=a,t[i+2]=o,t[i+3]=u}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{isQuaternion:!0,set:function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,h=t._y,n=t._z,_=t.order,r=Math.cos,e=Math.sin,a=r(s/2),o=r(h/2),u=r(n/2),c=e(s/2),l=e(h/2),y=e(n/2);return"XYZ"===_?(this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y):"YXZ"===_?(this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y):"ZXY"===_?(this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y):"ZYX"===_?(this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y):"YZX"===_?(this._x=c*o*u+a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u-c*l*y):"XZY"===_&&(this._x=c*o*u-a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u+c*l*y),!1!==i&&this.onChangeCallback(),this},setFromAxisAngle:function(t,i){var s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var i,s=t.elements,h=s[0],n=s[4],_=s[8],r=s[1],e=s[5],a=s[9],o=s[2],u=s[6],c=s[10],l=h+e+c;return l>0?(i=.5/Math.sqrt(l+1),this._w=.25/i,this._x=(u-a)*i,this._y=(_-o)*i,this._z=(r-n)*i):h>e&&h>c?(i=2*Math.sqrt(1+h-e-c),this._w=(u-a)/i,this._x=.25*i,this._y=(n+r)/i,this._z=(_+o)/i):e>c?(i=2*Math.sqrt(1+e-h-c),this._w=(_-o)/i,this._x=(n+r)/i,this._y=.25*i,this._z=(a+u)/i):(i=2*Math.sqrt(1+c-h-e),this._w=(r-n)/i,this._x=(_+o)/i,this._y=(a+u)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,s=new i.Vector3;return function(h,n){return void 0===s&&(s=new i.Vector3),(t=h.dot(n)+1)<1e-6?(t=0,Math.abs(h.x)>Math.abs(h.z)?s.set(-h.y,h.x,0):s.set(0,-h.z,h.y)):s.crossVectors(h,n),this._x=s.x,this._y=s.y,this._z=s.z,this._w=t,this.normalize()}}(),angleTo:function(i){return 2*Math.acos(Math.abs(t._Math.clamp(this.dot(i),-1,1)))},rotateTowards:function(t,i){var s=this.angleTo(t);if(0===s)return this;var h=Math.min(1,i/s);return this.slerp(t,h),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var s=t._x,h=t._y,n=t._z,_=t._w,r=i._x,e=i._y,a=i._z,o=i._w;return this._x=s*o+_*r+h*a-n*e,this._y=h*o+_*e+n*r-s*a,this._z=n*o+_*a+s*e-h*r,this._w=_*o-s*r-h*e-n*a,this.onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,h=this._y,n=this._z,_=this._w,r=_*t._w+s*t._x+h*t._y+n*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=_,this._x=s,this._y=h,this._z=n,this;var e=1-r*r;if(e<=Number.EPSILON){var a=1-i;return this._w=a*_+i*this._w,this._x=a*s+i*this._x,this._y=a*h+i*this._y,this._z=a*n+i*this._z,this.normalize()}var o=Math.sqrt(e),u=Math.atan2(o,r),c=Math.sin((1-i)*u)/o,l=Math.sin(i*u)/o;return this._w=_*c+this._w*l,this._x=s*c+this._x*l,this._y=h*c+this._y*l,this._z=n*c+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}});
},{"./Math.js":"J7M1","./Vector3.js":"TKlu"}],"O/Kz":[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventDispatcher=e,Object.assign(e.prototype,{addEventListener:function(e,i){void 0===this._listeners&&(this._listeners={});var t=this._listeners;void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},hasEventListener:function(e,i){if(void 0===this._listeners)return!1;var t=this._listeners;return void 0!==t[e]&&-1!==t[e].indexOf(i)},removeEventListener:function(e,i){if(void 0!==this._listeners){var t=this._listeners[e];if(void 0!==t){var s=t.indexOf(i);-1!==s&&t.splice(s,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var i=this._listeners[e.type];if(void 0!==i){e.target=this;for(var t=i.slice(0),s=0,n=t.length;s<n;s++)t[s].call(this,e)}}}});
},{}],"qd6e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Euler=s;var t=require("./Quaternion.js"),i=require("./Vector3.js"),n=require("./Matrix4.js"),a=require("./Math.js");function s(t,i,n,a){this._x=t||0,this._y=i||0,this._z=n||0,this._order=a||s.DefaultOrder}s.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],s.DefaultOrder="XYZ",Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{isEuler:!0,set:function(t,i,n,a){return this._x=t,this._y=i,this._z=n,this._order=a||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,i,n){var s=a._Math.clamp,h=t.elements,r=h[0],e=h[4],o=h[8],_=h[1],u=h[5],c=h[9],M=h[2],l=h[6],x=h[10];return"XYZ"===(i=i||this._order)?(this._y=Math.asin(s(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,x),this._z=Math.atan2(-e,r)):(this._x=Math.atan2(l,u),this._z=0)):"YXZ"===i?(this._x=Math.asin(-s(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,x),this._z=Math.atan2(_,u)):(this._y=Math.atan2(-M,r),this._z=0)):"ZXY"===i?(this._x=Math.asin(s(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(-M,x),this._z=Math.atan2(-e,u)):(this._y=0,this._z=Math.atan2(_,r))):"ZYX"===i?(this._y=Math.asin(-s(M,-1,1)),Math.abs(M)<.99999?(this._x=Math.atan2(l,x),this._z=Math.atan2(_,r)):(this._x=0,this._z=Math.atan2(-e,u))):"YZX"===i?(this._z=Math.asin(s(_,-1,1)),Math.abs(_)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-M,r)):(this._x=0,this._y=Math.atan2(o,x))):"XZY"===i?(this._z=Math.asin(-s(e,-1,1)),Math.abs(e)<.99999?(this._x=Math.atan2(l,u),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,x),this._y=0)):console.warn("Euler: .setFromRotationMatrix() given unsupported order: "+i),this._order=i,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new n.Matrix4;return function(i,n,a){return t.makeRotationFromQuaternion(i),this.setFromRotationMatrix(t,n,a)}}(),setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(){var i=new t.Quaternion;return function(t){return i.setFromEuler(this),this.setFromQuaternion(i,t)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}});
},{"./Quaternion.js":"eUMQ","./Vector3.js":"TKlu","./Matrix4.js":"Rio0","./Math.js":"J7M1"}],"imWo":[function(require,module,exports) {
"use strict";function t(){this.mask=1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Layers=t,Object.assign(t.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});
},{}],"ibIB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Matrix3=e;var t=require("./Vector3.js");function e(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(e.prototype,{isMatrix3:!0,set:function(t,e,r,n,s,i,o,a,u){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=s,l[5]=a,l[6]=r,l[7]=i,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var e=new t.Vector3;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,s=this.elements,i=r[0],o=r[3],a=r[6],u=r[1],l=r[4],h=r[7],c=r[2],m=r[5],f=r[8],v=n[0],p=n[3],y=n[6],M=n[1],x=n[4],g=n[7],d=n[2],w=n[5],A=n[8];return s[0]=i*v+o*M+a*d,s[3]=i*p+o*x+a*w,s[6]=i*y+o*g+a*A,s[1]=u*v+l*M+h*d,s[4]=u*p+l*x+h*w,s[7]=u*y+l*g+h*A,s[2]=c*v+m*M+f*d,s[5]=c*p+m*x+f*w,s[8]=c*y+m*g+f*A,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],s=t[3],i=t[4],o=t[5],a=t[6],u=t[7],l=t[8];return e*i*l-e*o*u-r*s*l+r*o*a+n*s*u-n*i*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,s=r[0],i=r[1],o=r[2],a=r[3],u=r[4],l=r[5],h=r[6],c=r[7],m=r[8],f=m*u-l*c,v=l*h-m*a,p=c*a-u*h,y=s*f+i*v+o*p;if(0===y){var M="Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var x=1/y;return n[0]=f*x,n[1]=(o*c-m*i)*x,n[2]=(l*i-o*u)*x,n[3]=v*x,n[4]=(m*s-o*h)*x,n[5]=(o*a-l*s)*x,n[6]=p*x,n[7]=(i*h-c*s)*x,n[8]=(u*s-i*a)*x,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,n,s,i,o){var a=Math.cos(s),u=Math.sin(s);this.set(r*a,r*u,-r*(a*i+u*o)+i+t,-n*u,n*a,-n*(-u*i+a*o)+o+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.elements,s=n[0],i=n[3],o=n[6],a=n[1],u=n[4],l=n[7];return n[0]=e*s+r*a,n[3]=e*i+r*u,n[6]=e*o+r*l,n[1]=-r*s+e*a,n[4]=-r*i+e*u,n[7]=-r*o+e*l,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<9;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});
},{"./Vector3.js":"TKlu"}],"HNhV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGBA_S3TC_DXT5_Format=exports.RGBA_S3TC_DXT3_Format=exports.RGBA_S3TC_DXT1_Format=exports.RGB_S3TC_DXT1_Format=exports.RedFormat=exports.DepthStencilFormat=exports.DepthFormat=exports.RGBEFormat=exports.LuminanceAlphaFormat=exports.LuminanceFormat=exports.RGBAFormat=exports.RGBFormat=exports.AlphaFormat=exports.UnsignedInt248Type=exports.UnsignedShort565Type=exports.UnsignedShort5551Type=exports.UnsignedShort4444Type=exports.HalfFloatType=exports.FloatType=exports.UnsignedIntType=exports.IntType=exports.UnsignedShortType=exports.ShortType=exports.ByteType=exports.UnsignedByteType=exports.LinearMipMapLinearFilter=exports.LinearMipMapNearestFilter=exports.LinearFilter=exports.NearestMipMapLinearFilter=exports.NearestMipMapNearestFilter=exports.NearestFilter=exports.MirroredRepeatWrapping=exports.ClampToEdgeWrapping=exports.RepeatWrapping=exports.CubeUVRefractionMapping=exports.CubeUVReflectionMapping=exports.SphericalReflectionMapping=exports.EquirectangularRefractionMapping=exports.EquirectangularReflectionMapping=exports.CubeRefractionMapping=exports.CubeReflectionMapping=exports.UVMapping=exports.ACESFilmicToneMapping=exports.CineonToneMapping=exports.Uncharted2ToneMapping=exports.ReinhardToneMapping=exports.LinearToneMapping=exports.NoToneMapping=exports.AddOperation=exports.MixOperation=exports.MultiplyOperation=exports.NotEqualDepth=exports.GreaterDepth=exports.GreaterEqualDepth=exports.EqualDepth=exports.LessEqualDepth=exports.LessDepth=exports.AlwaysDepth=exports.NeverDepth=exports.SrcAlphaSaturateFactor=exports.OneMinusDstColorFactor=exports.DstColorFactor=exports.OneMinusDstAlphaFactor=exports.DstAlphaFactor=exports.OneMinusSrcAlphaFactor=exports.SrcAlphaFactor=exports.OneMinusSrcColorFactor=exports.SrcColorFactor=exports.OneFactor=exports.ZeroFactor=exports.MaxEquation=exports.MinEquation=exports.ReverseSubtractEquation=exports.SubtractEquation=exports.AddEquation=exports.CustomBlending=exports.MultiplyBlending=exports.SubtractiveBlending=exports.AdditiveBlending=exports.NormalBlending=exports.NoBlending=exports.VertexColors=exports.FaceColors=exports.NoColors=exports.SmoothShading=exports.FlatShading=exports.DoubleSide=exports.BackSide=exports.FrontSide=exports.PCFSoftShadowMap=exports.PCFShadowMap=exports.BasicShadowMap=exports.FrontFaceDirectionCCW=exports.FrontFaceDirectionCW=exports.CullFaceFrontBack=exports.CullFaceFront=exports.CullFaceBack=exports.CullFaceNone=exports.MOUSE=exports.REVISION=void 0,exports.ObjectSpaceNormalMap=exports.TangentSpaceNormalMap=exports.RGBADepthPacking=exports.BasicDepthPacking=exports.RGBDEncoding=exports.RGBM16Encoding=exports.RGBM7Encoding=exports.LogLuvEncoding=exports.RGBEEncoding=exports.GammaEncoding=exports.sRGBEncoding=exports.LinearEncoding=exports.TriangleFanDrawMode=exports.TriangleStripDrawMode=exports.TrianglesDrawMode=exports.WrapAroundEnding=exports.ZeroSlopeEnding=exports.ZeroCurvatureEnding=exports.InterpolateSmooth=exports.InterpolateLinear=exports.InterpolateDiscrete=exports.LoopPingPong=exports.LoopRepeat=exports.LoopOnce=exports.RGBA_ASTC_12x12_Format=exports.RGBA_ASTC_12x10_Format=exports.RGBA_ASTC_10x10_Format=exports.RGBA_ASTC_10x8_Format=exports.RGBA_ASTC_10x6_Format=exports.RGBA_ASTC_10x5_Format=exports.RGBA_ASTC_8x8_Format=exports.RGBA_ASTC_8x6_Format=exports.RGBA_ASTC_8x5_Format=exports.RGBA_ASTC_6x6_Format=exports.RGBA_ASTC_6x5_Format=exports.RGBA_ASTC_5x5_Format=exports.RGBA_ASTC_5x4_Format=exports.RGBA_ASTC_4x4_Format=exports.RGB_ETC1_Format=exports.RGBA_PVRTC_2BPPV1_Format=exports.RGBA_PVRTC_4BPPV1_Format=exports.RGB_PVRTC_2BPPV1_Format=exports.RGB_PVRTC_4BPPV1_Format=void 0;var r="102";exports.REVISION=r;var e={LEFT:0,MIDDLE:1,RIGHT:2};exports.MOUSE=e;var t=0;exports.CullFaceNone=t;var o=1;exports.CullFaceBack=o;var p=2;exports.CullFaceFront=p;var a=3;exports.CullFaceFrontBack=a;var s=0;exports.FrontFaceDirectionCW=s;var x=1;exports.FrontFaceDirectionCCW=x;var n=0;exports.BasicShadowMap=n;var i=1;exports.PCFShadowMap=i;var v=2;exports.PCFSoftShadowMap=v;var l=0;exports.FrontSide=l;var _=1;exports.BackSide=_;var F=2;exports.DoubleSide=F;var c=1;exports.FlatShading=c;var g=2;exports.SmoothShading=g;var S=0;exports.NoColors=S;var T=1;exports.FaceColors=T;var R=2;exports.VertexColors=R;var d=0;exports.NoBlending=d;var B=1;exports.NormalBlending=B;var A=2;exports.AdditiveBlending=A;var C=3;exports.SubtractiveBlending=C;var m=4;exports.MultiplyBlending=m;var M=5;exports.CustomBlending=M;var u=100;exports.AddEquation=u;var G=101;exports.SubtractEquation=G;var h=102;exports.ReverseSubtractEquation=h;var E=103;exports.MinEquation=E;var D=104;exports.MaxEquation=D;var P=200;exports.ZeroFactor=P;var L=201;exports.OneFactor=L;var y=202;exports.SrcColorFactor=y;var N=203;exports.OneMinusSrcColorFactor=N;var V=204;exports.SrcAlphaFactor=V;var O=205;exports.OneMinusSrcAlphaFactor=O;var U=206;exports.DstAlphaFactor=U;var q=207;exports.OneMinusDstAlphaFactor=q;var b=208;exports.DstColorFactor=b;var f=209;exports.OneMinusDstColorFactor=f;var I=210;exports.SrcAlphaSaturateFactor=I;var w=0;exports.NeverDepth=w;var W=1;exports.AlwaysDepth=W;var k=2;exports.LessDepth=k;var X=3;exports.LessEqualDepth=X;var Z=4;exports.EqualDepth=Z;var j=5;exports.GreaterEqualDepth=j;var H=6;exports.GreaterDepth=H;var z=7;exports.NotEqualDepth=z;var J=0;exports.MultiplyOperation=J;var K=1;exports.MixOperation=K;var Q=2;exports.AddOperation=Q;var Y=0;exports.NoToneMapping=Y;var $=1;exports.LinearToneMapping=$;var rr=2;exports.ReinhardToneMapping=rr;var er=3;exports.Uncharted2ToneMapping=er;var tr=4;exports.CineonToneMapping=tr;var or=5;exports.ACESFilmicToneMapping=or;var pr=300;exports.UVMapping=pr;var ar=301;exports.CubeReflectionMapping=ar;var sr=302;exports.CubeRefractionMapping=sr;var xr=303;exports.EquirectangularReflectionMapping=xr;var nr=304;exports.EquirectangularRefractionMapping=nr;var ir=305;exports.SphericalReflectionMapping=ir;var vr=306;exports.CubeUVReflectionMapping=vr;var lr=307;exports.CubeUVRefractionMapping=lr;var _r=1e3;exports.RepeatWrapping=_r;var Fr=1001;exports.ClampToEdgeWrapping=Fr;var cr=1002;exports.MirroredRepeatWrapping=cr;var gr=1003;exports.NearestFilter=gr;var Sr=1004;exports.NearestMipMapNearestFilter=Sr;var Tr=1005;exports.NearestMipMapLinearFilter=Tr;var Rr=1006;exports.LinearFilter=Rr;var dr=1007;exports.LinearMipMapNearestFilter=dr;var Br=1008;exports.LinearMipMapLinearFilter=Br;var Ar=1009;exports.UnsignedByteType=Ar;var Cr=1010;exports.ByteType=Cr;var mr=1011;exports.ShortType=mr;var Mr=1012;exports.UnsignedShortType=Mr;var ur=1013;exports.IntType=ur;var Gr=1014;exports.UnsignedIntType=Gr;var hr=1015;exports.FloatType=hr;var Er=1016;exports.HalfFloatType=Er;var Dr=1017;exports.UnsignedShort4444Type=Dr;var Pr=1018;exports.UnsignedShort5551Type=Pr;var Lr=1019;exports.UnsignedShort565Type=Lr;var yr=1020;exports.UnsignedInt248Type=yr;var Nr=1021;exports.AlphaFormat=Nr;var Vr=1022;exports.RGBFormat=Vr;var Or=1023;exports.RGBAFormat=Or;var Ur=1024;exports.LuminanceFormat=Ur;var qr=1025;exports.LuminanceAlphaFormat=qr;var br=Or;exports.RGBEFormat=br;var fr=1026;exports.DepthFormat=fr;var Ir=1027;exports.DepthStencilFormat=Ir;var wr=1028;exports.RedFormat=wr;var Wr=33776;exports.RGB_S3TC_DXT1_Format=Wr;var kr=33777;exports.RGBA_S3TC_DXT1_Format=kr;var Xr=33778;exports.RGBA_S3TC_DXT3_Format=Xr;var Zr=33779;exports.RGBA_S3TC_DXT5_Format=Zr;var jr=35840;exports.RGB_PVRTC_4BPPV1_Format=jr;var Hr=35841;exports.RGB_PVRTC_2BPPV1_Format=Hr;var zr=35842;exports.RGBA_PVRTC_4BPPV1_Format=zr;var Jr=35843;exports.RGBA_PVRTC_2BPPV1_Format=Jr;var Kr=36196;exports.RGB_ETC1_Format=Kr;var Qr=37808;exports.RGBA_ASTC_4x4_Format=Qr;var Yr=37809;exports.RGBA_ASTC_5x4_Format=Yr;var $r=37810;exports.RGBA_ASTC_5x5_Format=$r;var re=37811;exports.RGBA_ASTC_6x5_Format=re;var ee=37812;exports.RGBA_ASTC_6x6_Format=ee;var te=37813;exports.RGBA_ASTC_8x5_Format=te;var oe=37814;exports.RGBA_ASTC_8x6_Format=oe;var pe=37815;exports.RGBA_ASTC_8x8_Format=pe;var ae=37816;exports.RGBA_ASTC_10x5_Format=ae;var se=37817;exports.RGBA_ASTC_10x6_Format=se;var xe=37818;exports.RGBA_ASTC_10x8_Format=xe;var ne=37819;exports.RGBA_ASTC_10x10_Format=ne;var ie=37820;exports.RGBA_ASTC_12x10_Format=ie;var ve=37821;exports.RGBA_ASTC_12x12_Format=ve;var le=2200;exports.LoopOnce=le;var _e=2201;exports.LoopRepeat=_e;var Fe=2202;exports.LoopPingPong=Fe;var ce=2300;exports.InterpolateDiscrete=ce;var ge=2301;exports.InterpolateLinear=ge;var Se=2302;exports.InterpolateSmooth=Se;var Te=2400;exports.ZeroCurvatureEnding=Te;var Re=2401;exports.ZeroSlopeEnding=Re;var de=2402;exports.WrapAroundEnding=de;var Be=0;exports.TrianglesDrawMode=Be;var Ae=1;exports.TriangleStripDrawMode=Ae;var Ce=2;exports.TriangleFanDrawMode=Ce;var me=3e3;exports.LinearEncoding=me;var Me=3001;exports.sRGBEncoding=Me;var ue=3007;exports.GammaEncoding=ue;var Ge=3002;exports.RGBEEncoding=Ge;var he=3003;exports.LogLuvEncoding=he;var Ee=3004;exports.RGBM7Encoding=Ee;var De=3005;exports.RGBM16Encoding=De;var Pe=3006;exports.RGBDEncoding=Pe;var Le=3200;exports.BasicDepthPacking=Le;var ye=3201;exports.RGBADepthPacking=ye;var Ne=0;exports.TangentSpaceNormalMap=Ne;var Ve=1;exports.ObjectSpaceNormalMap=Ve;
},{}],"Kems":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Object3D=l;var t=require("../math/Quaternion.js"),e=require("../math/Vector3.js"),r=require("../math/Matrix4.js"),i=require("./EventDispatcher.js"),n=require("../math/Euler.js"),a=require("./Layers.js"),s=require("../math/Matrix3.js"),o=require("../math/Math.js"),u=require("../constants.js"),h=0;function l(){Object.defineProperty(this,"id",{value:h++}),this.uuid=o._Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=l.DefaultUp.clone();var i=new e.Vector3,u=new n.Euler,c=new t.Quaternion,d=new e.Vector3(1,1,1);u.onChange(function(){c.setFromEuler(u,!1)}),c.onChange(function(){u.setFromQuaternion(c,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:u},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new r.Matrix4},normalMatrix:{value:new s.Matrix3}}),this.matrix=new r.Matrix4,this.matrixWorld=new r.Matrix4,this.matrixAutoUpdate=l.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new a.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}l.DefaultUp=new e.Vector3(0,1,0),l.DefaultMatrixAutoUpdate=!0,l.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:l,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var e=new t.Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new t.Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var t=new e.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new e.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new e.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new e.Vector3;return function(e,r){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(r)),this}}(),translateX:function(){var t=new e.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new e.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new e.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new r.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var i=new t.Quaternion,n=new r.Matrix4,a=new e.Vector3,s=new e.Vector3;return function(t,e,r){t.isVector3?a.copy(t):a.set(t,e,r);var o=this.parent;this.updateWorldMatrix(!0,!1),s.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?n.lookAt(s,a,this.up):n.lookAt(a,s,this.up),this.quaternion.setFromRotationMatrix(n),o&&(n.extractRotation(o.matrixWorld),i.setFromRotationMatrix(n),this.quaternion.premultiply(i.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("Object3D.add: object not an instance of Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(console.warn("Object3D: .getWorldPosition() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var r=new e.Vector3,i=new e.Vector3;return function(e){return void 0===e&&(console.warn("Object3D: .getWorldQuaternion() target is now required"),e=new t.Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,e,i),e}}(),getWorldScale:function(){var r=new e.Vector3,i=new t.Quaternion;return function(t){return void 0===t&&(console.warn("Object3D: .getWorldScale() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,i,t),t}}(),getWorldDirection:function(t){void 0===t&&(console.warn("Object3D: .getWorldDirection() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,n=0,a=i.length;n<a;n++)i[n].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function n(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==u.TrianglesDrawMode&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=n(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var o=0,h=s.length;o<h;o++){var l=s[o];n(t.shapes,l)}else n(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(o=0,h=this.material.length;o<h;o++)c.push(n(t.materials,this.material[o]));i.material=c}else i.material=n(t.materials,this.material);if(this.children.length>0){i.children=[];for(o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(e){var d=x(t.geometries),m=x(t.materials),p=x(t.textures),f=x(t.images);s=x(t.shapes);d.length>0&&(r.geometries=d),m.length>0&&(r.materials=m),p.length>0&&(r.textures=p),f.length>0&&(r.images=f),s.length>0&&(r.shapes=s)}return r.object=i,r;function x(t){var e=[];for(var r in t){var i=t[r];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var i=t.children[r];this.add(i.clone())}return this}});
},{"../math/Quaternion.js":"eUMQ","../math/Vector3.js":"TKlu","../math/Matrix4.js":"Rio0","./EventDispatcher.js":"O/Kz","../math/Euler.js":"qd6e","./Layers.js":"imWo","../math/Matrix3.js":"ibIB","../math/Math.js":"J7M1","../constants.js":"HNhV"}],"Baxu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=e;var t=require("../core/Object3D.js");function e(){t.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}e.prototype=Object.assign(Object.create(t.Object3D.prototype),{constructor:e,isScene:!0,copy:function(e,o){return t.Object3D.prototype.copy.call(this,e,o),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var o=t.Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(o.object.background=this.background.toJSON(e)),null!==this.fog&&(o.object.fog=this.fog.toJSON()),o},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/Object3D.js":"Kems"}],"bcK4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=i;var t=require("../math/Matrix4.js"),r=require("../core/Object3D.js"),e=require("../math/Vector3.js");function i(){r.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new t.Matrix4,this.projectionMatrix=new t.Matrix4,this.projectionMatrixInverse=new t.Matrix4}i.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:i,isCamera:!0,copy:function(t,e){return r.Object3D.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("Camera: .getWorldDirection() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function(t){r.Object3D.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});
},{"../math/Matrix4.js":"Rio0","../core/Object3D.js":"Kems","../math/Vector3.js":"TKlu"}],"YP16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrthographicCamera=e;var t=require("./Camera.js"),i=require("../core/Object3D.js");function e(i,e,h,o,s,r){t.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==i?i:-1,this.right=void 0!==e?e:1,this.top=void 0!==h?h:1,this.bottom=void 0!==o?o:-1,this.near=void 0!==s?s:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()}e.prototype=Object.assign(Object.create(t.Camera.prototype),{constructor:e,isOrthographicCamera:!0,copy:function(i,e){return t.Camera.prototype.copy.call(this,i,e),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=null===i.view?null:Object.assign({},i.view),this},setViewOffset:function(t,i,e,h,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=h,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,h=(this.top+this.bottom)/2,o=e-t,s=e+t,r=h+i,a=h-i;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),n=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,c=(this.top-this.bottom)/this.view.height;s=(o+=f*(this.view.offsetX/l))+f*(this.view.width/l),a=(r-=c*(this.view.offsetY/n))-c*(this.view.height/n)}this.projectionMatrix.makeOrthographic(o,s,r,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});
},{"./Camera.js":"bcK4","../core/Object3D.js":"Kems"}],"qn61":[function(require,module,exports) {
"use strict";function t(t,i){this.x=t||0,this.y=i||0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector2=t,Object.defineProperties(t.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(t.prototype,{isVector2:!0,set:function(t,i){return this.x=t,this.y=i,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},sub:function(t,i){return void 0!==i?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var i=this.x,n=this.y,s=t.elements;return this.x=s[0]*i+s[3]*n+s[6],this.y=s[1]*i+s[4]*n+s[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},clampScalar:function(){var i=new t,n=new t;return function(t,s){return i.set(t,t),n.set(s,s),this.clamp(i,n)}}(),clampLength:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,n){return this.subVectors(i,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},fromBufferAttribute:function(t,i,n){return void 0!==n&&console.warn("Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this},rotateAround:function(t,i){var n=Math.cos(i),s=Math.sin(i),h=this.x-t.x,r=this.y-t.y;return this.x=h*n-r*s+t.x,this.y=h*s+r*n+t.y,this}});
},{}],"pY+V":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageUtils=void 0;var t={getDataURL:function(t){var a;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)a=t;else{void 0===e&&(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),e.width=t.width,e.height=t.height;var i=e.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),a=e}return a.width>2048||a.height>2048?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png")}};exports.ImageUtils=t;
},{}],"05Bz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Texture=n;var t=require("../core/EventDispatcher.js"),i=require("../constants.js"),e=require("../math/Math.js"),r=require("../math/Vector2.js"),a=require("../math/Matrix3.js"),s=require("../extras/ImageUtils.js"),p=0;function n(t,s,o,h,u,m,c,l,g,d){Object.defineProperty(this,"id",{value:p++}),this.uuid=e._Math.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==s?s:n.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:i.ClampToEdgeWrapping,this.wrapT=void 0!==h?h:i.ClampToEdgeWrapping,this.magFilter=void 0!==u?u:i.LinearFilter,this.minFilter=void 0!==m?m:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==g?g:1,this.format=void 0!==c?c:i.RGBAFormat,this.type=void 0!==l?l:i.UnsignedByteType,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.center=new r.Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a.Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:i.LinearEncoding,this.version=0,this.onUpdate=null}n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=i.UVMapping,n.prototype=Object.assign(Object.create(t.EventDispatcher.prototype),{constructor:n,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var a=this.image;if(void 0===a.uuid&&(a.uuid=e._Math.generateUUID()),!i&&void 0===t.images[a.uuid]){var p;if(Array.isArray(a)){p=[];for(var n=0,o=a.length;n<o;n++)p.push(s.ImageUtils.getDataURL(a[n]))}else p=s.ImageUtils.getDataURL(a);t.images[a.uuid]={uuid:a.uuid,url:p}}r.image=a.uuid}return i||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==i.UVMapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case i.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case i.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case i.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case i.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(n.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});
},{"../core/EventDispatcher.js":"O/Kz","../constants.js":"HNhV","../math/Math.js":"J7M1","../math/Vector2.js":"qn61","../math/Matrix3.js":"ibIB","../extras/ImageUtils.js":"pY+V"}],"pcP+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTexture=r;var t=require("./Texture.js"),e=require("../constants.js");function r(r,i,s,a,o,p,u,l,n,c,h,x){t.Texture.call(this,null,p,u,l,n,c,a,o,h,x),this.image={data:r,width:i,height:s},this.magFilter=void 0!==n?n:e.NearestFilter,this.minFilter=void 0!==c?c:e.NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}r.prototype=Object.create(t.Texture.prototype),r.prototype.constructor=r,r.prototype.isDataTexture=!0;
},{"./Texture.js":"05Bz","../constants.js":"HNhV"}],"eZFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Box3=n;var t=require("./Vector3.js"),i=require("./Sphere.js");function n(i,n){this.min=void 0!==i?i:new t.Vector3(1/0,1/0,1/0),this.max=void 0!==n?n:new t.Vector3(-1/0,-1/0,-1/0)}Object.assign(n.prototype,{isBox3:!0,set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromArray:function(t){for(var i=1/0,n=1/0,e=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,m=t.length;o<m;o+=3){var h=t[o],x=t[o+1],c=t[o+2];h<i&&(i=h),x<n&&(n=x),c<e&&(e=c),h>r&&(r=h),x>s&&(s=x),c>a&&(a=c)}return this.min.set(i,n,e),this.max.set(r,s,a),this},setFromBufferAttribute:function(t){for(var i=1/0,n=1/0,e=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,m=t.count;o<m;o++){var h=t.getX(o),x=t.getY(o),c=t.getZ(o);h<i&&(i=h),x<n&&(n=x),c<e&&(e=c),h>r&&(r=h),x>s&&(s=x),c>a&&(a=c)}return this.min.set(i,n,e),this.max.set(r,s,a),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,n=t.length;i<n;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(){var i=new t.Vector3;return function(t,n){var e=i.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(i){return void 0===i&&(console.warn("Box3: .getCenter() target is now required"),i=new t.Vector3),this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(i){return void 0===i&&(console.warn("Box3: .getSize() target is now required"),i=new t.Vector3),this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var i,n,e,r=new t.Vector3;function s(t){var s=t.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(n=0,e=a.length;n<e;n++)r.copy(a[n]),r.applyMatrix4(t.matrixWorld),i.expandByPoint(r)}else if(s.isBufferGeometry){var o=s.attributes.position;if(void 0!==o)for(n=0,e=o.count;n<e;n++)r.fromBufferAttribute(o,n).applyMatrix4(t.matrixWorld),i.expandByPoint(r)}}return function(t){return i=this,t.updateMatrixWorld(!0),t.traverse(s),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(i,n){return void 0===n&&(console.warn("Box3: .getParameter() target is now required"),n=new t.Vector3),n.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var i=new t.Vector3;return function(t){return this.clampPoint(t.center,i),i.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(t){var i,n;return t.normal.x>0?(i=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),i<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var i=new t.Vector3,n=new t.Vector3,e=new t.Vector3,r=new t.Vector3,s=new t.Vector3,a=new t.Vector3,o=new t.Vector3,m=new t.Vector3,h=new t.Vector3,x=new t.Vector3;function c(t){var r,s;for(r=0,s=t.length-3;r<=s;r+=3){o.fromArray(t,r);var a=h.x*Math.abs(o.x)+h.y*Math.abs(o.y)+h.z*Math.abs(o.z),m=i.dot(o),x=n.dot(o),c=e.dot(o);if(Math.max(-Math.max(m,x,c),Math.min(m,x,c))>a)return!1}return!0}return function(t){if(this.isEmpty())return!1;this.getCenter(m),h.subVectors(this.max,m),i.subVectors(t.a,m),n.subVectors(t.b,m),e.subVectors(t.c,m),r.subVectors(n,i),s.subVectors(e,n),a.subVectors(i,e);var o=[0,-r.z,r.y,0,-s.z,s.y,0,-a.z,a.y,r.z,0,-r.x,s.z,0,-s.x,a.z,0,-a.x,-r.y,r.x,0,-s.y,s.x,0,-a.y,a.x,0];return!!c(o)&&(!!c(o=[1,0,0,0,1,0,0,0,1])&&(x.crossVectors(r,s),c(o=[x.x,x.y,x.z])))}}(),clampPoint:function(i,n){return void 0===n&&(console.warn("Box3: .clampPoint() target is now required"),n=new t.Vector3),n.copy(i).clamp(this.min,this.max)},distanceToPoint:function(){var i=new t.Vector3;return function(t){return i.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var n=new t.Vector3;return function(t){return void 0===t&&(console.warn("Box3: .getBoundingSphere() target is now required"),t=new i.Sphere),this.getCenter(t.center),t.radius=.5*this.getSize(n).length(),t}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var i=[new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3];return function(t){return this.isEmpty()?this:(i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(i),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});
},{"./Vector3.js":"TKlu","./Sphere.js":"L4Ep"}],"L4Ep":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sphere=r;var t=require("./Box3.js"),e=require("./Vector3.js");function r(t,r){this.center=void 0!==t?t:new e.Vector3,this.radius=void 0!==r?r:0}Object.assign(r.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var e=new t.Box3;return function(t,r){var i=this.center;void 0!==r?i.copy(r):e.setFromPoints(t).getCenter(i);for(var n=0,s=0,o=t.length;s<o;s++)n=Math.max(n,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,r){var i=this.center.distanceToSquared(t);return void 0===r&&(console.warn("Sphere: .clampPoint() target is now required"),r=new e.Vector3),r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return void 0===e&&(console.warn("Sphere: .getBoundingBox() target is now required"),e=new t.Box3),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});
},{"./Box3.js":"eZFm","./Vector3.js":"TKlu"}],"bEDN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Plane=r;var t=require("./Matrix3.js"),n=require("./Vector3.js");function r(t,r){this.normal=void 0!==t?t:new n.Vector3(1,0,0),this.constant=void 0!==r?r:0}Object.assign(r.prototype,{set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,r,o){return this.normal.set(t,n,r),this.constant=o,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new n.Vector3,r=new n.Vector3;return function(n,o,i){var e=t.subVectors(i,o).cross(r.subVectors(n,o)).normalize();return this.setFromNormalAndCoplanarPoint(e,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,r){return void 0===r&&(console.warn("Plane: .projectPoint() target is now required"),r=new n.Vector3),r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new n.Vector3;return function(r,o){void 0===o&&(console.warn("Plane: .intersectLine() target is now required"),o=new n.Vector3);var i=r.delta(t),e=this.normal.dot(i);if(0===e)return 0===this.distanceToPoint(r.start)?o.copy(r.start):void 0;var s=-(r.start.dot(this.normal)+this.constant)/e;return s<0||s>1?void 0:o.copy(i).multiplyScalar(s).add(r.start)}}(),intersectsLine:function(t){var n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("Plane: .coplanarPoint() target is now required"),t=new n.Vector3),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var r=new n.Vector3,o=new t.Matrix3;return function(t,n){var i=n||o.getNormalMatrix(t),e=this.coplanarPoint(r).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-e.dot(s),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});
},{"./Matrix3.js":"ibIB","./Vector3.js":"TKlu"}],"o6Yv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frustum=r;var e=require("./Vector3.js"),n=require("./Sphere.js"),t=require("./Plane.js");function r(e,n,r,o,i,s){this.planes=[void 0!==e?e:new t.Plane,void 0!==n?n:new t.Plane,void 0!==r?r:new t.Plane,void 0!==o?o:new t.Plane,void 0!==i?i:new t.Plane,void 0!==s?s:new t.Plane]}Object.assign(r.prototype,{set:function(e,n,t,r,o,i){var s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(t),s[3].copy(r),s[4].copy(o),s[5].copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var n=this.planes,t=0;t<6;t++)n[t].copy(e.planes[t]);return this},setFromMatrix:function(e){var n=this.planes,t=e.elements,r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],c=t[5],p=t[6],u=t[7],l=t[8],m=t[9],h=t[10],f=t[11],v=t[12],y=t[13],d=t[14],x=t[15];return n[0].setComponents(s-r,u-a,f-l,x-v).normalize(),n[1].setComponents(s+r,u+a,f+l,x+v).normalize(),n[2].setComponents(s+o,u+c,f+m,x+y).normalize(),n[3].setComponents(s-o,u-c,f-m,x-y).normalize(),n[4].setComponents(s-i,u-p,f-h,x-d).normalize(),n[5].setComponents(s+i,u+p,f+h,x+d).normalize(),this},intersectsObject:function(){var e=new n.Sphere;return function(n){var t=n.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),e.copy(t.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new n.Sphere;return function(n){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var n=this.planes,t=e.center,r=-e.radius,o=0;o<6;o++){if(n[o].distanceToPoint(t)<r)return!1}return!0},intersectsBox:function(){var n=new e.Vector3;return function(e){for(var t=this.planes,r=0;r<6;r++){var o=t[r];if(n.x=o.normal.x>0?e.max.x:e.min.x,n.y=o.normal.y>0?e.max.y:e.min.y,n.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(n)<0)return!1}return!0}}(),containsPoint:function(e){for(var n=this.planes,t=0;t<6;t++)if(n[t].distanceToPoint(e)<0)return!1;return!0}});
},{"./Vector3.js":"TKlu","./Sphere.js":"L4Ep","./Plane.js":"bEDN"}],"lCIF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";exports.default=e;
},{}],"j27w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";exports.default=e;
},{}],"qjNh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";exports.default=e;
},{}],"5Bkk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"9JgJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n";exports.default=e;
},{}],"pf/S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec3 transformed = vec3( position );\n";exports.default=e;
},{}],"R80A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n";exports.default=e;
},{}],"hHve":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t='\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\t// Paper incorrect indicates coefficient is PI/21, and will\n\t// be corrected to 1/21 in future updates.\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit(  ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit(  );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n';exports.default=t;
},{}],"/Y1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"UhjB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"kP/f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n";exports.default=e;
},{}],"7D3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n";exports.default=e;
},{}],"VDdO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";exports.default=e;
},{}],"KrJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n";exports.default=e;
},{}],"QlCH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";exports.default=e;
},{}],"gDtq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n";exports.default=e;
},{}],"rZqd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n";exports.default=n;
},{}],"Of2x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n";exports.default=e;
},{}],"/Aqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"FCPg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";exports.default=e;
},{}],"iIkB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n";exports.default=e;
},{}],"08CM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n";exports.default=e;
},{}],"D/Cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";exports.default=e;
},{}],"h5IX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n";exports.default=e;
},{}],"FSKT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n";exports.default=e;
},{}],"fZxK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"rOrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n\n#ifdef USE_ENVMAP\n\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"0a7w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"GNiQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"D0te":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n";exports.default=e;
},{}],"nAGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n";exports.default=e;
},{}],"R09L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n";exports.default=o;
},{}],"q0Vh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"gFb6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\t}\n\n#endif\n";exports.default=t;
},{}],"3EHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n";exports.default=e;
},{}],"A8HM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n";exports.default=e;
},{}],"/tgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"SvV4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nuniform vec3 ambientLightColor;\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"T+g0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\tvec3 getLightProbeIndirectIrradiance(  const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\n\t\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance(  const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n";exports.default=e;
},{}],"Wpsh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";exports.default=e;
},{}],"L8EZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n";exports.default=e;
},{}],"XIh6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat ); // Burley clearcoat model\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";exports.default=e;
},{}],"pZZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t// Defer to the IndirectSpecular function to compute\n\t// the indirectDiffuse if energy preservation is enabled.\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\t#endif\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\n\t// Both indirect specular and diffuse light accumulate here\n\t// if energy preservation enabled, and PMREM provided.\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\t\t// The multiscattering paper uses the below formula for calculating diffuse \n\t\t// for dielectrics, but this is already handled when initially computing the \n\t\t// specular and diffuse color, so we can just use the diffuseColor directly.\n\t\t//vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\tvec3 diffuse = material.diffuseColor;\n\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n\t#else\n\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\n\t#endif\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n";exports.default=t;
},{}],"0TFs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n\n#endif\n";exports.default=t;
},{}],"pXEg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tirradiance += getLightProbeIndirectIrradiance(  geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance(  geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance(  geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"amTm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n\n#endif\n";exports.default=e;
},{}],"6hLo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n";exports.default=e;
},{}],"WubY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\n#endif\n";exports.default=e;
},{}],"H9ft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"nbPc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n\t#else\n\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\tgl_Position.z *= gl_Position.w;\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"X0dL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n";exports.default=e;
},{}],"OpyR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n";exports.default=e;
},{}],"ikFL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n";exports.default=e;
},{}],"MrQR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n\n#endif\n";exports.default=e;
},{}],"RAI/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n";exports.default=e;
},{}],"o1q1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n";exports.default=e;
},{}],"COIU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n";exports.default=e;
},{}],"DpVF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"KLRR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"Z+P+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"CVJ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_NORMALMAP\n\n\t#ifdef OBJECTSPACE_NORMALMAP\n\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t\t#ifdef FLIP_SIDED\n\n\t\t\tnormal = - normal;\n\n\t\t#endif\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tnormal = normalize( normalMatrix * normal );\n\n\t#else // tangent-space normal map\n\n\t\t#ifdef USE_TANGENT\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\n\t\t#else\n\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n\t\t#endif\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n";exports.default=n;
},{}],"upv+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t#ifdef OBJECTSPACE_NORMALMAP\n\n\t\tuniform mat3 normalMatrix;\n\n\t#else\n\n\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t\treturn normalize( tsn * mapN );\n\n\t\t}\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"rzXR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";exports.default=n;
},{}],"/fTe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n";exports.default=e;
},{}],"UozC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\ngl_Position = projectionMatrix * mvPosition;\n";exports.default=e;
},{}],"jEdD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( DITHERING )\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n";exports.default=e;
},{}],"eTEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#if defined( DITHERING )\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n";exports.default=t;
},{}],"GAlH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n";exports.default=e;
},{}],"wgQ7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n";exports.default=e;
},{}],"S4Ld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"GebG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n#endif\n";exports.default=n;
},{}],"oGFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n#endif\n";exports.default=n;
},{}],"VHeG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\t#endif\n\n\treturn shadow;\n\n}\n";exports.default=t;
},{}],"iSNl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n";exports.default=e;
},{}],"lIHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"x7CZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n";exports.default=e;
},{}],"ldZA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"4l9W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n";exports.default=e;
},{}],"wWar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n";exports.default=e;
},{}],"S/Cm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n";exports.default=e;
},{}],"3eJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n";exports.default=n;
},{}],"PhTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n";exports.default=e;
},{}],"dLIl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n\n#endif\n";exports.default=e;
},{}],"sdyi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n";exports.default=e;
},{}],"CrnQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n";exports.default=e;
},{}],"iHXx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif\n";exports.default=e;
},{}],"XQzp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif\n";exports.default=e;
},{}],"jGqk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n#endif\n";exports.default=e;
},{}],"hORM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=e;
},{}],"Mvjx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n";exports.default=n;
},{}],"l1BQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=e;
},{}],"yU0k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n";exports.default=n;
},{}],"LIRK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n";exports.default=n;
},{}],"ImIv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n";exports.default=e;
},{}],"uhJU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n";exports.default=n;
},{}],"LNOr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n";exports.default=n;
},{}],"YEiQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=n;
},{}],"eJLN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n";exports.default=e;
},{}],"cSeH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"sBDS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"6Y1f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"t8+t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"uskS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";exports.default=n;
},{}],"NjcF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";exports.default=e;
},{}],"BzD0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"KNSx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n";exports.default=e;
},{}],"pVw3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";exports.default=n;
},{}],"d8DA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"vOIO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";exports.default=n;
},{}],"eHL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PHYSICAL\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=n;
},{}],"NETy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n";exports.default=n;
},{}],"IVkB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n";exports.default=n;
},{}],"skYz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"+tjW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"Kjd/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"5/IZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"1Nh4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"OVad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=n;
},{}],"fXGd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderChunk=void 0;var e=dr(require("./ShaderChunk/alphamap_fragment.glsl.js")),r=dr(require("./ShaderChunk/alphamap_pars_fragment.glsl.js")),a=dr(require("./ShaderChunk/alphatest_fragment.glsl.js")),l=dr(require("./ShaderChunk/aomap_fragment.glsl.js")),s=dr(require("./ShaderChunk/aomap_pars_fragment.glsl.js")),t=dr(require("./ShaderChunk/begin_vertex.glsl.js")),u=dr(require("./ShaderChunk/beginnormal_vertex.glsl.js")),_=dr(require("./ShaderChunk/bsdfs.glsl.js")),g=dr(require("./ShaderChunk/bumpmap_pars_fragment.glsl.js")),n=dr(require("./ShaderChunk/clipping_planes_fragment.glsl.js")),h=dr(require("./ShaderChunk/clipping_planes_pars_fragment.glsl.js")),d=dr(require("./ShaderChunk/clipping_planes_pars_vertex.glsl.js")),i=dr(require("./ShaderChunk/clipping_planes_vertex.glsl.js")),f=dr(require("./ShaderChunk/color_fragment.glsl.js")),p=dr(require("./ShaderChunk/color_pars_fragment.glsl.js")),m=dr(require("./ShaderChunk/color_pars_vertex.glsl.js")),v=dr(require("./ShaderChunk/color_vertex.glsl.js")),q=dr(require("./ShaderChunk/common.glsl.js")),j=dr(require("./ShaderChunk/cube_uv_reflection_fragment.glsl.js")),S=dr(require("./ShaderChunk/defaultnormal_vertex.glsl.js")),o=dr(require("./ShaderChunk/displacementmap_pars_vertex.glsl.js")),k=dr(require("./ShaderChunk/displacementmap_vertex.glsl.js")),C=dr(require("./ShaderChunk/emissivemap_fragment.glsl.js")),c=dr(require("./ShaderChunk/emissivemap_pars_fragment.glsl.js")),b=dr(require("./ShaderChunk/encodings_fragment.glsl.js")),x=dr(require("./ShaderChunk/encodings_pars_fragment.glsl.js")),L=dr(require("./ShaderChunk/envmap_fragment.glsl.js")),w=dr(require("./ShaderChunk/envmap_pars_fragment.glsl.js")),y=dr(require("./ShaderChunk/envmap_pars_vertex.glsl.js")),A=dr(require("./ShaderChunk/envmap_vertex.glsl.js")),B=dr(require("./ShaderChunk/fog_vertex.glsl.js")),G=dr(require("./ShaderChunk/fog_pars_vertex.glsl.js")),R=dr(require("./ShaderChunk/fog_fragment.glsl.js")),M=dr(require("./ShaderChunk/fog_pars_fragment.glsl.js")),O=dr(require("./ShaderChunk/gradientmap_pars_fragment.glsl.js")),P=dr(require("./ShaderChunk/lightmap_fragment.glsl.js")),z=dr(require("./ShaderChunk/lightmap_pars_fragment.glsl.js")),D=dr(require("./ShaderChunk/lights_lambert_vertex.glsl.js")),E=dr(require("./ShaderChunk/lights_pars_begin.glsl.js")),F=dr(require("./ShaderChunk/envmap_physical_pars_fragment.glsl.js")),H=dr(require("./ShaderChunk/lights_phong_fragment.glsl.js")),I=dr(require("./ShaderChunk/lights_phong_pars_fragment.glsl.js")),J=dr(require("./ShaderChunk/lights_physical_fragment.glsl.js")),K=dr(require("./ShaderChunk/lights_physical_pars_fragment.glsl.js")),N=dr(require("./ShaderChunk/lights_fragment_begin.glsl.js")),Q=dr(require("./ShaderChunk/lights_fragment_maps.glsl.js")),T=dr(require("./ShaderChunk/lights_fragment_end.glsl.js")),U=dr(require("./ShaderChunk/logdepthbuf_fragment.glsl.js")),V=dr(require("./ShaderChunk/logdepthbuf_pars_fragment.glsl.js")),W=dr(require("./ShaderChunk/logdepthbuf_pars_vertex.glsl.js")),X=dr(require("./ShaderChunk/logdepthbuf_vertex.glsl.js")),Y=dr(require("./ShaderChunk/map_fragment.glsl.js")),Z=dr(require("./ShaderChunk/map_pars_fragment.glsl.js")),$=dr(require("./ShaderChunk/map_particle_fragment.glsl.js")),ee=dr(require("./ShaderChunk/map_particle_pars_fragment.glsl.js")),re=dr(require("./ShaderChunk/metalnessmap_fragment.glsl.js")),ae=dr(require("./ShaderChunk/metalnessmap_pars_fragment.glsl.js")),le=dr(require("./ShaderChunk/morphnormal_vertex.glsl.js")),se=dr(require("./ShaderChunk/morphtarget_pars_vertex.glsl.js")),te=dr(require("./ShaderChunk/morphtarget_vertex.glsl.js")),ue=dr(require("./ShaderChunk/normal_fragment_begin.glsl.js")),_e=dr(require("./ShaderChunk/normal_fragment_maps.glsl.js")),ge=dr(require("./ShaderChunk/normalmap_pars_fragment.glsl.js")),ne=dr(require("./ShaderChunk/packing.glsl.js")),he=dr(require("./ShaderChunk/premultiplied_alpha_fragment.glsl.js")),de=dr(require("./ShaderChunk/project_vertex.glsl.js")),ie=dr(require("./ShaderChunk/dithering_fragment.glsl.js")),fe=dr(require("./ShaderChunk/dithering_pars_fragment.glsl.js")),pe=dr(require("./ShaderChunk/roughnessmap_fragment.glsl.js")),me=dr(require("./ShaderChunk/roughnessmap_pars_fragment.glsl.js")),ve=dr(require("./ShaderChunk/shadowmap_pars_fragment.glsl.js")),qe=dr(require("./ShaderChunk/shadowmap_pars_vertex.glsl.js")),je=dr(require("./ShaderChunk/shadowmap_vertex.glsl.js")),Se=dr(require("./ShaderChunk/shadowmask_pars_fragment.glsl.js")),oe=dr(require("./ShaderChunk/skinbase_vertex.glsl.js")),ke=dr(require("./ShaderChunk/skinning_pars_vertex.glsl.js")),Ce=dr(require("./ShaderChunk/skinning_vertex.glsl.js")),ce=dr(require("./ShaderChunk/skinnormal_vertex.glsl.js")),be=dr(require("./ShaderChunk/specularmap_fragment.glsl.js")),xe=dr(require("./ShaderChunk/specularmap_pars_fragment.glsl.js")),Le=dr(require("./ShaderChunk/tonemapping_fragment.glsl.js")),we=dr(require("./ShaderChunk/tonemapping_pars_fragment.glsl.js")),ye=dr(require("./ShaderChunk/uv_pars_fragment.glsl.js")),Ae=dr(require("./ShaderChunk/uv_pars_vertex.glsl.js")),Be=dr(require("./ShaderChunk/uv_vertex.glsl.js")),Ge=dr(require("./ShaderChunk/uv2_pars_fragment.glsl.js")),Re=dr(require("./ShaderChunk/uv2_pars_vertex.glsl.js")),Me=dr(require("./ShaderChunk/uv2_vertex.glsl.js")),Oe=dr(require("./ShaderChunk/worldpos_vertex.glsl.js")),Pe=dr(require("./ShaderLib/background_frag.glsl.js")),ze=dr(require("./ShaderLib/background_vert.glsl.js")),De=dr(require("./ShaderLib/cube_frag.glsl.js")),Ee=dr(require("./ShaderLib/cube_vert.glsl.js")),Fe=dr(require("./ShaderLib/depth_frag.glsl.js")),He=dr(require("./ShaderLib/depth_vert.glsl.js")),Ie=dr(require("./ShaderLib/distanceRGBA_frag.glsl.js")),Je=dr(require("./ShaderLib/distanceRGBA_vert.glsl.js")),Ke=dr(require("./ShaderLib/equirect_frag.glsl.js")),Ne=dr(require("./ShaderLib/equirect_vert.glsl.js")),Qe=dr(require("./ShaderLib/linedashed_frag.glsl.js")),Te=dr(require("./ShaderLib/linedashed_vert.glsl.js")),Ue=dr(require("./ShaderLib/meshbasic_frag.glsl.js")),Ve=dr(require("./ShaderLib/meshbasic_vert.glsl.js")),We=dr(require("./ShaderLib/meshlambert_frag.glsl.js")),Xe=dr(require("./ShaderLib/meshlambert_vert.glsl.js")),Ye=dr(require("./ShaderLib/meshmatcap_frag.glsl.js")),Ze=dr(require("./ShaderLib/meshmatcap_vert.glsl.js")),$e=dr(require("./ShaderLib/meshphong_frag.glsl.js")),er=dr(require("./ShaderLib/meshphong_vert.glsl.js")),rr=dr(require("./ShaderLib/meshphysical_frag.glsl.js")),ar=dr(require("./ShaderLib/meshphysical_vert.glsl.js")),lr=dr(require("./ShaderLib/normal_frag.glsl.js")),sr=dr(require("./ShaderLib/normal_vert.glsl.js")),tr=dr(require("./ShaderLib/points_frag.glsl.js")),ur=dr(require("./ShaderLib/points_vert.glsl.js")),_r=dr(require("./ShaderLib/shadow_frag.glsl.js")),gr=dr(require("./ShaderLib/shadow_vert.glsl.js")),nr=dr(require("./ShaderLib/sprite_frag.glsl.js")),hr=dr(require("./ShaderLib/sprite_vert.glsl.js"));function dr(e){return e&&e.__esModule?e:{default:e}}var ir={alphamap_fragment:e.default,alphamap_pars_fragment:r.default,alphatest_fragment:a.default,aomap_fragment:l.default,aomap_pars_fragment:s.default,begin_vertex:t.default,beginnormal_vertex:u.default,bsdfs:_.default,bumpmap_pars_fragment:g.default,clipping_planes_fragment:n.default,clipping_planes_pars_fragment:h.default,clipping_planes_pars_vertex:d.default,clipping_planes_vertex:i.default,color_fragment:f.default,color_pars_fragment:p.default,color_pars_vertex:m.default,color_vertex:v.default,common:q.default,cube_uv_reflection_fragment:j.default,defaultnormal_vertex:S.default,displacementmap_pars_vertex:o.default,displacementmap_vertex:k.default,emissivemap_fragment:C.default,emissivemap_pars_fragment:c.default,encodings_fragment:b.default,encodings_pars_fragment:x.default,envmap_fragment:L.default,envmap_pars_fragment:w.default,envmap_pars_vertex:y.default,envmap_physical_pars_fragment:F.default,envmap_vertex:A.default,fog_vertex:B.default,fog_pars_vertex:G.default,fog_fragment:R.default,fog_pars_fragment:M.default,gradientmap_pars_fragment:O.default,lightmap_fragment:P.default,lightmap_pars_fragment:z.default,lights_lambert_vertex:D.default,lights_pars_begin:E.default,lights_phong_fragment:H.default,lights_phong_pars_fragment:I.default,lights_physical_fragment:J.default,lights_physical_pars_fragment:K.default,lights_fragment_begin:N.default,lights_fragment_maps:Q.default,lights_fragment_end:T.default,logdepthbuf_fragment:U.default,logdepthbuf_pars_fragment:V.default,logdepthbuf_pars_vertex:W.default,logdepthbuf_vertex:X.default,map_fragment:Y.default,map_pars_fragment:Z.default,map_particle_fragment:$.default,map_particle_pars_fragment:ee.default,metalnessmap_fragment:re.default,metalnessmap_pars_fragment:ae.default,morphnormal_vertex:le.default,morphtarget_pars_vertex:se.default,morphtarget_vertex:te.default,normal_fragment_begin:ue.default,normal_fragment_maps:_e.default,normalmap_pars_fragment:ge.default,packing:ne.default,premultiplied_alpha_fragment:he.default,project_vertex:de.default,dithering_fragment:ie.default,dithering_pars_fragment:fe.default,roughnessmap_fragment:pe.default,roughnessmap_pars_fragment:me.default,shadowmap_pars_fragment:ve.default,shadowmap_pars_vertex:qe.default,shadowmap_vertex:je.default,shadowmask_pars_fragment:Se.default,skinbase_vertex:oe.default,skinning_pars_vertex:ke.default,skinning_vertex:Ce.default,skinnormal_vertex:ce.default,specularmap_fragment:be.default,specularmap_pars_fragment:xe.default,tonemapping_fragment:Le.default,tonemapping_pars_fragment:we.default,uv_pars_fragment:ye.default,uv_pars_vertex:Ae.default,uv_vertex:Be.default,uv2_pars_fragment:Ge.default,uv2_pars_vertex:Re.default,uv2_vertex:Me.default,worldpos_vertex:Oe.default,background_frag:Pe.default,background_vert:ze.default,cube_frag:De.default,cube_vert:Ee.default,depth_frag:Fe.default,depth_vert:He.default,distanceRGBA_frag:Ie.default,distanceRGBA_vert:Je.default,equirect_frag:Ke.default,equirect_vert:Ne.default,linedashed_frag:Qe.default,linedashed_vert:Te.default,meshbasic_frag:Ue.default,meshbasic_vert:Ve.default,meshlambert_frag:We.default,meshlambert_vert:Xe.default,meshmatcap_frag:Ye.default,meshmatcap_vert:Ze.default,meshphong_frag:$e.default,meshphong_vert:er.default,meshphysical_frag:rr.default,meshphysical_vert:ar.default,normal_frag:lr.default,normal_vert:sr.default,points_frag:tr.default,points_vert:ur.default,shadow_frag:_r.default,shadow_vert:gr.default,sprite_frag:nr.default,sprite_vert:hr.default};exports.ShaderChunk=ir;
},{"./ShaderChunk/alphamap_fragment.glsl.js":"lCIF","./ShaderChunk/alphamap_pars_fragment.glsl.js":"j27w","./ShaderChunk/alphatest_fragment.glsl.js":"qjNh","./ShaderChunk/aomap_fragment.glsl.js":"5Bkk","./ShaderChunk/aomap_pars_fragment.glsl.js":"9JgJ","./ShaderChunk/begin_vertex.glsl.js":"pf/S","./ShaderChunk/beginnormal_vertex.glsl.js":"R80A","./ShaderChunk/bsdfs.glsl.js":"hHve","./ShaderChunk/bumpmap_pars_fragment.glsl.js":"/Y1M","./ShaderChunk/clipping_planes_fragment.glsl.js":"UhjB","./ShaderChunk/clipping_planes_pars_fragment.glsl.js":"kP/f","./ShaderChunk/clipping_planes_pars_vertex.glsl.js":"7D3p","./ShaderChunk/clipping_planes_vertex.glsl.js":"VDdO","./ShaderChunk/color_fragment.glsl.js":"KrJs","./ShaderChunk/color_pars_fragment.glsl.js":"QlCH","./ShaderChunk/color_pars_vertex.glsl.js":"QlCH","./ShaderChunk/color_vertex.glsl.js":"gDtq","./ShaderChunk/common.glsl.js":"rZqd","./ShaderChunk/cube_uv_reflection_fragment.glsl.js":"Of2x","./ShaderChunk/defaultnormal_vertex.glsl.js":"/Aqy","./ShaderChunk/displacementmap_pars_vertex.glsl.js":"FCPg","./ShaderChunk/displacementmap_vertex.glsl.js":"iIkB","./ShaderChunk/emissivemap_fragment.glsl.js":"08CM","./ShaderChunk/emissivemap_pars_fragment.glsl.js":"D/Cu","./ShaderChunk/encodings_fragment.glsl.js":"h5IX","./ShaderChunk/encodings_pars_fragment.glsl.js":"FSKT","./ShaderChunk/envmap_fragment.glsl.js":"fZxK","./ShaderChunk/envmap_pars_fragment.glsl.js":"rOrM","./ShaderChunk/envmap_pars_vertex.glsl.js":"0a7w","./ShaderChunk/envmap_vertex.glsl.js":"GNiQ","./ShaderChunk/fog_vertex.glsl.js":"D0te","./ShaderChunk/fog_pars_vertex.glsl.js":"nAGB","./ShaderChunk/fog_fragment.glsl.js":"R09L","./ShaderChunk/fog_pars_fragment.glsl.js":"q0Vh","./ShaderChunk/gradientmap_pars_fragment.glsl.js":"gFb6","./ShaderChunk/lightmap_fragment.glsl.js":"3EHp","./ShaderChunk/lightmap_pars_fragment.glsl.js":"A8HM","./ShaderChunk/lights_lambert_vertex.glsl.js":"/tgA","./ShaderChunk/lights_pars_begin.glsl.js":"SvV4","./ShaderChunk/envmap_physical_pars_fragment.glsl.js":"T+g0","./ShaderChunk/lights_phong_fragment.glsl.js":"Wpsh","./ShaderChunk/lights_phong_pars_fragment.glsl.js":"L8EZ","./ShaderChunk/lights_physical_fragment.glsl.js":"XIh6","./ShaderChunk/lights_physical_pars_fragment.glsl.js":"pZZU","./ShaderChunk/lights_fragment_begin.glsl.js":"0TFs","./ShaderChunk/lights_fragment_maps.glsl.js":"pXEg","./ShaderChunk/lights_fragment_end.glsl.js":"amTm","./ShaderChunk/logdepthbuf_fragment.glsl.js":"6hLo","./ShaderChunk/logdepthbuf_pars_fragment.glsl.js":"WubY","./ShaderChunk/logdepthbuf_pars_vertex.glsl.js":"H9ft","./ShaderChunk/logdepthbuf_vertex.glsl.js":"nbPc","./ShaderChunk/map_fragment.glsl.js":"X0dL","./ShaderChunk/map_pars_fragment.glsl.js":"OpyR","./ShaderChunk/map_particle_fragment.glsl.js":"ikFL","./ShaderChunk/map_particle_pars_fragment.glsl.js":"MrQR","./ShaderChunk/metalnessmap_fragment.glsl.js":"RAI/","./ShaderChunk/metalnessmap_pars_fragment.glsl.js":"o1q1","./ShaderChunk/morphnormal_vertex.glsl.js":"COIU","./ShaderChunk/morphtarget_pars_vertex.glsl.js":"DpVF","./ShaderChunk/morphtarget_vertex.glsl.js":"KLRR","./ShaderChunk/normal_fragment_begin.glsl.js":"Z+P+","./ShaderChunk/normal_fragment_maps.glsl.js":"CVJ6","./ShaderChunk/normalmap_pars_fragment.glsl.js":"upv+","./ShaderChunk/packing.glsl.js":"rzXR","./ShaderChunk/premultiplied_alpha_fragment.glsl.js":"/fTe","./ShaderChunk/project_vertex.glsl.js":"UozC","./ShaderChunk/dithering_fragment.glsl.js":"jEdD","./ShaderChunk/dithering_pars_fragment.glsl.js":"eTEj","./ShaderChunk/roughnessmap_fragment.glsl.js":"GAlH","./ShaderChunk/roughnessmap_pars_fragment.glsl.js":"wgQ7","./ShaderChunk/shadowmap_pars_fragment.glsl.js":"S4Ld","./ShaderChunk/shadowmap_pars_vertex.glsl.js":"GebG","./ShaderChunk/shadowmap_vertex.glsl.js":"oGFh","./ShaderChunk/shadowmask_pars_fragment.glsl.js":"VHeG","./ShaderChunk/skinbase_vertex.glsl.js":"iSNl","./ShaderChunk/skinning_pars_vertex.glsl.js":"lIHp","./ShaderChunk/skinning_vertex.glsl.js":"x7CZ","./ShaderChunk/skinnormal_vertex.glsl.js":"ldZA","./ShaderChunk/specularmap_fragment.glsl.js":"4l9W","./ShaderChunk/specularmap_pars_fragment.glsl.js":"wWar","./ShaderChunk/tonemapping_fragment.glsl.js":"S/Cm","./ShaderChunk/tonemapping_pars_fragment.glsl.js":"3eJv","./ShaderChunk/uv_pars_fragment.glsl.js":"PhTq","./ShaderChunk/uv_pars_vertex.glsl.js":"dLIl","./ShaderChunk/uv_vertex.glsl.js":"sdyi","./ShaderChunk/uv2_pars_fragment.glsl.js":"CrnQ","./ShaderChunk/uv2_pars_vertex.glsl.js":"iHXx","./ShaderChunk/uv2_vertex.glsl.js":"XQzp","./ShaderChunk/worldpos_vertex.glsl.js":"jGqk","./ShaderLib/background_frag.glsl.js":"hORM","./ShaderLib/background_vert.glsl.js":"Mvjx","./ShaderLib/cube_frag.glsl.js":"l1BQ","./ShaderLib/cube_vert.glsl.js":"yU0k","./ShaderLib/depth_frag.glsl.js":"LIRK","./ShaderLib/depth_vert.glsl.js":"ImIv","./ShaderLib/distanceRGBA_frag.glsl.js":"uhJU","./ShaderLib/distanceRGBA_vert.glsl.js":"LNOr","./ShaderLib/equirect_frag.glsl.js":"YEiQ","./ShaderLib/equirect_vert.glsl.js":"eJLN","./ShaderLib/linedashed_frag.glsl.js":"cSeH","./ShaderLib/linedashed_vert.glsl.js":"sBDS","./ShaderLib/meshbasic_frag.glsl.js":"6Y1f","./ShaderLib/meshbasic_vert.glsl.js":"t8+t","./ShaderLib/meshlambert_frag.glsl.js":"uskS","./ShaderLib/meshlambert_vert.glsl.js":"NjcF","./ShaderLib/meshmatcap_frag.glsl.js":"BzD0","./ShaderLib/meshmatcap_vert.glsl.js":"KNSx","./ShaderLib/meshphong_frag.glsl.js":"pVw3","./ShaderLib/meshphong_vert.glsl.js":"d8DA","./ShaderLib/meshphysical_frag.glsl.js":"vOIO","./ShaderLib/meshphysical_vert.glsl.js":"eHL4","./ShaderLib/normal_frag.glsl.js":"NETy","./ShaderLib/normal_vert.glsl.js":"IVkB","./ShaderLib/points_frag.glsl.js":"skYz","./ShaderLib/points_vert.glsl.js":"+tjW","./ShaderLib/shadow_frag.glsl.js":"Kjd/","./ShaderLib/shadow_vert.glsl.js":"5/IZ","./ShaderLib/sprite_frag.glsl.js":"1Nh4","./ShaderLib/sprite_vert.glsl.js":"OVad"}],"WOLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=r;var t=require("./Math.js"),e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function r(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}Object.assign(r.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(){function e(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}return function(r,i,s){if(r=t._Math.euclideanModulo(r,1),i=t._Math.clamp(i,0,1),s=t._Math.clamp(s,0,1),0===i)this.r=this.g=this.b=s;else{var n=s<=.5?s*(1+i):s+i-s*i,a=2*s-n;this.r=e(a,n,r+1/3),this.g=e(a,n,r),this.b=e(a,n,r-1/3)}return this}}(),setStyle:function(t){function r(e){void 0!==e&&parseFloat(e)<1&&console.warn("Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var s,n=i[1],a=i[2];switch(n){case"rgb":case"rgba":if(s=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,r(s[5]),this;if(s=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,r(s[5]),this;break;case"hsl":case"hsla":if(s=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var h=parseFloat(s[1])/360,o=parseInt(s[2],10)/100,l=parseInt(s[3],10)/100;return r(s[5]),this.setHSL(h,o,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,c=(u=i[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(u=e[t])?this.setHex(u):console.warn("Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,r,i=this.r,s=this.g,n=this.b,a=Math.max(i,s,n),h=Math.min(i,s,n),o=(h+a)/2;if(h===a)e=0,r=0;else{var l=a-h;switch(r=o<=.5?l/(a+h):l/(2-a-h),a){case i:e=(s-n)/l+(s<n?6:0);break;case s:e=(n-i)/l+2;break;case n:e=(i-s)/l+4}e/=6}return t.h=e,t.s=r,t.l=o,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,r,i){return this.getHSL(t),t.h+=e,t.s+=r,t.l+=i,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var e={h:0,s:0,l:0},r={h:0,s:0,l:0};return function(i,s){this.getHSL(e),i.getHSL(r);var n=t._Math.lerp(e.h,r.h,s),a=t._Math.lerp(e.s,r.s,s),h=t._Math.lerp(e.l,r.l,s);return this.setHSL(n,a,h),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});
},{"./Math.js":"J7M1"}],"S/ew":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniformsLib=void 0;var a=require("../../math/Color.js"),e=require("../../math/Vector2.js"),l=require("../../math/Matrix3.js"),o={common:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l.Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new e.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new a.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l.Matrix3}},sprite:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},center:{value:new e.Vector2(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new l.Matrix3}}};exports.UniformsLib=o;
},{"../../math/Color.js":"WOLJ","../../math/Vector2.js":"qn61","../../math/Matrix3.js":"ibIB"}],"cR4K":[function(require,module,exports) {
"use strict";function r(r){var e={};for(var o in r)for(var i in e[o]={},r[o]){var s=r[o][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[o][i]=s.clone():Array.isArray(s)?e[o][i]=s.slice():e[o][i]=s}return e}function e(e){for(var o={},i=0;i<e.length;i++){var s=r(e[i]);for(var t in s)o[t]=s[t]}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneUniforms=r,exports.mergeUniforms=e,exports.UniformsUtils=void 0;var o={clone:r,merge:e};exports.UniformsUtils=o;
},{}],"HCi4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderLib=void 0;var e=require("./ShaderChunk.js"),r=require("../../math/Vector3.js"),a=require("./UniformsLib.js"),i=require("../../math/Color.js"),m=require("../../math/Matrix3.js"),n=require("./UniformsUtils"),s={basic:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.fog]),vertexShader:e.ShaderChunk.meshbasic_vert,fragmentShader:e.ShaderChunk.meshbasic_frag},lambert:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new i.Color(0)}}]),vertexShader:e.ShaderChunk.meshlambert_vert,fragmentShader:e.ShaderChunk.meshlambert_frag},phong:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.specularmap,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.gradientmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new i.Color(0)},specular:{value:new i.Color(1118481)},shininess:{value:30}}]),vertexShader:e.ShaderChunk.meshphong_vert,fragmentShader:e.ShaderChunk.meshphong_frag},standard:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.envmap,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.roughnessmap,a.UniformsLib.metalnessmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{value:new i.Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:e.ShaderChunk.meshphysical_vert,fragmentShader:e.ShaderChunk.meshphysical_frag},matcap:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.fog,{matcap:{value:null}}]),vertexShader:e.ShaderChunk.meshmatcap_vert,fragmentShader:e.ShaderChunk.meshmatcap_frag},points:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.points,a.UniformsLib.fog]),vertexShader:e.ShaderChunk.points_vert,fragmentShader:e.ShaderChunk.points_frag},dashed:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:e.ShaderChunk.linedashed_vert,fragmentShader:e.ShaderChunk.linedashed_frag},depth:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.displacementmap]),vertexShader:e.ShaderChunk.depth_vert,fragmentShader:e.ShaderChunk.depth_frag},normal:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:e.ShaderChunk.normal_vert,fragmentShader:e.ShaderChunk.normal_frag},sprite:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.sprite,a.UniformsLib.fog]),vertexShader:e.ShaderChunk.sprite_vert,fragmentShader:e.ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new m.Matrix3},t2D:{value:null}},vertexShader:e.ShaderChunk.background_vert,fragmentShader:e.ShaderChunk.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:e.ShaderChunk.cube_vert,fragmentShader:e.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:e.ShaderChunk.equirect_vert,fragmentShader:e.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.common,a.UniformsLib.displacementmap,{referencePosition:{value:new r.Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:e.ShaderChunk.distanceRGBA_vert,fragmentShader:e.ShaderChunk.distanceRGBA_frag},shadow:{uniforms:(0,n.mergeUniforms)([a.UniformsLib.lights,a.UniformsLib.fog,{color:{value:new i.Color(0)},opacity:{value:1}}]),vertexShader:e.ShaderChunk.shadow_vert,fragmentShader:e.ShaderChunk.shadow_frag}};exports.ShaderLib=s,s.physical={uniforms:(0,n.mergeUniforms)([s.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:e.ShaderChunk.meshphysical_vert,fragmentShader:e.ShaderChunk.meshphysical_frag};
},{"./ShaderChunk.js":"fXGd","../../math/Vector3.js":"TKlu","./UniformsLib.js":"S/ew","../../math/Color.js":"WOLJ","../../math/Matrix3.js":"ibIB","./UniformsUtils":"cR4K"}],"Z46c":[function(require,module,exports) {
"use strict";function t(t,i,s,h){this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==h?h:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector4=t,Object.assign(t.prototype,{isVector4:!0,set:function(t,i,s,h){return this.x=t,this.y=i,this.z=s,this.w=h,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this},sub:function(t,i){return void 0!==i?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var i=this.x,s=this.y,h=this.z,n=this.w,r=t.elements;return this.x=r[0]*i+r[4]*s+r[8]*h+r[12]*n,this.y=r[1]*i+r[5]*s+r[9]*h+r[13]*n,this.z=r[2]*i+r[6]*s+r[10]*h+r[14]*n,this.w=r[3]*i+r[7]*s+r[11]*h+r[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,s,h,n,r=t.elements,e=r[0],a=r[4],o=r[8],u=r[1],c=r[5],x=r[9],w=r[2],y=r[6],f=r[10];if(Math.abs(a-u)<.01&&Math.abs(o-w)<.01&&Math.abs(x-y)<.01){if(Math.abs(a+u)<.1&&Math.abs(o+w)<.1&&Math.abs(x+y)<.1&&Math.abs(e+c+f-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;var l=(e+1)/2,z=(c+1)/2,M=(f+1)/2,d=(a+u)/4,m=(o+w)/4,b=(x+y)/4;return l>z&&l>M?l<.01?(s=0,h=.707106781,n=.707106781):(h=d/(s=Math.sqrt(l)),n=m/s):z>M?z<.01?(s=.707106781,h=0,n=.707106781):(s=d/(h=Math.sqrt(z)),n=b/h):M<.01?(s=.707106781,h=.707106781,n=0):(s=m/(n=Math.sqrt(M)),h=b/n),this.set(s,h,n,i),this}var p=Math.sqrt((y-x)*(y-x)+(o-w)*(o-w)+(u-a)*(u-a));return Math.abs(p)<.001&&(p=1),this.x=(y-x)/p,this.y=(o-w)/p,this.z=(u-a)/p,this.w=Math.acos((e+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this},clampScalar:function(){var i,s;return function(h,n){return void 0===i&&(i=new t,s=new t),i.set(h,h,h,h),s.set(n,n,n,n),this.clamp(i,s)}}(),clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}});
},{}],"oNxn":[function(require,module,exports) {
"use strict";function n(){var n=null,t=!1,e=null;function o(i,u){!1!==t&&(e(i,u),n.requestAnimationFrame(o))}return{start:function(){!0!==t&&null!==e&&(n.requestAnimationFrame(o),t=!0)},stop:function(){t=!1},setAnimationLoop:function(n){e=n},setContext:function(t){n=t}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLAnimation=n;
},{}],"JDIB":[function(require,module,exports) {
"use strict";function e(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var a=t.get(r);a&&(e.deleteBuffer(a.buffer),t.delete(r))},update:function(r,a){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);void 0===n?t.set(r,function(t,r){var a=t.array,n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,f=e.createBuffer();e.bindBuffer(r,f),e.bufferData(r,a,n),t.onUploadCallback();var u=e.FLOAT;return a instanceof Float32Array?u=e.FLOAT:a instanceof Float64Array?console.warn("WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?u=e.UNSIGNED_SHORT:a instanceof Int16Array?u=e.SHORT:a instanceof Uint32Array?u=e.UNSIGNED_INT:a instanceof Int32Array?u=e.INT:a instanceof Int8Array?u=e.BYTE:a instanceof Uint8Array&&(u=e.UNSIGNED_BYTE),{buffer:f,type:u,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(r,a)):n.version<r.version&&(function(t,r,a){var n=r.array,f=r.updateRange;e.bindBuffer(a,t),!1===r.dynamic?e.bufferData(a,n,e.STATIC_DRAW):-1===f.count?e.bufferSubData(a,0,n):0===f.count?console.error("WebGLObjects.updateBuffer: dynamic BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(a,f.offset*n.BYTES_PER_ELEMENT,n.subarray(f.offset,f.offset+f.count)),f.count=-1)}(n.buffer,r,a),n.version=r.version)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLAttributes=e;
},{}],"GHOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Face3=e;var r=require("../math/Color.js"),t=require("../math/Vector3.js");function e(e,o,s,i,a,l){this.a=e,this.b=o,this.c=s,this.normal=i&&i.isVector3?i:new t.Vector3,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new r.Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==l?l:0}Object.assign(e.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var t=0,e=r.vertexNormals.length;t<e;t++)this.vertexNormals[t]=r.vertexNormals[t].clone();for(t=0,e=r.vertexColors.length;t<e;t++)this.vertexColors[t]=r.vertexColors[t].clone();return this}});
},{"../math/Color.js":"WOLJ","../math/Vector3.js":"TKlu"}],"FcNX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=v;var e=require("./EventDispatcher.js"),r=require("./Face3.js"),t=require("../math/Matrix3.js"),o=require("../math/Sphere.js"),s=require("../math/Box3.js"),i=require("../math/Vector3.js"),a=require("../math/Matrix4.js"),n=require("../math/Vector2.js"),h=require("../math/Color.js"),c=require("./Object3D.js"),l=require("../math/Math.js"),u=0;function v(){Object.defineProperty(this,"id",{value:u+=2}),this.uuid=l._Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}v.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:v,isGeometry:!0,applyMatrix:function(e){for(var r=(new t.Matrix3).getNormalMatrix(e),o=0,s=this.vertices.length;o<s;o++){this.vertices[o].applyMatrix4(e)}for(o=0,s=this.faces.length;o<s;o++){var i=this.faces[o];i.normal.applyMatrix3(r).normalize();for(var a=0,n=i.vertexNormals.length;a<n;a++)i.vertexNormals[a].applyMatrix3(r).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new a.Matrix4;return function(r){return e.makeRotationX(r),this.applyMatrix(e),this}}(),rotateY:function(){var e=new a.Matrix4;return function(r){return e.makeRotationY(r),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new a.Matrix4;return function(r){return e.makeRotationZ(r),this.applyMatrix(e),this}}(),translate:function(){var e=new a.Matrix4;return function(r,t,o){return e.makeTranslation(r,t,o),this.applyMatrix(e),this}}(),scale:function(){var e=new a.Matrix4;return function(r,t,o){return e.makeScale(r,t,o),this.applyMatrix(e),this}}(),lookAt:function(){var e=new c.Object3D;return function(r){e.lookAt(r),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,o=null!==e.index?e.index.array:void 0,s=e.attributes,a=s.position.array,c=void 0!==s.normal?s.normal.array:void 0,l=void 0!==s.color?s.color.array:void 0,u=void 0!==s.uv?s.uv.array:void 0,v=void 0!==s.uv2?s.uv2.array:void 0;void 0!==v&&(this.faceVertexUvs[1]=[]);for(var m=0,p=0;m<a.length;m+=3,p+=2)t.vertices.push((new i.Vector3).fromArray(a,m)),void 0!==l&&t.colors.push((new h.Color).fromArray(l,m));function f(e,o,s,a){var h=void 0===l?[]:[t.colors[e].clone(),t.colors[o].clone(),t.colors[s].clone()],m=void 0===c?[]:[(new i.Vector3).fromArray(c,3*e),(new i.Vector3).fromArray(c,3*o),(new i.Vector3).fromArray(c,3*s)],p=new r.Face3(e,o,s,m,h,a);t.faces.push(p),void 0!==u&&t.faceVertexUvs[0].push([(new n.Vector2).fromArray(u,2*e),(new n.Vector2).fromArray(u,2*o),(new n.Vector2).fromArray(u,2*s)]),void 0!==v&&t.faceVertexUvs[1].push([(new n.Vector2).fromArray(v,2*e),(new n.Vector2).fromArray(v,2*o),(new n.Vector2).fromArray(v,2*s)])}var d=e.groups;if(d.length>0)for(m=0;m<d.length;m++)for(var g=d[m],x=g.start,N=(p=x,x+g.count);p<N;p+=3)void 0!==o?f(o[p],o[p+1],o[p+2],g.materialIndex):f(p,p+1,p+2,g.materialIndex);else if(void 0!==o)for(m=0;m<o.length;m+=3)f(o[m],o[m+1],o[m+2]);else for(m=0;m<a.length/3;m+=3)f(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new i.Vector3;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,r=this.boundingSphere.radius,t=0===r?1:1/r,o=new a.Matrix4;return o.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var e=new i.Vector3,r=new i.Vector3,t=0,o=this.faces.length;t<o;t++){var s=this.faces[t],a=this.vertices[s.a],n=this.vertices[s.b],h=this.vertices[s.c];e.subVectors(h,n),r.subVectors(a,n),e.cross(r),e.normalize(),s.normal.copy(e)}},computeVertexNormals:function(e){var r,t,o,s,a,n;for(void 0===e&&(e=!0),n=new Array(this.vertices.length),r=0,t=this.vertices.length;r<t;r++)n[r]=new i.Vector3;if(e){var h,c,l,u=new i.Vector3,v=new i.Vector3;for(o=0,s=this.faces.length;o<s;o++)a=this.faces[o],h=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],u.subVectors(l,c),v.subVectors(h,c),u.cross(v),n[a.a].add(u),n[a.b].add(u),n[a.c].add(u)}else for(this.computeFaceNormals(),o=0,s=this.faces.length;o<s;o++)n[(a=this.faces[o]).a].add(a.normal),n[a.b].add(a.normal),n[a.c].add(a.normal);for(r=0,t=this.vertices.length;r<t;r++)n[r].normalize();for(o=0,s=this.faces.length;o<s;o++){var m=(a=this.faces[o]).vertexNormals;3===m.length?(m[0].copy(n[a.a]),m[1].copy(n[a.b]),m[2].copy(n[a.c])):(m[0]=n[a.a].clone(),m[1]=n[a.b].clone(),m[2]=n[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,r,t;for(this.computeFaceNormals(),e=0,r=this.faces.length;e<r;e++){var o=(t=this.faces[e]).vertexNormals;3===o.length?(o[0].copy(t.normal),o[1].copy(t.normal),o[2].copy(t.normal)):(o[0]=t.normal.clone(),o[1]=t.normal.clone(),o[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,r,t,o,s;for(t=0,o=this.faces.length;t<o;t++)for((s=this.faces[t]).__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]),e=0,r=s.vertexNormals.length;e<r;e++)s.__originalVertexNormals[e]?s.__originalVertexNormals[e].copy(s.vertexNormals[e]):s.__originalVertexNormals[e]=s.vertexNormals[e].clone();var a=new v;for(a.faces=this.faces,e=0,r=this.morphTargets.length;e<r;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var n=this.morphNormals[e].faceNormals,h=this.morphNormals[e].vertexNormals;for(t=0,o=this.faces.length;t<o;t++)c=new i.Vector3,l={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},n.push(c),h.push(l)}var c,l,u=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),t=0,o=this.faces.length;t<o;t++)s=this.faces[t],c=u.faceNormals[t],l=u.vertexNormals[t],c.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}for(t=0,o=this.faces.length;t<o;t++)(s=this.faces[t]).normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new s.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,o,s){if(e&&e.isGeometry){var i,a=this.vertices.length,n=this.vertices,h=e.vertices,c=this.faces,l=e.faces,u=this.faceVertexUvs[0],v=e.faceVertexUvs[0],m=this.colors,p=e.colors;void 0===s&&(s=0),void 0!==o&&(i=(new t.Matrix3).getNormalMatrix(o));for(var f=0,d=h.length;f<d;f++){var g=h[f].clone();void 0!==o&&g.applyMatrix4(o),n.push(g)}for(f=0,d=p.length;f<d;f++)m.push(p[f].clone());for(f=0,d=l.length;f<d;f++){var x,N,y,V=l[f],b=V.vertexNormals,U=V.vertexColors;(x=new r.Face3(V.a+a,V.b+a,V.c+a)).normal.copy(V.normal),void 0!==i&&x.normal.applyMatrix3(i).normalize();for(var M=0,w=b.length;M<w;M++)N=b[M].clone(),void 0!==i&&N.applyMatrix3(i).normalize(),x.vertexNormals.push(N);x.color.copy(V.color);for(M=0,w=U.length;M<w;M++)y=U[M],x.vertexColors.push(y.clone());x.materialIndex=V.materialIndex+s,c.push(x)}for(f=0,d=v.length;f<d;f++){var S=v[f],_=[];if(void 0!==S){for(M=0,w=S.length;M<w;M++)_.push(S[M].clone());u.push(_)}}}else console.error("Geometry.merge(): geometry not an instance of Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("Geometry.mergeMesh(): mesh not an instance of Mesh.",e)},mergeVertices:function(){var e,r,t,o,s,i,a,n,h={},c=[],l=[],u=Math.pow(10,4);for(t=0,o=this.vertices.length;t<o;t++)e=this.vertices[t],void 0===h[r=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u)]?(h[r]=t,c.push(this.vertices[t]),l[t]=c.length-1):l[t]=l[h[r]];var v=[];for(t=0,o=this.faces.length;t<o;t++){(s=this.faces[t]).a=l[s.a],s.b=l[s.b],s.c=l[s.c],i=[s.a,s.b,s.c];for(var m=0;m<3;m++)if(i[m]===i[(m+1)%3]){v.push(t);break}}for(t=v.length-1;t>=0;t--){var p=v[t];for(this.faces.splice(p,1),a=0,n=this.faceVertexUvs.length;a<n;a++)this.faceVertexUvs[a].splice(p,1)}var f=this.vertices.length-c.length;return this.vertices=c,f},setFromPoints:function(e){this.vertices=[];for(var r=0,t=e.length;r<t;r++){var o=e[r];this.vertices.push(new i.Vector3(o.x,o.y,o.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,r=e.length,t=0;t<r;t++)e[t]._id=t;e.sort(function(e,r){return e.materialIndex-r.materialIndex});var o,s,i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];i&&i.length===r&&(o=[]),a&&a.length===r&&(s=[]);for(t=0;t<r;t++){var n=e[t]._id;o&&o.push(i[n]),s&&s.push(a[n])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var r=this.parameters;for(var t in r)void 0!==r[t]&&(e[t]=r[t]);return e}for(var o=[],s=0;s<this.vertices.length;s++){var i=this.vertices[s];o.push(i.x,i.y,i.z)}var a=[],n=[],h={},c=[],l={},u=[],v={};for(s=0;s<this.faces.length;s++){var m=this.faces[s],p=void 0!==this.faceVertexUvs[0][s],f=m.normal.length()>0,d=m.vertexNormals.length>0,g=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=m.vertexColors.length>0,N=0;if(N=U(N,0,0),N=U(N,1,!0),N=U(N,2,!1),N=U(N,3,p),N=U(N,4,f),N=U(N,5,d),N=U(N,6,g),N=U(N,7,x),a.push(N),a.push(m.a,m.b,m.c),a.push(m.materialIndex),p){var y=this.faceVertexUvs[0][s];a.push(S(y[0]),S(y[1]),S(y[2]))}if(f&&a.push(M(m.normal)),d){var V=m.vertexNormals;a.push(M(V[0]),M(V[1]),M(V[2]))}if(g&&a.push(w(m.color)),x){var b=m.vertexColors;a.push(w(b[0]),w(b[1]),w(b[2]))}}function U(e,r,t){return t?e|1<<r:e&~(1<<r)}function M(e){var r=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==h[r]?h[r]:(h[r]=n.length/3,n.push(e.x,e.y,e.z),h[r])}function w(e){var r=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[r]?l[r]:(l[r]=c.length,c.push(e.getHex()),l[r])}function S(e){var r=e.x.toString()+e.y.toString();return void 0!==v[r]?v[r]:(v[r]=u.length/2,u.push(e.x,e.y),v[r])}return e.data={},e.data.vertices=o,e.data.normals=n,c.length>0&&(e.data.colors=c),u.length>0&&(e.data.uvs=[u]),e.data.faces=a,e},clone:function(){return(new v).copy(this)},copy:function(e){var r,t,o,s,i,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.vertices;for(r=0,t=n.length;r<t;r++)this.vertices.push(n[r].clone());var h=e.colors;for(r=0,t=h.length;r<t;r++)this.colors.push(h[r].clone());var c=e.faces;for(r=0,t=c.length;r<t;r++)this.faces.push(c[r].clone());for(r=0,t=e.faceVertexUvs.length;r<t;r++){var l=e.faceVertexUvs[r];for(void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]),o=0,s=l.length;o<s;o++){var u=l[o],v=[];for(i=0,a=u.length;i<a;i++){var m=u[i];v.push(m.clone())}this.faceVertexUvs[r].push(v)}}var p=e.morphTargets;for(r=0,t=p.length;r<t;r++){var f={};if(f.name=p[r].name,void 0!==p[r].vertices)for(f.vertices=[],o=0,s=p[r].vertices.length;o<s;o++)f.vertices.push(p[r].vertices[o].clone());if(void 0!==p[r].normals)for(f.normals=[],o=0,s=p[r].normals.length;o<s;o++)f.normals.push(p[r].normals[o].clone());this.morphTargets.push(f)}var d=e.morphNormals;for(r=0,t=d.length;r<t;r++){var g={};if(void 0!==d[r].vertexNormals)for(g.vertexNormals=[],o=0,s=d[r].vertexNormals.length;o<s;o++){var x=d[r].vertexNormals[o],N={};N.a=x.a.clone(),N.b=x.b.clone(),N.c=x.c.clone(),g.vertexNormals.push(N)}if(void 0!==d[r].faceNormals)for(g.faceNormals=[],o=0,s=d[r].faceNormals.length;o<s;o++)g.faceNormals.push(d[r].faceNormals[o].clone());this.morphNormals.push(g)}var y=e.skinWeights;for(r=0,t=y.length;r<t;r++)this.skinWeights.push(y[r].clone());var V=e.skinIndices;for(r=0,t=V.length;r<t;r++)this.skinIndices.push(V[r].clone());var b=e.lineDistances;for(r=0,t=b.length;r<t;r++)this.lineDistances.push(b[r]);var U=e.boundingBox;null!==U&&(this.boundingBox=U.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"./EventDispatcher.js":"O/Kz","./Face3.js":"GHOS","../math/Matrix3.js":"ibIB","../math/Sphere.js":"L4Ep","../math/Box3.js":"eZFm","../math/Vector3.js":"TKlu","../math/Matrix4.js":"Rio0","../math/Vector2.js":"qn61","../math/Color.js":"WOLJ","./Object3D.js":"Kems","../math/Math.js":"J7M1"}],"mpLf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Float64BufferAttribute=f,exports.Float32BufferAttribute=p,exports.Uint32BufferAttribute=h,exports.Int32BufferAttribute=y,exports.Uint16BufferAttribute=u,exports.Int16BufferAttribute=c,exports.Uint8ClampedBufferAttribute=s,exports.Uint8BufferAttribute=a,exports.Int8BufferAttribute=n,exports.BufferAttribute=o;var t=require("../math/Vector4.js"),r=require("../math/Vector3.js"),e=require("../math/Vector2.js"),i=require("../math/Color.js");function o(t,r,e){if(Array.isArray(t))throw new TypeError("BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=!0===e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function n(t,r,e){o.call(this,new Int8Array(t),r,e)}function a(t,r,e){o.call(this,new Uint8Array(t),r,e)}function s(t,r,e){o.call(this,new Uint8ClampedArray(t),r,e)}function c(t,r,e){o.call(this,new Int16Array(t),r,e)}function u(t,r,e){o.call(this,new Uint16Array(t),r,e)}function y(t,r,e){o.call(this,new Int32Array(t),r,e)}function h(t,r,e){o.call(this,new Uint32Array(t),r,e)}function p(t,r,e){o.call(this,new Float32Array(t),r,e)}function f(t,r,e){o.call(this,new Float64Array(t),r,e)}Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(o.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,r,e){t*=this.itemSize,e*=r.itemSize;for(var i=0,o=this.itemSize;i<o;i++)this.array[t+i]=r.array[e+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var r=this.array,e=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("BufferAttribute.copyColorsArray(): color is undefined",o),a=new i.Color),r[e++]=a.r,r[e++]=a.g,r[e++]=a.b}return this},copyVector2sArray:function(t){for(var r=this.array,i=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("BufferAttribute.copyVector2sArray(): vector is undefined",o),a=new e.Vector2),r[i++]=a.x,r[i++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("BufferAttribute.copyVector3sArray(): vector is undefined",o),a=new r.Vector3),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(r){for(var e=this.array,i=0,o=0,n=r.length;o<n;o++){var a=r[o];void 0===a&&(console.warn("BufferAttribute.copyVector4sArray(): vector is undefined",o),a=new t.Vector4),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,r){return this.array[t*this.itemSize]=r,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,r){return this.array[t*this.itemSize+1]=r,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,r){return this.array[t*this.itemSize+2]=r,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,r){return this.array[t*this.itemSize+3]=r,this},setXY:function(t,r,e){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this},setXYZ:function(t,r,e,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=i,this},setXYZW:function(t,r,e,i,o){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=i,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),n.prototype=Object.create(o.prototype),n.prototype.constructor=n,a.prototype=Object.create(o.prototype),a.prototype.constructor=a,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,c.prototype=Object.create(o.prototype),c.prototype.constructor=c,u.prototype=Object.create(o.prototype),u.prototype.constructor=u,y.prototype=Object.create(o.prototype),y.prototype.constructor=y,h.prototype=Object.create(o.prototype),h.prototype.constructor=h,p.prototype=Object.create(o.prototype),p.prototype.constructor=p,f.prototype=Object.create(o.prototype),f.prototype.constructor=f;
},{"../math/Vector4.js":"Z46c","../math/Vector3.js":"TKlu","../math/Vector2.js":"qn61","../math/Color.js":"WOLJ"}],"Ck8v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectGeometry=t;var e=require("../math/Vector2.js");function t(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(t.prototype,{computeGroups:function(e){for(var t,s=[],r=void 0,o=e.faces,i=0;i<o.length;i++){var a=o[i];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*i-t.start,s.push(t)),t={start:3*i,materialIndex:r})}void 0!==t&&(t.count=3*i-t.start,s.push(t)),this.groups=s},fromGeometry:function(t){var s,r=t.faces,o=t.vertices,i=t.faceVertexUvs,a=i[0]&&i[0].length>0,h=i[1]&&i[1].length>0,n=t.morphTargets,d=n.length;if(d>0){s=[];for(var p=0;p<d;p++)s[p]={name:n[p].name,data:[]};this.morphTargets.position=s}var c,l=t.morphNormals,u=l.length;if(u>0){c=[];for(p=0;p<u;p++)c[p]={name:l[p].name,data:[]};this.morphTargets.normal=c}var v=t.skinIndices,m=t.skinWeights,g=v.length===o.length,f=m.length===o.length;o.length>0&&0===r.length&&console.error("DirectGeometry: Faceless geometries are not supported.");for(p=0;p<r.length;p++){var U=r[p];this.vertices.push(o[U.a],o[U.b],o[U.c]);var N=U.vertexNormals;if(3===N.length)this.normals.push(N[0],N[1],N[2]);else{var x=U.normal;this.normals.push(x,x,x)}var b,y=U.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{var G=U.color;this.colors.push(G,G,G)}if(!0===a)void 0!==(b=i[0][p])?this.uvs.push(b[0],b[1],b[2]):(console.warn("DirectGeometry.fromGeometry(): Undefined vertexUv ",p),this.uvs.push(new e.Vector2,new e.Vector2,new e.Vector2));if(!0===h)void 0!==(b=i[1][p])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("DirectGeometry.fromGeometry(): Undefined vertexUv2 ",p),this.uvs2.push(new e.Vector2,new e.Vector2,new e.Vector2));for(var w=0;w<d;w++){var V=n[w].vertices;s[w].data.push(V[U.a],V[U.b],V[U.c])}for(w=0;w<u;w++){var k=l[w].vertexNormals[p];c[w].data.push(k.a,k.b,k.c)}g&&this.skinIndices.push(v[U.a],v[U.b],v[U.c]),f&&this.skinWeights.push(m[U.a],m[U.b],m[U.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});
},{"../math/Vector2.js":"qn61"}],"rDcC":[function(require,module,exports) {
"use strict";function r(r){if(0===r.length)return 1/0;for(var e=r[0],t=1,n=r.length;t<n;++t)r[t]<e&&(e=r[t]);return e}function e(r){if(0===r.length)return-1/0;for(var e=r[0],t=1,n=r.length;t<n;++t)r[t]>e&&(e=r[t]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMin=r,exports.arrayMax=e;
},{}],"e+4p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferGeometry=c;var t=require("../math/Vector3.js"),e=require("../math/Box3.js"),r=require("./EventDispatcher.js"),i=require("./BufferAttribute.js"),n=require("../math/Sphere.js"),o=require("./DirectGeometry.js"),a=require("./Object3D.js"),s=require("../math/Matrix4.js"),u=require("../math/Matrix3.js"),d=require("../math/Math.js"),h=require("../utils.js"),l=1;function c(){Object.defineProperty(this,"id",{value:l+=2}),this.uuid=d._Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}c.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:c,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new((0,h.arrayMax)(t)>65535?i.Uint32BufferAttribute:i.Uint16BufferAttribute)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new i.BufferAttribute(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&((new u.Matrix3).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new u.Matrix3).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new s.Matrix4;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new s.Matrix4;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new s.Matrix4;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new s.Matrix4;return function(e,r,i){return t.makeTranslation(e,r,i),this.applyMatrix(t),this}}(),scale:function(){var t=new s.Matrix4;return function(e,r,i){return t.makeScale(e,r,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new a.Object3D;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var e=new t.Vector3;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new i.Float32BufferAttribute(3*e.vertices.length,3),n=new i.Float32BufferAttribute(3*e.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var o=new i.Float32BufferAttribute(e.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r];e.push(o.x,o.y,o.z||0)}return this.addAttribute("position",new i.Float32BufferAttribute(e,3)),this},updateFromObject:function(t){var e,r=t.geometry;if(t.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(r.vertices),e.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(r.uvs),e.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(r.lineDistances),e.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new o.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new i.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.addAttribute("normal",new i.BufferAttribute(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new i.BufferAttribute(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var o=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new i.BufferAttribute(o,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new i.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}for(var s in this.groups=t.groups,t.morphTargets){for(var u=[],d=t.morphTargets[s],h=0,l=d.length;h<l;h++){var c=d[h],p=new i.Float32BufferAttribute(3*c.data.length,3);p.name=c.name,u.push(p.copyVector3sArray(c.data))}this.morphAttributes[s]=u}if(t.skinIndices.length>0){var f=new i.Float32BufferAttribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new i.Float32BufferAttribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new e.Box3);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var r=new e.Box3,i=new t.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new n.Sphere);var t=this.attributes.position;if(t){var e=this.boundingSphere.center;r.setFromBufferAttribute(t),r.getCenter(e);for(var o=0,a=0,s=t.count;a<s;a++)i.x=t.getX(a),i.y=t.getY(a),i.z=t.getZ(a),o=Math.max(o,e.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,r=this.attributes;if(r.position){var n=r.position.array;if(void 0===r.normal)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(n.length),3));else for(var o=r.normal.array,a=0,s=o.length;a<s;a++)o[a]=0;var u,d,h,l=r.normal.array,c=new t.Vector3,p=new t.Vector3,f=new t.Vector3,m=new t.Vector3,y=new t.Vector3;if(e){var g=e.array;for(a=0,s=e.count;a<s;a+=3)u=3*g[a+0],d=3*g[a+1],h=3*g[a+2],c.fromArray(n,u),p.fromArray(n,d),f.fromArray(n,h),m.subVectors(f,p),y.subVectors(c,p),m.cross(y),l[u]+=m.x,l[u+1]+=m.y,l[u+2]+=m.z,l[d]+=m.x,l[d+1]+=m.y,l[d+2]+=m.z,l[h]+=m.x,l[h+1]+=m.y,l[h+2]+=m.z}else for(a=0,s=n.length;a<s;a+=9)c.fromArray(n,a),p.fromArray(n,a+3),f.fromArray(n,a+6),m.subVectors(f,p),y.subVectors(c,p),m.cross(y),l[a]=m.x,l[a+1]=m.y,l[a+2]=m.z,l[a+3]=m.x,l[a+4]=m.y,l[a+5]=m.z,l[a+6]=m.x,l[a+7]=m.y,l[a+8]=m.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var i in r)if(void 0!==t.attributes[i])for(var n=r[i].array,o=t.attributes[i],a=o.array,s=0,u=o.itemSize*e;s<a.length;s++,u++)n[u]=a[s];return this}console.error("BufferGeometry.merge(): geometry not an instance of BufferGeometry.",t)},normalizeNormals:function(){var e=new t.Vector3;return function(){for(var t=this.attributes.normal,r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){function t(t,e){for(var r=t.array,n=t.itemSize,o=new r.constructor(e.length*n),a=0,s=0,u=0,d=e.length;u<d;u++){a=e[u]*n;for(var h=0;h<n;h++)o[s++]=r[a++]}return new i.BufferAttribute(o,n)}if(null===this.index)return console.warn("BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new c,r=this.index.array,n=this.attributes;for(var o in n){var a=t(n[o],r);e.addAttribute(o,a)}var s=this.morphAttributes;for(o in s){for(var u=[],d=s[o],h=0,l=d.length;h<l;h++){a=t(d[h],r);u.push(a)}e.morphAttributes[o]=u}for(var p=this.groups,f=(h=0,p.length);h<f;h++){var m=p[h];e.addGroup(m.start,m.count,m.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var n=this.attributes;for(var r in n){var o={itemSize:(c=n[r]).itemSize,type:c.array.constructor.name,array:Array.prototype.slice.call(c.array),normalized:c.normalized};""!==c.name&&(o.name=c.name),t.data.attributes[r]=o}var a={},s=!1;for(var r in this.morphAttributes){for(var u=this.morphAttributes[r],d=[],h=0,l=u.length;h<l;h++){var c;o={itemSize:(c=u[h]).itemSize,type:c.array.constructor.name,array:Array.prototype.slice.call(c.array),normalized:c.normalized};""!==c.name&&(o.name=c.name),d.push(o)}d.length>0&&(a[r]=d,s=!0)}s&&(t.data.morphAttributes=a);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new c).copy(this)},copy:function(t){var e,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],d=s[e];for(r=0,i=d.length;r<i;r++)u.push(d[r].clone());this.morphAttributes[e]=u}var h=t.groups;for(r=0,i=h.length;r<i;r++){var l=h[r];this.addGroup(l.start,l.count,l.materialIndex)}var c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../math/Vector3.js":"TKlu","../math/Box3.js":"eZFm","./EventDispatcher.js":"O/Kz","./BufferAttribute.js":"mpLf","../math/Sphere.js":"L4Ep","./DirectGeometry.js":"Ck8v","./Object3D.js":"Kems","../math/Matrix4.js":"Rio0","../math/Matrix3.js":"ibIB","../math/Math.js":"J7M1","../utils.js":"rDcC"}],"rvzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxGeometry=s,exports.BoxBufferGeometry=i;var e=require("../core/Geometry.js"),t=require("../core/BufferGeometry.js"),r=require("../core/BufferAttribute.js"),o=require("../math/Vector3.js");function s(t,r,o,s,h,u){e.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:o,widthSegments:s,heightSegments:h,depthSegments:u},this.fromBufferGeometry(new i(t,r,o,s,h,u)),this.mergeVertices()}function i(e,s,i,h,u,f){t.BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:s,depth:i,widthSegments:h,heightSegments:u,depthSegments:f};var p=this;e=e||1,s=s||1,i=i||1,h=Math.floor(h)||1,u=Math.floor(u)||1,f=Math.floor(f)||1;var a=[],y=[],m=[],n=[],c=0,d=0;function x(e,t,r,s,i,h,u,f,x,B,l){var G,g,b=h/x,v=u/B,w=h/2,z=u/2,j=f/2,A=x+1,S=B+1,q=0,M=0,F=new o.Vector3;for(g=0;g<S;g++){var O=g*v-z;for(G=0;G<A;G++){var V=G*b-w;F[e]=V*s,F[t]=O*i,F[r]=j,y.push(F.x,F.y,F.z),F[e]=0,F[t]=0,F[r]=f>0?1:-1,m.push(F.x,F.y,F.z),n.push(G/x),n.push(1-g/B),q+=1}}for(g=0;g<B;g++)for(G=0;G<x;G++){var _=c+G+A*g,I=c+G+A*(g+1),P=c+(G+1)+A*(g+1),k=c+(G+1)+A*g;a.push(_,I,k),a.push(I,P,k),M+=6}p.addGroup(d,M,l),d+=M,c+=q}x("z","y","x",-1,-1,i,s,e,f,u,0),x("z","y","x",1,-1,i,s,-e,f,u,1),x("x","z","y",1,1,e,i,s,h,f,2),x("x","z","y",1,-1,e,i,-s,h,f,3),x("x","y","z",1,-1,e,s,i,h,u,4),x("x","y","z",-1,-1,e,s,-i,h,u,5),this.setIndex(a),this.addAttribute("position",new r.Float32BufferAttribute(y,3)),this.addAttribute("normal",new r.Float32BufferAttribute(m,3)),this.addAttribute("uv",new r.Float32BufferAttribute(n,2))}s.prototype=Object.create(e.Geometry.prototype),s.prototype.constructor=s,i.prototype=Object.create(t.BufferGeometry.prototype),i.prototype.constructor=i;
},{"../core/Geometry.js":"FcNX","../core/BufferGeometry.js":"e+4p","../core/BufferAttribute.js":"mpLf","../math/Vector3.js":"TKlu"}],"Fpft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaneGeometry=o,exports.PlaneBufferGeometry=s;var e=require("../core/Geometry.js"),t=require("../core/BufferGeometry.js"),r=require("../core/BufferAttribute.js");function o(t,r,o,i){e.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:o,heightSegments:i},this.fromBufferGeometry(new s(t,r,o,i)),this.mergeVertices()}function s(e,o,s,i){t.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:o,widthSegments:s,heightSegments:i};var u,h,f=(e=e||1)/2,a=(o=o||1)/2,p=Math.floor(s)||1,n=Math.floor(i)||1,m=p+1,y=n+1,c=e/p,l=o/n,d=[],G=[],b=[],B=[];for(h=0;h<y;h++){var g=h*l-a;for(u=0;u<m;u++){var w=u*c-f;G.push(w,-g,0),b.push(0,0,1),B.push(u/p),B.push(1-h/n)}}for(h=0;h<n;h++)for(u=0;u<p;u++){var v=u+m*h,A=u+m*(h+1),j=u+1+m*(h+1),P=u+1+m*h;d.push(v,A,P),d.push(A,j,P)}this.setIndex(d),this.addAttribute("position",new r.Float32BufferAttribute(G,3)),this.addAttribute("normal",new r.Float32BufferAttribute(b,3)),this.addAttribute("uv",new r.Float32BufferAttribute(B,2))}o.prototype=Object.create(e.Geometry.prototype),o.prototype.constructor=o,s.prototype=Object.create(t.BufferGeometry.prototype),s.prototype.constructor=s;
},{"../core/Geometry.js":"FcNX","../core/BufferGeometry.js":"e+4p","../core/BufferAttribute.js":"mpLf"}],"FNW4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Material=a;var t=require("../core/EventDispatcher.js"),i=require("../constants.js"),s=require("../math/Math.js"),e=0;function a(){Object.defineProperty(this,"id",{value:e++}),this.uuid=s._Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=i.NormalBlending,this.side=i.FrontSide,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=i.NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}a.prototype=Object.assign(Object.create(t.EventDispatcher.prototype),{constructor:a,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var s in t){var e=t[s];if(void 0!==e)if("shading"!==s){var a=this[s];void 0!==a?a&&a.isColor?a.set(e):a&&a.isVector3&&e&&e.isVector3?a.copy(e):this[s]=e:console.warn(this.type+": '"+s+"' is not a property of this material.")}else console.warn(this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===i.FlatShading;else console.warn("Material: '"+s+"' parameter is undefined.")}},toJSON:function(t){var s=void 0===t||"string"==typeof t;s&&(t={textures:{},images:{}});var e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(t){var i=[];for(var s in t){var e=t[s];delete e.metadata,i.push(e)}return i}if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),void 0!==this.roughness&&(e.roughness=this.roughness),void 0!==this.metalness&&(e.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),void 0!==this.shininess&&(e.shininess=this.shininess),void 0!==this.clearCoat&&(e.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(e.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(t).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(t).uuid,e.reflectivity=this.reflectivity,void 0!==this.combine&&(e.combine=this.combine),void 0!==this.envMapIntensity&&(e.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(e.size=this.size),void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==i.NormalBlending&&(e.blending=this.blending),!0===this.flatShading&&(e.flatShading=this.flatShading),this.side!==i.FrontSide&&(e.side=this.side),this.vertexColors!==i.NoColors&&(e.vertexColors=this.vertexColors),this.opacity<1&&(e.opacity=this.opacity),!0===this.transparent&&(e.transparent=this.transparent),e.depthFunc=this.depthFunc,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,0!==this.rotation&&(e.rotation=this.rotation),!0===this.polygonOffset&&(e.polygonOffset=!0),0!==this.polygonOffsetFactor&&(e.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(e.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(e.linewidth=this.linewidth),void 0!==this.dashSize&&(e.dashSize=this.dashSize),void 0!==this.gapSize&&(e.gapSize=this.gapSize),void 0!==this.scale&&(e.scale=this.scale),!0===this.dithering&&(e.dithering=!0),this.alphaTest>0&&(e.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(e.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(e.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(e.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(e.morphTargets=!0),!0===this.skinning&&(e.skinning=!0),!1===this.visible&&(e.visible=!1),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),s){var h=a(t.textures),n=a(t.images);h.length>0&&(e.textures=h),n.length>0&&(e.images=n)}return e},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var i=t.clippingPlanes,s=null;if(null!==i){var e=i.length;s=new Array(e);for(var a=0;a!==e;++a)s[a]=i[a].clone()}return this.clippingPlanes=s,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/EventDispatcher.js":"O/Kz","../constants.js":"HNhV","../math/Math.js":"J7M1"}],"bsr9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n";exports.default=e;
},{}],"QKiO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n";exports.default=e;
},{}],"xLVs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderMaterial=a;var e=require("./Material.js"),t=require("../renderers/shaders/UniformsUtils"),r=s(require("../renderers/shaders/ShaderChunk/default_vertex.glsl.js")),i=s(require("../renderers/shaders/ShaderChunk/default_fragment.glsl.js"));function s(e){return e&&e.__esModule?e:{default:e}}function a(t){e.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=r.default,this.fragmentShader=i.default,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("ShaderMaterial: attributes should now be defined in BufferGeometry instead."),this.setValues(t))}a.prototype=Object.create(e.Material.prototype),a.prototype.constructor=a,a.prototype.isShaderMaterial=!0,a.prototype.copy=function(r){return e.Material.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=(0,t.cloneUniforms)(r.uniforms),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=r.extensions,this},a.prototype.toJSON=function(t){var r=e.Material.prototype.toJSON.call(this,t);for(var i in r.uniforms={},this.uniforms){var s=this.uniforms[i].value;s&&s.isTexture?r.uniforms[i]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?r.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[i]={type:"m4",value:s.toArray()}:r.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(r.extensions=a),r};
},{"./Material.js":"FNW4","../renderers/shaders/UniformsUtils":"cR4K","../renderers/shaders/ShaderChunk/default_vertex.glsl.js":"bsr9","../renderers/shaders/ShaderChunk/default_fragment.glsl.js":"QKiO"}],"mea/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ray=i;var t=require("./Vector3.js");function i(i,n){this.origin=void 0!==i?i:new t.Vector3,this.direction=void 0!==n?n:new t.Vector3}Object.assign(i.prototype,{set:function(t,i){return this.origin.copy(t),this.direction.copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(i,n){return void 0===n&&(console.warn("Ray: .at() target is now required"),n=new t.Vector3),n.copy(this.direction).multiplyScalar(i).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var i=new t.Vector3;return function(t){return this.origin.copy(this.at(t,i)),this}}(),closestPointToPoint:function(i,n){void 0===n&&(console.warn("Ray: .closestPointToPoint() target is now required"),n=new t.Vector3),n.subVectors(i,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var i=new t.Vector3;return function(t){var n=i.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(i.copy(this.direction).multiplyScalar(n).add(this.origin),i.distanceToSquared(t))}}(),distanceSqToSegment:function(){var i=new t.Vector3,n=new t.Vector3,r=new t.Vector3;return function(t,o,e,s){i.copy(t).add(o).multiplyScalar(.5),n.copy(o).sub(t).normalize(),r.copy(this.origin).sub(i);var c,a,u,h,l=.5*t.distanceTo(o),d=-this.direction.dot(n),f=r.dot(this.direction),y=-r.dot(n),m=r.lengthSq(),p=Math.abs(1-d*d);if(p>0)if(a=d*f-y,h=l*p,(c=d*y-f)>=0)if(a>=-h)if(a<=h){var g=1/p;u=(c*=g)*(c+d*(a*=g)+2*f)+a*(d*c+a+2*y)+m}else a=l,u=-(c=Math.max(0,-(d*a+f)))*c+a*(a+2*y)+m;else a=-l,u=-(c=Math.max(0,-(d*a+f)))*c+a*(a+2*y)+m;else a<=-h?u=-(c=Math.max(0,-(-d*l+f)))*c+(a=c>0?-l:Math.min(Math.max(-l,-y),l))*(a+2*y)+m:a<=h?(c=0,u=(a=Math.min(Math.max(-l,-y),l))*(a+2*y)+m):u=-(c=Math.max(0,-(d*l+f)))*c+(a=c>0?l:Math.min(Math.max(-l,-y),l))*(a+2*y)+m;else a=d>0?-l:l,u=-(c=Math.max(0,-(d*a+f)))*c+a*(a+2*y)+m;return e&&e.copy(this.direction).multiplyScalar(c).add(this.origin),s&&s.copy(n).multiplyScalar(a).add(i),u}}(),intersectSphere:function(){var i=new t.Vector3;return function(t,n){i.subVectors(t.center,this.origin);var r=i.dot(this.direction),o=i.dot(i)-r*r,e=t.radius*t.radius;if(o>e)return null;var s=Math.sqrt(e-o),c=r-s,a=r+s;return c<0&&a<0?null:c<0?this.at(a,n):this.at(c,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var i=t.normal.dot(this.direction);if(0===i)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/i;return n>=0?n:null},intersectPlane:function(t,i){var n=this.distanceToPlane(t);return null===n?null:this.at(n,i)},intersectsPlane:function(t){var i=t.distanceToPoint(this.origin);return 0===i||t.normal.dot(this.direction)*i<0},intersectBox:function(t,i){var n,r,o,e,s,c,a=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,l=this.origin;return a>=0?(n=(t.min.x-l.x)*a,r=(t.max.x-l.x)*a):(n=(t.max.x-l.x)*a,r=(t.min.x-l.x)*a),u>=0?(o=(t.min.y-l.y)*u,e=(t.max.y-l.y)*u):(o=(t.max.y-l.y)*u,e=(t.min.y-l.y)*u),n>e||o>r?null:((o>n||n!=n)&&(n=o),(e<r||r!=r)&&(r=e),h>=0?(s=(t.min.z-l.z)*h,c=(t.max.z-l.z)*h):(s=(t.max.z-l.z)*h,c=(t.min.z-l.z)*h),n>c||s>r?null:((s>n||n!=n)&&(n=s),(c<r||r!=r)&&(r=c),r<0?null:this.at(n>=0?n:r,i)))},intersectsBox:function(){var i=new t.Vector3;return function(t){return null!==this.intersectBox(t,i)}}(),intersectTriangle:function(){var i=new t.Vector3,n=new t.Vector3,r=new t.Vector3,o=new t.Vector3;return function(t,e,s,c,a){n.subVectors(e,t),r.subVectors(s,t),o.crossVectors(n,r);var u,h=this.direction.dot(o);if(h>0){if(c)return null;u=1}else{if(!(h<0))return null;u=-1,h=-h}i.subVectors(this.origin,t);var l=u*this.direction.dot(r.crossVectors(i,r));if(l<0)return null;var d=u*this.direction.dot(n.cross(i));if(d<0)return null;if(l+d>h)return null;var f=-u*i.dot(o);return f<0?null:this.at(f/h,a)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});
},{"./Vector3.js":"TKlu"}],"fa8h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Triangle=e;var t=require("./Vector3.js");function e(e,r,o){this.a=void 0!==e?e:new t.Vector3,this.b=void 0!==r?r:new t.Vector3,this.c=void 0!==o?o:new t.Vector3}Object.assign(e,{getNormal:function(){var e=new t.Vector3;return function(r,o,n,c){void 0===c&&(console.warn("Triangle: .getNormal() target is now required"),c=new t.Vector3),c.subVectors(n,o),e.subVectors(r,o),c.cross(e);var i=c.lengthSq();return i>0?c.multiplyScalar(1/Math.sqrt(i)):c.set(0,0,0)}}(),getBarycoord:function(){var e=new t.Vector3,r=new t.Vector3,o=new t.Vector3;return function(n,c,i,s,a){e.subVectors(s,c),r.subVectors(i,c),o.subVectors(n,c);var u=e.dot(e),d=e.dot(r),h=e.dot(o),V=r.dot(r),l=r.dot(o),g=u*V-d*d;if(void 0===a&&(console.warn("Triangle: .getBarycoord() target is now required"),a=new t.Vector3),0===g)return a.set(-2,-1,-1);var f=1/g,w=(V*h-d*l)*f,b=(u*l-d*h)*f;return a.set(1-w-b,b,w)}}(),containsPoint:function(){var r=new t.Vector3;return function(t,o,n,c){return e.getBarycoord(t,o,n,c,r),r.x>=0&&r.y>=0&&r.x+r.y<=1}}(),getUV:function(){var e=new t.Vector3;return function(t,r,o,n,c,i,s,a){return this.getBarycoord(t,r,o,n,e),a.set(0,0),a.addScaledVector(c,e.x),a.addScaledVector(i,e.y),a.addScaledVector(s,e.z),a}}()}),Object.assign(e.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,o){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[o]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var e=new t.Vector3,r=new t.Vector3;return function(){return e.subVectors(this.c,this.b),r.subVectors(this.a,this.b),.5*e.cross(r).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("Triangle: .getMidpoint() target is now required"),e=new t.Vector3),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return e.getNormal(this.a,this.b,this.c,t)},getPlane:function(e){return void 0===e&&(console.warn("Triangle: .getPlane() target is now required"),e=new t.Vector3),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,r){return e.getBarycoord(t,this.a,this.b,this.c,r)},containsPoint:function(t){return e.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,r,o,n,c){return e.getUV(t,this.a,this.b,this.c,r,o,n,c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var e=new t.Vector3,r=new t.Vector3,o=new t.Vector3,n=new t.Vector3,c=new t.Vector3,i=new t.Vector3;return function(s,a){void 0===a&&(console.warn("Triangle: .closestPointToPoint() target is now required"),a=new t.Vector3);var u,d,h=this.a,V=this.b,l=this.c;e.subVectors(V,h),r.subVectors(l,h),n.subVectors(s,h);var g=e.dot(n),f=r.dot(n);if(g<=0&&f<=0)return a.copy(h);c.subVectors(s,V);var w=e.dot(c),b=r.dot(c);if(w>=0&&b<=w)return a.copy(V);var y=g*b-w*f;if(y<=0&&g>=0&&w<=0)return u=g/(g-w),a.copy(h).addScaledVector(e,u);i.subVectors(s,l);var p=e.dot(i),v=r.dot(i);if(v>=0&&p<=v)return a.copy(l);var q=p*f-g*v;if(q<=0&&f>=0&&v<=0)return d=f/(f-v),a.copy(h).addScaledVector(r,d);var P=w*v-p*b;if(P<=0&&b-w>=0&&p-v>=0)return o.subVectors(l,V),d=(b-w)/(b-w+(p-v)),a.copy(V).addScaledVector(o,d);var S=1/(P+q+y);return u=q*S,d=y*S,a.copy(h).addScaledVector(e,u).addScaledVector(r,d)}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});
},{"./Vector3.js":"TKlu"}],"5pcm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshBasicMaterial=a;var i=require("./Material.js"),t=require("../constants.js"),e=require("../math/Color.js");function a(a){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new e.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}a.prototype=Object.create(i.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshBasicMaterial=!0,a.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};
},{"./Material.js":"FNW4","../constants.js":"HNhV","../math/Color.js":"WOLJ"}],"QChY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mesh=f;var e=require("../math/Vector3.js"),r=require("../math/Vector2.js"),t=require("../math/Sphere.js"),a=require("../math/Ray.js"),o=require("../math/Matrix4.js"),i=require("../core/Object3D.js"),n=require("../math/Triangle.js"),s=require("../core/Face3.js"),c=require("../constants.js"),u=require("../materials/MeshBasicMaterial.js"),h=require("../core/BufferGeometry.js");function f(e,r){i.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new h.BufferGeometry,this.material=void 0!==r?r:new u.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=c.TrianglesDrawMode,this.updateMorphTargets()}f.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:f,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return i.Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,r,t,a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,i=Object.keys(o);if(i.length>0){var n=o[i[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=n.length;e<r;e++)t=n[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}else{var s=a.morphTargets;void 0!==s&&s.length>0&&console.error("Mesh.updateMorphTargets() no longer supports Geometry. Use BufferGeometry instead.")}},raycast:function(){var i=new o.Matrix4,u=new a.Ray,h=new t.Sphere,f=new e.Vector3,l=new e.Vector3,d=new e.Vector3,m=new e.Vector3,p=new e.Vector3,g=new e.Vector3,y=new r.Vector2,v=new r.Vector2,M=new r.Vector2,x=new e.Vector3,b=new e.Vector3;function w(e,r,t,a,o,i,n,s){if(null===(r.side===c.BackSide?a.intersectTriangle(n,i,o,!0,s):a.intersectTriangle(o,i,n,r.side!==c.DoubleSide,s)))return null;b.copy(s),b.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(b);return u<t.near||u>t.far?null:{distance:u,point:b.clone(),object:e}}function T(e,t,a,o,i,c,u,h,m){f.fromBufferAttribute(i,u),l.fromBufferAttribute(i,h),d.fromBufferAttribute(i,m);var p=w(e,t,a,o,f,l,d,x);if(p){c&&(y.fromBufferAttribute(c,u),v.fromBufferAttribute(c,h),M.fromBufferAttribute(c,m),p.uv=n.Triangle.getUV(x,f,l,d,y,v,M,new r.Vector2));var g=new s.Face3(u,h,m);n.Triangle.getNormal(f,l,d,g.normal),p.face=g}return p}return function(e,t){var a,o=this.geometry,s=this.material,c=this.matrixWorld;if(void 0!==s&&(null===o.boundingSphere&&o.computeBoundingSphere(),h.copy(o.boundingSphere),h.applyMatrix4(c),!1!==e.ray.intersectsSphere(h)&&(i.getInverse(c),u.copy(e.ray).applyMatrix4(i),null===o.boundingBox||!1!==u.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var b,V,j,I,B,A,D,S,q,O=o.index,G=o.attributes.position,X=o.attributes.uv,U=o.groups,R=o.drawRange;if(null!==O)if(Array.isArray(s))for(I=0,A=U.length;I<A;I++)for(q=s[(S=U[I]).materialIndex],B=Math.max(S.start,R.start),D=Math.min(S.start+S.count,R.start+R.count);B<D;B+=3)b=O.getX(B),V=O.getX(B+1),j=O.getX(B+2),(a=T(this,q,e,u,G,X,b,V,j))&&(a.faceIndex=Math.floor(B/3),a.face.materialIndex=S.materialIndex,t.push(a));else for(I=Math.max(0,R.start),A=Math.min(O.count,R.start+R.count);I<A;I+=3)b=O.getX(I),V=O.getX(I+1),j=O.getX(I+2),(a=T(this,s,e,u,G,X,b,V,j))&&(a.faceIndex=Math.floor(I/3),t.push(a));else if(void 0!==G)if(Array.isArray(s))for(I=0,A=U.length;I<A;I++)for(q=s[(S=U[I]).materialIndex],B=Math.max(S.start,R.start),D=Math.min(S.start+S.count,R.start+R.count);B<D;B+=3)(a=T(this,q,e,u,G,X,b=B,V=B+1,j=B+2))&&(a.faceIndex=Math.floor(B/3),a.face.materialIndex=S.materialIndex,t.push(a));else for(I=Math.max(0,R.start),A=Math.min(G.count,R.start+R.count);I<A;I+=3)(a=T(this,s,e,u,G,X,b=I,V=I+1,j=I+2))&&(a.faceIndex=Math.floor(I/3),t.push(a))}else if(o.isGeometry){var k,F,W,_,N=Array.isArray(s),P=o.vertices,z=o.faces,C=o.faceVertexUvs[0];C.length>0&&(_=C);for(var E=0,H=z.length;E<H;E++){var J=z[E],K=N?s[J.materialIndex]:s;if(void 0!==K){if(k=P[J.a],F=P[J.b],W=P[J.c],!0===K.morphTargets){var L=o.morphTargets,Q=this.morphTargetInfluences;f.set(0,0,0),l.set(0,0,0),d.set(0,0,0);for(var Y=0,Z=L.length;Y<Z;Y++){var $=Q[Y];if(0!==$){var ee=L[Y].vertices;f.addScaledVector(m.subVectors(ee[J.a],k),$),l.addScaledVector(p.subVectors(ee[J.b],F),$),d.addScaledVector(g.subVectors(ee[J.c],W),$)}}f.add(k),l.add(F),d.add(W),k=f,F=l,W=d}if(a=w(this,K,e,u,k,F,W,x)){if(_&&_[E]){var re=_[E];y.copy(re[0]),v.copy(re[1]),M.copy(re[2]),a.uv=n.Triangle.getUV(x,k,F,W,y,v,M,new r.Vector2)}a.face=J,a.faceIndex=E,t.push(a)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});
},{"../math/Vector3.js":"TKlu","../math/Vector2.js":"qn61","../math/Sphere.js":"L4Ep","../math/Ray.js":"mea/","../math/Matrix4.js":"Rio0","../core/Object3D.js":"Kems","../math/Triangle.js":"fa8h","../core/Face3.js":"GHOS","../constants.js":"HNhV","../materials/MeshBasicMaterial.js":"5pcm","../core/BufferGeometry.js":"e+4p"}],"bNFb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLBackground=s;var e=require("../../constants.js"),r=require("../../geometries/BoxGeometry.js"),t=require("../../geometries/PlaneGeometry.js"),a=require("../../materials/ShaderMaterial.js"),i=require("../../math/Color.js"),o=require("../../objects/Mesh.js"),n=require("../shaders/ShaderLib.js"),u=require("../shaders/UniformsUtils");function s(s,l,d,m){var f,h,b=new i.Color(0),c=0,g=null,v=0;function p(e,r){l.buffers.color.setClear(e.r,e.g,e.b,r,m)}return{getClearColor:function(){return b},setClearColor:function(e,r){b.set(e),p(b,c=void 0!==r?r:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(b,c=e)},render:function(i,l,m,C){var S=l.background;if(null===S?(p(b,c),g=null,v=0):S&&S.isColor&&(p(S,1),C=!0,g=null,v=0),(s.autoClear||C)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),S&&(S.isCubeTexture||S.isWebGLRenderTargetCube)){void 0===h&&((h=new o.Mesh(new r.BoxBufferGeometry(1,1,1),new a.ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:(0,u.cloneUniforms)(n.ShaderLib.cube.uniforms),vertexShader:n.ShaderLib.cube.vertexShader,fragmentShader:n.ShaderLib.cube.fragmentShader,side:e.BackSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),h.geometry.removeAttribute("uv"),h.onBeforeRender=function(e,r,t){this.matrixWorld.copyPosition(t.matrixWorld)},Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.tCube.value}}),d.update(h));var x=S.isWebGLRenderTargetCube?S.texture:S;h.material.uniforms.tCube.value=x,h.material.uniforms.tFlip.value=S.isWebGLRenderTargetCube?1:-1,g===S&&v===x.version||(h.material.needsUpdate=!0,g=S,v=x.version),i.unshift(h,h.geometry,h.material,0,0,null)}else S&&S.isTexture&&(void 0===f&&((f=new o.Mesh(new t.PlaneBufferGeometry(2,2),new a.ShaderMaterial({type:"BackgroundMaterial",uniforms:(0,u.cloneUniforms)(n.ShaderLib.background.uniforms),vertexShader:n.ShaderLib.background.vertexShader,fragmentShader:n.ShaderLib.background.fragmentShader,side:e.FrontSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(f)),f.material.uniforms.t2D.value=S,!0===S.matrixAutoUpdate&&S.updateMatrix(),f.material.uniforms.uvTransform.value.copy(S.matrix),g===S&&v===S.version||(f.material.needsUpdate=!0,g=S,v=S.version),i.unshift(f,f.geometry,f.material,0,0,null))}}}
},{"../../constants.js":"HNhV","../../geometries/BoxGeometry.js":"rvzS","../../geometries/PlaneGeometry.js":"Fpft","../../materials/ShaderMaterial.js":"xLVs","../../math/Color.js":"WOLJ","../../objects/Mesh.js":"QChY","../shaders/ShaderLib.js":"HCi4","../shaders/UniformsUtils":"cR4K"}],"y28I":[function(require,module,exports) {
"use strict";function e(e,r,n,t){var s;this.setMode=function(e){s=e},this.render=function(r,t){e.drawArrays(s,r,t),n.update(t,s)},this.renderInstances=function(a,d,o){var u;if(t.isWebGL2)u=e;else if(null===(u=r.get("ANGLE_instanced_arrays")))return void console.error("WebGLBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[t.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](s,d,o,a.maxInstancedCount),n.update(o,s,a.maxInstancedCount)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLBufferRenderer=e;
},{}],"lW1H":[function(require,module,exports) {
"use strict";function e(e,r,t){var i;function a(r){if("highp"===r){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";r="mediump"}return"mediump"===r&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var n="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==t.precision?t.precision:"highp",_=a(o);_!==o&&(console.warn("WebGLRenderer:",o,"not supported, using",_,"instead."),o=_);var E=!0===t.logarithmicDepthBuffer,T=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),m=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),s=e.getParameter(e.MAX_TEXTURE_SIZE),A=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),u=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),R=e.getParameter(e.MAX_VARYING_VECTORS),p=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=m>0,M=n||!!r.get("OES_texture_float");return{isWebGL2:n,getMaxAnisotropy:function(){if(void 0!==i)return i;var t=r.get("EXT_texture_filter_anisotropic");return i=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:E,maxTextures:T,maxVertexTextures:m,maxTextureSize:s,maxCubemapSize:A,maxAttributes:u,maxVertexUniforms:g,maxVaryings:R,maxFragmentUniforms:p,vertexTextures:x,floatFragmentTextures:M,floatVertexTextures:x&&M,maxSamples:n?e.getParameter(e.MAX_SAMPLES):0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLCapabilities=e;
},{}],"2oX8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLClipping=t;var n=require("../../math/Matrix3.js"),e=require("../../math/Plane.js");function t(){var t=this,l=null,a=0,i=!1,r=!1,u=new e.Plane,s=new n.Matrix3,o={value:null,needsUpdate:!1};function h(){o.value!==l&&(o.value=l,o.needsUpdate=a>0),t.numPlanes=a,t.numIntersection=0}function c(n,e,l,a){var i=null!==n?n.length:0,r=null;if(0!==i){if(r=o.value,!0!==a||null===r){var h=l+4*i,c=e.matrixWorldInverse;s.getNormalMatrix(c),(null===r||r.length<h)&&(r=new Float32Array(h));for(var v=0,p=l;v!==i;++v,p+=4)u.copy(n[v]).applyMatrix4(c,s),u.normal.toArray(r,p),r[p+3]=u.constant}o.value=r,o.needsUpdate=!0}return t.numPlanes=i,r}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(n,e,t){var r=0!==n.length||e||0!==a||i;return i=e,l=c(n,t,0),a=n.length,r},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,h()},this.setState=function(n,e,t,u,s,v){if(!i||null===n||0===n.length||r&&!t)r?c(null):h();else{var p=r?0:a,f=4*p,m=s.clippingState||null;o.value=m,m=c(n,u,f,v);for(var d=0;d!==f;++d)m[d]=l[d];s.clippingState=m,this.numIntersection=e?this.numPlanes:0,this.numPlanes+=p}}}
},{"../../math/Matrix3.js":"ibIB","../../math/Plane.js":"bEDN"}],"WGJ9":[function(require,module,exports) {
"use strict";function e(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var _;switch(r){case"WEBGL_depth_texture":_=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":_=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":_=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":_=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:_=e.getExtension(r)}return null===_&&console.warn("WebGLRenderer: "+r+" extension not supported."),t[r]=_,_}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLExtensions=e;
},{}],"qepd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLGeometries=i;var e=require("../../core/BufferAttribute.js"),r=require("../../core/BufferGeometry.js"),t=require("../../utils.js");function i(i,u,o){var n={},a={};function f(e){var r=e.target,t=n[r.id];for(var i in null!==t.index&&u.remove(t.index),t.attributes)u.remove(t.attributes[i]);r.removeEventListener("dispose",f),delete n[r.id];var s=a[t.id];s&&(u.remove(s),delete a[t.id]),o.memory.geometries--}return{get:function(e,t){var i=n[t.id];return i||(t.addEventListener("dispose",f),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new r.BufferGeometry).setFromObject(e)),i=t._bufferGeometry),n[t.id]=i,o.memory.geometries++,i)},update:function(e){var r=e.index,t=e.attributes;for(var o in null!==r&&u.update(r,i.ELEMENT_ARRAY_BUFFER),t)u.update(t[o],i.ARRAY_BUFFER);var n=e.morphAttributes;for(var o in n)for(var a=n[o],f=0,s=a.length;f<s;f++)u.update(a[f],i.ARRAY_BUFFER)},getWireframeAttribute:function(r){var o=a[r.id];if(o)return o;var n,f=[],s=r.index,d=r.attributes;if(null!==s)for(var v=0,m=(n=s.array).length;v<m;v+=3){var b=n[v+0],l=n[v+1],p=n[v+2];f.push(b,l,l,p,p,b)}else for(v=0,m=(n=d.position.array).length/3-1;v<m;v+=3)b=v+0,l=v+1,p=v+2,f.push(b,l,l,p,p,b);return o=new((0,t.arrayMax)(f)>65535?e.Uint32BufferAttribute:e.Uint16BufferAttribute)(f,1),u.update(o,i.ELEMENT_ARRAY_BUFFER),a[r.id]=o,o}}}
},{"../../core/BufferAttribute.js":"mpLf","../../core/BufferGeometry.js":"e+4p","../../utils.js":"rDcC"}],"FX0g":[function(require,module,exports) {
"use strict";function e(e,n,t,r){var s,d,a;this.setMode=function(e){s=e},this.setIndex=function(e){d=e.type,a=e.bytesPerElement},this.render=function(n,r){e.drawElements(s,r,d,n*a),t.update(r,s)},this.renderInstances=function(o,i,u){var c;if(r.isWebGL2)c=e;else if(null===(c=n.get("ANGLE_instanced_arrays")))return void console.error("WebGLIndexedBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](s,u,d,i*a,o.maxInstancedCount),t.update(u,s,o.maxInstancedCount)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLIndexedBufferRenderer=e;
},{}],"FN4p":[function(require,module,exports) {
"use strict";function e(e){var s={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:s,programs:null,autoReset:!0,reset:function(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0},update:function(r,a,n){switch(n=n||1,s.calls++,a){case e.TRIANGLES:s.triangles+=n*(r/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:s.triangles+=n*(r-2);break;case e.LINES:s.lines+=n*(r/2);break;case e.LINE_STRIP:s.lines+=n*(r-1);break;case e.LINE_LOOP:s.lines+=n*r;break;case e.POINTS:s.points+=n*r;break;default:console.error("WebGLInfo: Unknown draw mode:",a)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLInfo=e;
},{}],"5ZjW":[function(require,module,exports) {
"use strict";function r(r,t){return Math.abs(t[1])-Math.abs(r[1])}function t(t){var e={},o=new Float32Array(8);return{update:function(a,i,n,u){var s=a.morphTargetInfluences,m=s.length,p=e[i.id];if(void 0===p){p=[];for(var f=0;f<m;f++)p[f]=[f,0];e[i.id]=p}var h=n.morphTargets&&i.morphAttributes.position,l=n.morphNormals&&i.morphAttributes.normal;for(f=0;f<m;f++)0!==(b=p[f])[1]&&(h&&i.removeAttribute("morphTarget"+f),l&&i.removeAttribute("morphNormal"+f));for(f=0;f<m;f++)(b=p[f])[0]=f,b[1]=s[f];for(p.sort(r),f=0;f<8;f++){var b;if(b=p[f]){var d=b[0],v=b[1];if(v){h&&i.addAttribute("morphTarget"+f,h[d]),l&&i.addAttribute("morphNormal"+f,l[d]),o[f]=v;continue}}o[f]=0}u.getUniforms().setValue(t,"morphTargetInfluences",o)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLMorphtargets=t;
},{}],"gbzW":[function(require,module,exports) {
"use strict";function e(e,t){var r={};return{update:function(o){var u=t.render.frame,n=o.geometry,d=e.get(o,n);return r[d.id]!==u&&(n.isGeometry&&d.updateFromObject(o),e.update(d),r[d.id]=u),d},dispose:function(){r={}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLObjects=e;
},{}],"bJzj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CubeTexture=r;var e=require("./Texture.js"),t=require("../constants.js");function r(r,o,i,u,p,s,n,c,a,f){r=void 0!==r?r:[],o=void 0!==o?o:t.CubeReflectionMapping,n=void 0!==n?n:t.RGBFormat,e.Texture.call(this,r,o,i,u,p,s,n,c,a,f),this.flipY=!1}r.prototype=Object.create(e.Texture.prototype),r.prototype.constructor=r,r.prototype.isCubeTexture=!0,Object.defineProperty(r.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});
},{"./Texture.js":"05Bz","../constants.js":"HNhV"}],"W1tC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTexture3D=r;var e=require("./Texture.js"),t=require("../constants.js");function r(r,i,s,a){e.Texture.call(this,null),this.image={data:r,width:i,height:s,depth:a},this.magFilter=t.NearestFilter,this.minFilter=t.NearestFilter,this.wrapR=t.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1}r.prototype=Object.create(e.Texture.prototype),r.prototype.constructor=r,r.prototype.isDataTexture3D=!0;
},{"./Texture.js":"05Bz","../constants.js":"HNhV"}],"JHYB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLUniforms=K;var e=require("../../textures/CubeTexture.js"),t=require("../../textures/Texture.js"),r=require("../../textures/DataTexture3D.js"),i=new t.Texture,a=new r.DataTexture3D,n=new e.CubeTexture;function s(){this.seq=[],this.map={}}var u=[],c=[],h=new Float32Array(16),f=new Float32Array(9),o=new Float32Array(4);function d(e,t,r){var i=e[0];if(i<=0||i>0)return e;var a=t*r,n=u[a];if(void 0===n&&(n=new Float32Array(a),u[a]=n),0!==t){i.toArray(n,0);for(var s=1,c=0;s!==t;++s)c+=r,e[s].toArray(n,c)}return n}function v(e,t){if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function l(e,t){for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}function m(e,t){var r=c[t];void 0===r&&(r=new Int32Array(t),c[t]=r);for(var i=0;i!==t;++i)r[i]=e.allocTextureUnit();return r}function x(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function p(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function y(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(v(r,t))return;e.uniform2fv(this.addr,t),l(r,t)}}function g(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(v(r,t))return;e.uniform3fv(this.addr,t),l(r,t)}}function w(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(v(r,t))return;e.uniform4fv(this.addr,t),l(r,t)}}function T(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(v(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),l(r,t)}else{if(v(r,i))return;o.set(i),e.uniformMatrix2fv(this.addr,!1,o),l(r,i)}}function z(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(v(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),l(r,t)}else{if(v(r,i))return;f.set(i),e.uniformMatrix3fv(this.addr,!1,f),l(r,i)}}function C(e,t){var r=this.cache,i=t.elements;if(void 0===i){if(v(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),l(r,t)}else{if(v(r,i))return;h.set(i),e.uniformMatrix4fv(this.addr,!1,h),l(r,i)}}function A(e,t,r){var a=this.cache,n=r.allocTextureUnit();a[0]!==n&&(e.uniform1i(this.addr,n),a[0]=n),r.setTexture2D(t||i,n)}function M(e,t,r){var i=this.cache,n=r.allocTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||a,n)}function b(e,t,r){var i=this.cache,a=r.allocTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),r.setTextureCube(t||n,a)}function V(e,t){var r=this.cache;v(r,t)||(e.uniform2iv(this.addr,t),l(r,t))}function U(e,t){var r=this.cache;v(r,t)||(e.uniform3iv(this.addr,t),l(r,t))}function q(e,t){var r=this.cache;v(r,t)||(e.uniform4iv(this.addr,t),l(r,t))}function D(e){switch(e){case 5126:return x;case 35664:return y;case 35665:return g;case 35666:return w;case 35674:return T;case 35675:return z;case 35676:return C;case 35678:case 36198:return A;case 35679:return M;case 35680:return b;case 5124:case 35670:return p;case 35667:case 35671:return V;case 35668:case 35672:return U;case 35669:case 35673:return q}}function F(e,t){var r=this.cache;v(r,t)||(e.uniform1fv(this.addr,t),l(r,t))}function I(e,t){var r=this.cache;v(r,t)||(e.uniform1iv(this.addr,t),l(r,t))}function j(e,t){var r=this.cache,i=d(t,this.size,2);v(r,i)||(e.uniform2fv(this.addr,i),this.updateCache(i))}function _(e,t){var r=this.cache,i=d(t,this.size,3);v(r,i)||(e.uniform3fv(this.addr,i),this.updateCache(i))}function O(e,t){var r=this.cache,i=d(t,this.size,4);v(r,i)||(e.uniform4fv(this.addr,i),this.updateCache(i))}function P(e,t){var r=this.cache,i=d(t,this.size,4);v(r,i)||(e.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function L(e,t){var r=this.cache,i=d(t,this.size,9);v(r,i)||(e.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function W(e,t){var r=this.cache,i=d(t,this.size,16);v(r,i)||(e.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function k(e,t,r){var a=this.cache,n=t.length,s=m(r,n);!1===v(a,s)&&(e.uniform1iv(this.addr,s),l(a,s));for(var u=0;u!==n;++u)r.setTexture2D(t[u]||i,s[u])}function E(e,t,r){var i=this.cache,a=t.length,s=m(r,a);!1===v(i,s)&&(e.uniform1iv(this.addr,s),l(i,s));for(var u=0;u!==a;++u)r.setTextureCube(t[u]||n,s[u])}function G(e){switch(e){case 5126:return F;case 35664:return j;case 35665:return _;case 35666:return O;case 35674:return P;case 35675:return L;case 35676:return W;case 35678:return k;case 35680:return E;case 5124:case 35670:return I;case 35667:case 35671:return V;case 35668:case 35672:return U;case 35669:case 35673:return q}}function N(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=D(t.type)}function R(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=G(t.type)}function S(e){this.id=e,s.call(this)}R.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),l(t,e)},S.prototype.setValue=function(e,t,r){for(var i=this.seq,a=0,n=i.length;a!==n;++a){var s=i[a];s.setValue(e,t[s.id],r)}};var B=/([\w\d_]+)(\])?(\[|\.)?/g;function H(e,t){e.seq.push(t),e.map[t.id]=t}function J(e,t,r){var i=e.name,a=i.length;for(B.lastIndex=0;;){var n=B.exec(i),s=B.lastIndex,u=n[1],c="]"===n[2],h=n[3];if(c&&(u|=0),void 0===h||"["===h&&s+2===a){H(r,void 0===h?new N(u,e,t):new R(u,e,t));break}var f=r.map[u];void 0===f&&H(r,f=new S(u)),r=f}}function K(e,t,r){s.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<i;++a){var n=e.getActiveUniform(t,a);J(n,e.getUniformLocation(t,n.name),this)}}K.prototype.setValue=function(e,t,r){var i=this.map[t];void 0!==i&&i.setValue(e,r,this.renderer)},K.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i)},K.upload=function(e,t,r,i){for(var a=0,n=t.length;a!==n;++a){var s=t[a],u=r[s.id];!1!==u.needsUpdate&&s.setValue(e,u.value,i)}},K.seqWithValue=function(e,t){for(var r=[],i=0,a=e.length;i!==a;++i){var n=e[i];n.id in t&&r.push(n)}return r};
},{"../../textures/CubeTexture.js":"bJzj","../../textures/Texture.js":"05Bz","../../textures/DataTexture3D.js":"W1tC"}],"DnkG":[function(require,module,exports) {
"use strict";function e(e){for(var r=e.split("\n"),o=0;o<r.length;o++)r[o]=o+1+": "+r[o];return r.join("\n")}function r(r,o,t){var a=r.createShader(o);return r.shaderSource(a,t),r.compileShader(a),!1===r.getShaderParameter(a,r.COMPILE_STATUS)&&console.error("WebGLShader: Shader couldn't compile."),""!==r.getShaderInfoLog(a)&&console.warn("WebGLShader: gl.getShaderInfoLog()",o===r.VERTEX_SHADER?"vertex":"fragment",r.getShaderInfoLog(a),e(t)),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLShader=r;
},{}],"6FU0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLProgram=l;var e=require("./WebGLUniforms.js"),n=require("./WebGLShader.js"),r=require("../shaders/ShaderChunk.js"),t=require("../../constants.js"),i=0;function a(e){switch(e){case t.LinearEncoding:return["Linear","( value )"];case t.sRGBEncoding:return["sRGB","( value )"];case t.RGBEEncoding:return["RGBE","( value )"];case t.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case t.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case t.RGBDEncoding:return["RGBD","( value, 256.0 )"];case t.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function o(e,n){var r=a(n);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function d(e,n){var r=a(n);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function p(e,n){var r;switch(n){case t.LinearToneMapping:r="Linear";break;case t.ReinhardToneMapping:r="Reinhard";break;case t.Uncharted2ToneMapping:r="Uncharted2";break;case t.CineonToneMapping:r="OptimizedCineon";break;case t.ACESFilmicToneMapping:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+n)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function E(e,n,r){return[(e=e||{}).derivatives||n.envMapCubeUV||n.bumpMap||n.normalMap&&!n.objectSpaceNormalMap||n.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||n.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||n.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(u).join("\n")}function f(e){var n=[];for(var r in e){var t=e[r];!1!==t&&n.push("#define "+r+" "+t)}return n.join("\n")}function s(e,n){for(var r={},t=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),i=0;i<t;i++){var a=e.getActiveAttrib(n,i).name;r[a]=e.getAttribLocation(n,a)}return r}function u(e){return""!==e}function c(e,n){return e.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights)}function g(e,n){return e.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}function M(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,n){var t=r.ShaderChunk[n];if(void 0===t)throw new Error("Can not resolve #include <"+n+">");return M(t)})}function _(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,n,r,t){for(var i="",a=parseInt(n);a<parseInt(r);a++)i+=t.replace(/\[ i \]/g,"[ "+a+" ]");return i})}function l(a,l,m,S,T,A,h){var P=a.context,L=S.defines,v=T.vertexShader,U=T.fragmentShader,b="SHADOWMAP_TYPE_BASIC";A.shadowMapType===t.PCFShadowMap?b="SHADOWMAP_TYPE_PCF":A.shadowMapType===t.PCFSoftShadowMap&&(b="SHADOWMAP_TYPE_PCF_SOFT");var N="ENVMAP_TYPE_CUBE",G="ENVMAP_MODE_REFLECTION",R="ENVMAP_BLENDING_MULTIPLY";if(A.envMap){switch(S.envMap.mapping){case t.CubeReflectionMapping:case t.CubeRefractionMapping:N="ENVMAP_TYPE_CUBE";break;case t.CubeUVReflectionMapping:case t.CubeUVRefractionMapping:N="ENVMAP_TYPE_CUBE_UV";break;case t.EquirectangularReflectionMapping:case t.EquirectangularRefractionMapping:N="ENVMAP_TYPE_EQUIREC";break;case t.SphericalReflectionMapping:N="ENVMAP_TYPE_SPHERE"}switch(S.envMap.mapping){case t.CubeRefractionMapping:case t.EquirectangularRefractionMapping:G="ENVMAP_MODE_REFRACTION"}switch(S.combine){case t.MultiplyOperation:R="ENVMAP_BLENDING_MULTIPLY";break;case t.MixOperation:R="ENVMAP_BLENDING_MIX";break;case t.AddOperation:R="ENVMAP_BLENDING_ADD"}}var I,x,D=a.gammaFactor>0?a.gammaFactor:1,O=h.isWebGL2?"":E(S.extensions,A,l),C=f(L),B=P.createProgram();if(S.isRawShaderMaterial?((I=[C].filter(u).join("\n")).length>0&&(I+="\n"),(x=[O,C].filter(u).join("\n")).length>0&&(x+="\n")):(I=["precision "+A.precision+" float;","precision "+A.precision+" int;","#define SHADER_NAME "+T.name,C,A.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+D,"#define MAX_BONES "+A.maxBones,A.useFog&&A.fog?"#define USE_FOG":"",A.useFog&&A.fogExp?"#define FOG_EXP2":"",A.map?"#define USE_MAP":"",A.envMap?"#define USE_ENVMAP":"",A.envMap?"#define "+G:"",A.lightMap?"#define USE_LIGHTMAP":"",A.aoMap?"#define USE_AOMAP":"",A.emissiveMap?"#define USE_EMISSIVEMAP":"",A.bumpMap?"#define USE_BUMPMAP":"",A.normalMap?"#define USE_NORMALMAP":"",A.normalMap&&A.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",A.displacementMap&&A.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",A.specularMap?"#define USE_SPECULARMAP":"",A.roughnessMap?"#define USE_ROUGHNESSMAP":"",A.metalnessMap?"#define USE_METALNESSMAP":"",A.alphaMap?"#define USE_ALPHAMAP":"",A.vertexTangents?"#define USE_TANGENT":"",A.vertexColors?"#define USE_COLOR":"",A.flatShading?"#define FLAT_SHADED":"",A.skinning?"#define USE_SKINNING":"",A.useVertexTexture?"#define BONE_TEXTURE":"",A.morphTargets?"#define USE_MORPHTARGETS":"",A.morphNormals&&!1===A.flatShading?"#define USE_MORPHNORMALS":"",A.doubleSided?"#define DOUBLE_SIDED":"",A.flipSided?"#define FLIP_SIDED":"",A.shadowMapEnabled?"#define USE_SHADOWMAP":"",A.shadowMapEnabled?"#define "+b:"",A.sizeAttenuation?"#define USE_SIZEATTENUATION":"",A.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",A.logarithmicDepthBuffer&&(h.isWebGL2||l.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(u).join("\n"),x=[O,"precision "+A.precision+" float;","precision "+A.precision+" int;","#define SHADER_NAME "+T.name,C,A.alphaTest?"#define ALPHATEST "+A.alphaTest+(A.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+D,A.useFog&&A.fog?"#define USE_FOG":"",A.useFog&&A.fogExp?"#define FOG_EXP2":"",A.map?"#define USE_MAP":"",A.matcap?"#define USE_MATCAP":"",A.envMap?"#define USE_ENVMAP":"",A.envMap?"#define "+N:"",A.envMap?"#define "+G:"",A.envMap?"#define "+R:"",A.lightMap?"#define USE_LIGHTMAP":"",A.aoMap?"#define USE_AOMAP":"",A.emissiveMap?"#define USE_EMISSIVEMAP":"",A.bumpMap?"#define USE_BUMPMAP":"",A.normalMap?"#define USE_NORMALMAP":"",A.normalMap&&A.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",A.specularMap?"#define USE_SPECULARMAP":"",A.roughnessMap?"#define USE_ROUGHNESSMAP":"",A.metalnessMap?"#define USE_METALNESSMAP":"",A.alphaMap?"#define USE_ALPHAMAP":"",A.vertexTangents?"#define USE_TANGENT":"",A.vertexColors?"#define USE_COLOR":"",A.gradientMap?"#define USE_GRADIENTMAP":"",A.flatShading?"#define FLAT_SHADED":"",A.doubleSided?"#define DOUBLE_SIDED":"",A.flipSided?"#define FLIP_SIDED":"",A.shadowMapEnabled?"#define USE_SHADOWMAP":"",A.shadowMapEnabled?"#define "+b:"",A.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",A.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",A.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",A.logarithmicDepthBuffer&&(h.isWebGL2||l.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",A.envMap&&(h.isWebGL2||l.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",A.toneMapping!==t.NoToneMapping?"#define TONE_MAPPING":"",A.toneMapping!==t.NoToneMapping?r.ShaderChunk.tonemapping_pars_fragment:"",A.toneMapping!==t.NoToneMapping?p("toneMapping",A.toneMapping):"",A.dithering?"#define DITHERING":"",A.outputEncoding||A.mapEncoding||A.matcapEncoding||A.envMapEncoding||A.emissiveMapEncoding?r.ShaderChunk.encodings_pars_fragment:"",A.mapEncoding?o("mapTexelToLinear",A.mapEncoding):"",A.matcapEncoding?o("matcapTexelToLinear",A.matcapEncoding):"",A.envMapEncoding?o("envMapTexelToLinear",A.envMapEncoding):"",A.emissiveMapEncoding?o("emissiveMapTexelToLinear",A.emissiveMapEncoding):"",A.outputEncoding?d("linearToOutputTexel",A.outputEncoding):"",A.depthPacking?"#define DEPTH_PACKING "+S.depthPacking:"","\n"].filter(u).join("\n")),v=g(v=c(v=M(v),A),A),U=g(U=c(U=M(U),A),A),v=_(v),U=_(U),h.isWebGL2&&!S.isRawShaderMaterial){var H=!1,w=/^\s*#version\s+300\s+es\s*\n/;S.isShaderMaterial&&null!==v.match(w)&&null!==U.match(w)&&(H=!0,v=v.replace(w,""),U=U.replace(w,"")),I=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+I,x=["#version 300 es\n","#define varying in",H?"":"out highp vec4 pc_fragColor;",H?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x}var F=I+v,V=x+U,X=(0,n.WebGLShader)(P,P.VERTEX_SHADER,F),j=(0,n.WebGLShader)(P,P.FRAGMENT_SHADER,V);P.attachShader(B,X),P.attachShader(B,j),void 0!==S.index0AttributeName?P.bindAttribLocation(B,0,S.index0AttributeName):!0===A.morphTargets&&P.bindAttribLocation(B,0,"position"),P.linkProgram(B);var W,k,Y=P.getProgramInfoLog(B).trim(),y=P.getShaderInfoLog(X).trim(),q=P.getShaderInfoLog(j).trim(),K=!0,z=!0;return!1===P.getProgramParameter(B,P.LINK_STATUS)?(K=!1,console.error("WebGLProgram: shader error: ",P.getError(),"gl.VALIDATE_STATUS",P.getProgramParameter(B,P.VALIDATE_STATUS),"gl.getProgramInfoLog",Y,y,q)):""!==Y?console.warn("WebGLProgram: gl.getProgramInfoLog()",Y):""!==y&&""!==q||(z=!1),z&&(this.diagnostics={runnable:K,material:S,programLog:Y,vertexShader:{log:y,prefix:I},fragmentShader:{log:q,prefix:x}}),P.deleteShader(X),P.deleteShader(j),this.getUniforms=function(){return void 0===W&&(W=new e.WebGLUniforms(P,B,a)),W},this.getAttributes=function(){return void 0===k&&(k=s(P,B)),k},this.destroy=function(){P.deleteProgram(B),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=T.name,this.id=i++,this.code=m,this.usedTimes=1,this.program=B,this.vertexShader=X,this.fragmentShader=j,this}
},{"./WebGLUniforms.js":"JHYB","./WebGLShader.js":"DnkG","../shaders/ShaderChunk.js":"fXGd","../../constants.js":"HNhV"}],"An1S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLPrograms=t;var e=require("../../constants.js"),a=require("./WebGLProgram.js");function t(t,n,r){var i=[],p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(a,t){var n;return a?a.isTexture?n=a.encoding:a.isWebGLRenderTarget&&(console.warn("WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=a.texture.encoding):n=e.LinearEncoding,n===e.LinearEncoding&&t&&(n=e.GammaEncoding),n}this.getParameters=function(a,n,i,s,h,m,g){var l=p[a.type],M=g.isSkinnedMesh?function(e){var a=e.skeleton.bones;if(r.floatVertexTextures)return 1024;var t=r.maxVertexUniforms,n=Math.floor((t-20)/4),i=Math.min(n,a.length);return i<a.length?(console.warn("WebGLRenderer: Skeleton has "+a.length+" bones. This GPU supports "+i+"."),0):i}(g):0,u=r.precision;null!==a.precision&&(u=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("WebGLProgram.getParameters:",a.precision,"not supported, using",u,"instead.");var d=t.getRenderTarget();return{shaderID:l,precision:u,supportsVertexTextures:r.vertexTextures,outputEncoding:o(d?d.texture:null,t.gammaOutput),map:!!a.map,mapEncoding:o(a.map,t.gammaInput),matcap:!!a.matcap,matcapEncoding:o(a.matcap,t.gammaInput),envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,envMapEncoding:o(a.envMap,t.gammaInput),envMapCubeUV:!!a.envMap&&(a.envMap.mapping===e.CubeUVReflectionMapping||a.envMap.mapping===e.CubeUVRefractionMapping),lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:o(a.emissiveMap,t.gammaInput),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===e.ObjectSpaceNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,gradientMap:!!a.gradientMap,combine:a.combine,vertexTangents:a.normalMap&&a.vertexTangents,vertexColors:a.vertexColors,fog:!!s,useFog:a.fog,fogExp:s&&s.isFogExp2,flatShading:a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:a.skinning&&M>0,maxBones:M,useVertexTexture:r.floatVertexTextures,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:h,numClipIntersection:m,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&g.receiveShadow&&i.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:a.side===e.DoubleSide,flipSided:a.side===e.BackSide,depthPacking:void 0!==a.depthPacking&&a.depthPacking}},this.getProgramCode=function(e,a){var n=[];if(a.shaderID?n.push(a.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var i=0;i<s.length;i++)n.push(a[s[i]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(e,p,s,o){for(var h,m=0,g=i.length;m<g;m++){var l=i[m];if(l.code===o){++(h=l).usedTimes;break}}return void 0===h&&(h=new a.WebGLProgram(t,n,o,e,p,s,r),i.push(h)),h},this.releaseProgram=function(e){if(0==--e.usedTimes){var a=i.indexOf(e);i[a]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}
},{"../../constants.js":"HNhV","./WebGLProgram.js":"6FU0"}],"gfyh":[function(require,module,exports) {
"use strict";function e(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLProperties=e;
},{}],"wnqm":[function(require,module,exports) {
"use strict";function r(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.program&&e.program&&r.program!==e.program?r.program.id-e.program.id:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function e(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function d(){var d=[],n=0,t=[],i=[];function o(r,e,t,i,o,a){var u=d[n];return void 0===u?(u={id:r.id,object:r,geometry:e,material:t,program:t.program,groupOrder:i,renderOrder:r.renderOrder,z:o,group:a},d[n]=u):(u.id=r.id,u.object=r,u.geometry=e,u.material=t,u.program=t.program,u.groupOrder=i,u.renderOrder=r.renderOrder,u.z=o,u.group=a),n++,u}return{opaque:t,transparent:i,init:function(){n=0,t.length=0,i.length=0},push:function(r,e,d,n,a,u){var p=o(r,e,d,n,a,u);(!0===d.transparent?i:t).push(p)},unshift:function(r,e,d,n,a,u){var p=o(r,e,d,n,a,u);(!0===d.transparent?i:t).unshift(p)},sort:function(){t.length>1&&t.sort(r),i.length>1&&i.sort(e)}}}function n(){var r={};function e(d){var n=d.target;n.removeEventListener("dispose",e),delete r[n.id]}return{get:function(n,t){var i,o=r[n.id];return void 0===o?(i=new d,r[n.id]={},r[n.id][t.id]=i,n.addEventListener("dispose",e)):void 0===(i=o[t.id])&&(i=new d,o[t.id]=i),i},dispose:function(){r={}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderLists=n;
},{}],"EvKJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLLights=s;var a=require("../../math/Color.js"),o=require("../../math/Matrix4.js"),t=require("../../math/Vector2.js"),i=require("../../math/Vector3.js");function e(){var o={};return{get:function(e){if(void 0!==o[e.id])return o[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new i.Vector3,color:new a.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2};break;case"SpotLight":r={position:new i.Vector3,direction:new i.Vector3,color:new a.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2};break;case"PointLight":r={position:new i.Vector3,color:new a.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new i.Vector3,skyColor:new a.Color,groundColor:new a.Color};break;case"RectAreaLight":r={color:new a.Color,position:new i.Vector3,halfWidth:new i.Vector3,halfHeight:new i.Vector3}}return o[e.id]=r,r}}}var r=0;function s(){var a=new e,t={id:r++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=new i.Vector3,n=new o.Matrix4,h=new o.Matrix4;return{setup:function(o,i,e){for(var r=0,d=0,c=0,l=0,p=0,w=0,m=0,g=0,u=e.matrixWorldInverse,x=0,M=o.length;x<M;x++){var S=o[x],y=S.color,L=S.intensity,f=S.distance,b=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)r+=y.r*L,d+=y.g*L,c+=y.b*L;else if(S.isDirectionalLight){if((V=a.get(S)).color.copy(S.color).multiplyScalar(S.intensity),V.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),V.direction.sub(s),V.direction.transformDirection(u),V.shadow=S.castShadow,S.castShadow){var C=S.shadow;V.shadowBias=C.bias,V.shadowRadius=C.radius,V.shadowMapSize=C.mapSize}t.directionalShadowMap[l]=b,t.directionalShadowMatrix[l]=S.shadow.matrix,t.directional[l]=V,l++}else if(S.isSpotLight)(V=a.get(S)).position.setFromMatrixPosition(S.matrixWorld),V.position.applyMatrix4(u),V.color.copy(y).multiplyScalar(L),V.distance=f,V.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),V.direction.sub(s),V.direction.transformDirection(u),V.coneCos=Math.cos(S.angle),V.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),V.decay=S.decay,V.shadow=S.castShadow,S.castShadow&&(C=S.shadow,V.shadowBias=C.bias,V.shadowRadius=C.radius,V.shadowMapSize=C.mapSize),t.spotShadowMap[w]=b,t.spotShadowMatrix[w]=S.shadow.matrix,t.spot[w]=V,w++;else if(S.isRectAreaLight)(V=a.get(S)).color.copy(y).multiplyScalar(L),V.position.setFromMatrixPosition(S.matrixWorld),V.position.applyMatrix4(u),h.identity(),n.copy(S.matrixWorld),n.premultiply(u),h.extractRotation(n),V.halfWidth.set(.5*S.width,0,0),V.halfHeight.set(0,.5*S.height,0),V.halfWidth.applyMatrix4(h),V.halfHeight.applyMatrix4(h),t.rectArea[m]=V,m++;else if(S.isPointLight)(V=a.get(S)).position.setFromMatrixPosition(S.matrixWorld),V.position.applyMatrix4(u),V.color.copy(S.color).multiplyScalar(S.intensity),V.distance=S.distance,V.decay=S.decay,V.shadow=S.castShadow,S.castShadow&&(C=S.shadow,V.shadowBias=C.bias,V.shadowRadius=C.radius,V.shadowMapSize=C.mapSize,V.shadowCameraNear=C.camera.near,V.shadowCameraFar=C.camera.far),t.pointShadowMap[p]=b,t.pointShadowMatrix[p]=S.shadow.matrix,t.point[p]=V,p++;else if(S.isHemisphereLight){var V;(V=a.get(S)).direction.setFromMatrixPosition(S.matrixWorld),V.direction.transformDirection(u),V.direction.normalize(),V.skyColor.copy(S.color).multiplyScalar(L),V.groundColor.copy(S.groundColor).multiplyScalar(L),t.hemi[g]=V,g++}}t.ambient[0]=r,t.ambient[1]=d,t.ambient[2]=c,t.directional.length=l,t.spot.length=w,t.rectArea.length=m,t.point.length=p,t.hemi.length=g,t.hash.stateID=t.id,t.hash.directionalLength=l,t.hash.pointLength=p,t.hash.spotLength=w,t.hash.rectAreaLength=m,t.hash.hemiLength=g,t.hash.shadowsLength=i.length},state:t}}
},{"../../math/Color.js":"WOLJ","../../math/Matrix4.js":"Rio0","../../math/Vector2.js":"qn61","../../math/Vector3.js":"TKlu"}],"7VXK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderStates=i;var e=require("./WebGLLights.js");function t(){var t=new e.WebGLLights,i=[],n=[];return{init:function(){i.length=0,n.length=0},state:{lightsArray:i,shadowsArray:n,lights:t},setupLights:function(e){t.setup(i,n,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function i(){var e={};function i(t){var n=t.target;n.removeEventListener("dispose",i),delete e[n.id]}return{get:function(n,s){var r;return void 0===e[n.id]?(r=new t,e[n.id]={},e[n.id][s.id]=r,n.addEventListener("dispose",i)):void 0===e[n.id][s.id]?(r=new t,e[n.id][s.id]=r):r=e[n.id][s.id],r},dispose:function(){e={}}}}
},{"./WebGLLights.js":"EvKJ"}],"9FdC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderTarget=s;var e=require("../core/EventDispatcher.js"),t=require("../textures/Texture.js"),i=require("../constants.js"),r=require("../math/Vector4.js");function s(e,s,h){this.width=e,this.height=s,this.scissor=new r.Vector4(0,0,e,s),this.scissorTest=!1,this.viewport=new r.Vector4(0,0,e,s),h=h||{},this.texture=new t.Texture(void 0,void 0,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:i.LinearFilter,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0===h.stencilBuffer||h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null}s.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:s,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/EventDispatcher.js":"O/Kz","../textures/Texture.js":"05Bz","../constants.js":"HNhV","../math/Vector4.js":"Z46c"}],"+N1O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshDepthMaterial=i;var t=require("./Material.js"),e=require("../constants.js");function i(i){t.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=e.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isMeshDepthMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};
},{"./Material.js":"FNW4","../constants.js":"HNhV"}],"+HRM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshDistanceMaterial=i;var e=require("./Material.js"),t=require("../math/Vector3.js");function i(i){e.Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new t.Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(i)}i.prototype=Object.create(e.Material.prototype),i.prototype.constructor=i,i.prototype.isMeshDistanceMaterial=!0,i.prototype.copy=function(t){return e.Material.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};
},{"./Material.js":"FNW4","../math/Vector3.js":"TKlu"}],"S3Z1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLShadowMap=c;var e=require("../../constants.js"),r=require("../WebGLRenderTarget.js"),t=require("../../materials/MeshDepthMaterial.js"),i=require("../../materials/MeshDistanceMaterial.js"),a=require("../../math/Vector4.js"),n=require("../../math/Vector3.js"),s=require("../../math/Vector2.js"),o=require("../../math/Matrix4.js"),l=require("../../math/Frustum.js");function c(c,d,p){for(var h=new l.Frustum,m=new o.Matrix4,u=new s.Vector2,w=new s.Vector2(p,p),f=new n.Vector3,g=new n.Vector3,v=1,M=2,x=1+(v|M),V=new Array(x),y=new Array(x),b={},S={0:e.BackSide,1:e.FrontSide,2:e.DoubleSide},j=[new n.Vector3(1,0,0),new n.Vector3(-1,0,0),new n.Vector3(0,0,1),new n.Vector3(0,0,-1),new n.Vector3(0,1,0),new n.Vector3(0,-1,0)],k=[new n.Vector3(0,1,0),new n.Vector3(0,1,0),new n.Vector3(0,1,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1),new n.Vector3(0,0,-1)],D=[new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4],P=0;P!==x;++P){var T=0!=(P&v),W=0!=(P&M),F=new t.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,morphTargets:T,skinning:W});V[P]=F;var A=new i.MeshDistanceMaterial({morphTargets:T,skinning:W});y[P]=A}var L=this;function q(e,r,t,i,a,n){var s=e.geometry,o=null,l=V,d=e.customDepthMaterial;if(t&&(l=y,d=e.customDistanceMaterial),d)o=d;else{var p=!1;r.morphTargets&&(s&&s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===r.skinning&&console.warn("WebGLShadowMap: SkinnedMesh with material.skinning set to false:",e);var h=e.isSkinnedMesh&&r.skinning,m=0;p&&(m|=v),h&&(m|=M),o=l[m]}if(c.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var u=o.uuid,w=r.uuid,f=b[u];void 0===f&&(f={},b[u]=f);var g=f[w];void 0===g&&(g=o.clone(),f[w]=g),o=g}return o.visible=r.visible,o.wireframe=r.wireframe,o.side=null!=r.shadowSide?r.shadowSide:S[r.side],o.clipShadows=r.clipShadows,o.clippingPlanes=r.clippingPlanes,o.clipIntersection=r.clipIntersection,o.wireframeLinewidth=r.wireframeLinewidth,o.linewidth=r.linewidth,t&&o.isMeshDistanceMaterial&&(o.referencePosition.copy(i),o.nearDistance=a,o.farDistance=n),o}function G(e,r,t,i){if(!1!==e.visible){if(e.layers.test(r.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||h.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld);var a=d.update(e),n=e.material;if(Array.isArray(n))for(var s=a.groups,o=0,l=s.length;o<l;o++){var p=s[o],m=n[p.materialIndex];if(m&&m.visible){var u=q(e,m,i,g,t.near,t.far);c.renderBufferDirect(t,null,a,u,e,p)}}else if(n.visible){u=q(e,n,i,g,t.near,t.far);c.renderBufferDirect(t,null,a,u,e,null)}}for(var w=e.children,f=0,v=w.length;f<v;f++)G(w[f],r,t,i)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=e.PCFShadowMap,this.render=function(t,i,a){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==t.length){var n,s=c.getRenderTarget(),o=c.state;o.setBlending(e.NoBlending),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var l=0,d=t.length;l<d;l++){var p=t[l],v=p.shadow,M=p&&p.isPointLight;if(void 0!==v){var x=v.camera;if(u.copy(v.mapSize),u.min(w),M){var V=u.x,y=u.y;D[0].set(2*V,y,V,y),D[1].set(0,y,V,y),D[2].set(3*V,y,V,y),D[3].set(V,y,V,y),D[4].set(3*V,0,V,y),D[5].set(V,0,V,y),u.x*=4,u.y*=2}if(null===v.map){var b={minFilter:e.NearestFilter,magFilter:e.NearestFilter,format:e.RGBAFormat};v.map=new r.WebGLRenderTarget(u.x,u.y,b),v.map.texture.name=p.name+".shadowMap",x.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(p);var S=v.map,P=v.matrix;g.setFromMatrixPosition(p.matrixWorld),x.position.copy(g),M?(n=6,P.makeTranslation(-g.x,-g.y,-g.z)):(n=1,f.setFromMatrixPosition(p.target.matrixWorld),x.lookAt(f),x.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(x.projectionMatrix),P.multiply(x.matrixWorldInverse)),c.setRenderTarget(S),c.clear();for(var T=0;T<n;T++){if(M){f.copy(x.position),f.add(j[T]),x.up.copy(k[T]),x.lookAt(f),x.updateMatrixWorld();var W=D[T];o.viewport(W)}m.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),h.setFromMatrix(m),G(i,a,x,M)}}else console.warn("WebGLShadowMap:",p,"has no shadow.")}L.needsUpdate=!1,c.setRenderTarget(s)}}}
},{"../../constants.js":"HNhV","../WebGLRenderTarget.js":"9FdC","../../materials/MeshDepthMaterial.js":"+N1O","../../materials/MeshDistanceMaterial.js":"+HRM","../../math/Vector4.js":"Z46c","../../math/Vector3.js":"TKlu","../../math/Vector2.js":"qn61","../../math/Matrix4.js":"Rio0","../../math/Frustum.js":"o6Yv"}],"JZYE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLState=n;var e=require("../../constants.js"),t=require("../../math/Vector4.js");function n(n,l,r,a){var u=new function(){var e=!1,l=new t.Vector4,r=null,a=new t.Vector4(0,0,0,0);return{setMask:function(t){r===t||e||(n.colorMask(t,t,t,t),r=t)},setLocked:function(t){e=t},setClear:function(e,t,r,u,c){!0===c&&(e*=u,t*=u,r*=u),l.set(e,t,r,u),!1===a.equals(l)&&(n.clearColor(e,t,r,u),a.copy(l))},reset:function(){e=!1,r=null,a.set(-1,0,0,0)}}},c=new function(){var t=!1,l=null,r=null,a=null;return{setTest:function(e){e?w(n.DEPTH_TEST):q(n.DEPTH_TEST)},setMask:function(e){l===e||t||(n.depthMask(e),l=e)},setFunc:function(t){if(r!==t){if(t)switch(t){case e.NeverDepth:n.depthFunc(n.NEVER);break;case e.AlwaysDepth:n.depthFunc(n.ALWAYS);break;case e.LessDepth:n.depthFunc(n.LESS);break;case e.LessEqualDepth:n.depthFunc(n.LEQUAL);break;case e.EqualDepth:n.depthFunc(n.EQUAL);break;case e.GreaterEqualDepth:n.depthFunc(n.GEQUAL);break;case e.GreaterDepth:n.depthFunc(n.GREATER);break;case e.NotEqualDepth:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}else n.depthFunc(n.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(e){a!==e&&(n.clearDepth(e),a=e)},reset:function(){t=!1,l=null,r=null,a=null}}},i=new function(){var e=!1,t=null,l=null,r=null,a=null,u=null,c=null,i=null,s=null;return{setTest:function(e){e?w(n.STENCIL_TEST):q(n.STENCIL_TEST)},setMask:function(l){t===l||e||(n.stencilMask(l),t=l)},setFunc:function(e,t,u){l===e&&r===t&&a===u||(n.stencilFunc(e,t,u),l=e,r=t,a=u)},setOp:function(e,t,l){u===e&&c===t&&i===l||(n.stencilOp(e,t,l),u=e,c=t,i=l)},setLocked:function(t){e=t},setClear:function(e){s!==e&&(n.clearStencil(e),s=e)},reset:function(){e=!1,t=null,l=null,r=null,a=null,u=null,c=null,i=null,s=null}}},s=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=new Uint8Array(s),E=new Uint8Array(s),d=new Uint8Array(s),_={},f=null,p=null,A=null,b=null,S=null,T=null,L=null,F=null,C=null,O=null,N=!1,R=null,g=null,h=null,v=null,U=null,D=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),x=!1,B=0,I=n.getParameter(n.VERSION);-1!==I.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),x=B>=1):-1!==I.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),x=B>=2);var y=null,k={},M=new t.Vector4,m=new t.Vector4;function G(e,t,l){var r=new Uint8Array(4),a=n.createTexture();n.bindTexture(e,a),n.texParameteri(e,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(e,n.TEXTURE_MAG_FILTER,n.NEAREST);for(var u=0;u<l;u++)n.texImage2D(t+u,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,r);return a}var P={};function W(e,t){(o[e]=1,0===E[e]&&(n.enableVertexAttribArray(e),E[e]=1),d[e]!==t)&&((a.isWebGL2?n:l.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),d[e]=t)}function w(e){!0!==_[e]&&(n.enable(e),_[e]=!0)}function q(e){!1!==_[e]&&(n.disable(e),_[e]=!1)}function X(t,l,a,u,c,i,s,o){if(t!==e.NoBlending){if(A||(w(n.BLEND),A=!0),t===e.CustomBlending)c=c||l,i=i||a,s=s||u,l===S&&c===F||(n.blendEquationSeparate(r.convert(l),r.convert(c)),S=l,F=c),a===T&&u===L&&i===C&&s===O||(n.blendFuncSeparate(r.convert(a),r.convert(u),r.convert(i),r.convert(s)),T=a,L=u,C=i,O=s),b=t,N=null;else if(t!==b||o!==N){if(S===e.AddEquation&&F===e.AddEquation||(n.blendEquation(n.FUNC_ADD),S=e.AddEquation,F=e.AddEquation),o)switch(t){case e.NormalBlending:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e.AdditiveBlending:n.blendFunc(n.ONE,n.ONE);break;case e.SubtractiveBlending:n.blendFuncSeparate(n.ZERO,n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ONE_MINUS_SRC_ALPHA);break;case e.MultiplyBlending:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("WebGLState: Invalid blending: ",t)}else switch(t){case e.NormalBlending:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e.AdditiveBlending:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case e.SubtractiveBlending:n.blendFunc(n.ZERO,n.ONE_MINUS_SRC_COLOR);break;case e.MultiplyBlending:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("WebGLState: Invalid blending: ",t)}T=null,L=null,C=null,O=null,b=t,N=o}}else A&&(q(n.BLEND),A=!1)}function V(e){R!==e&&(e?n.frontFace(n.CW):n.frontFace(n.CCW),R=e)}function H(t){t!==e.CullFaceNone?(w(n.CULL_FACE),t!==g&&(t===e.CullFaceBack?n.cullFace(n.BACK):t===e.CullFaceFront?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):q(n.CULL_FACE),g=t}function Q(e,t,l){e?(w(n.POLYGON_OFFSET_FILL),v===t&&U===l||(n.polygonOffset(t,l),v=t,U=l)):q(n.POLYGON_OFFSET_FILL)}function Z(e){void 0===e&&(e=n.TEXTURE0+D-1),y!==e&&(n.activeTexture(e),y=e)}return P[n.TEXTURE_2D]=G(n.TEXTURE_2D,n.TEXTURE_2D,1),P[n.TEXTURE_CUBE_MAP]=G(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),u.setClear(0,0,0,1),c.setClear(1),i.setClear(0),w(n.DEPTH_TEST),c.setFunc(e.LessEqualDepth),V(!1),H(e.CullFaceBack),w(n.CULL_FACE),X(e.NoBlending),{buffers:{color:u,depth:c,stencil:i},initAttributes:function(){for(var e=0,t=o.length;e<t;e++)o[e]=0},enableAttribute:function(e){W(e,0)},enableAttributeAndDivisor:W,disableUnusedAttributes:function(){for(var e=0,t=E.length;e!==t;++e)E[e]!==o[e]&&(n.disableVertexAttribArray(e),E[e]=0)},enable:w,disable:q,getCompressedTextureFormats:function(){if(null===f&&(f=[],l.get("WEBGL_compressed_texture_pvrtc")||l.get("WEBGL_compressed_texture_s3tc")||l.get("WEBGL_compressed_texture_etc1")||l.get("WEBGL_compressed_texture_astc")))for(var e=n.getParameter(n.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)f.push(e[t]);return f},useProgram:function(e){return p!==e&&(n.useProgram(e),p=e,!0)},setBlending:X,setMaterial:function(t,l){t.side===e.DoubleSide?q(n.CULL_FACE):w(n.CULL_FACE);var r=t.side===e.BackSide;l&&(r=!r),V(r),t.blending===e.NormalBlending&&!1===t.transparent?X(e.NoBlending):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),u.setMask(t.colorWrite),Q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:V,setCullFace:H,setLineWidth:function(e){e!==h&&(x&&n.lineWidth(e),h=e)},setPolygonOffset:Q,setScissorTest:function(e){e?w(n.SCISSOR_TEST):q(n.SCISSOR_TEST)},activeTexture:Z,bindTexture:function(e,t){null===y&&Z();var l=k[y];void 0===l&&(l={type:void 0,texture:void 0},k[y]=l),l.type===e&&l.texture===t||(n.bindTexture(e,t||P[e]),l.type=e,l.texture=t)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(e){console.error("WebGLState:",e)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(e){console.error("WebGLState:",e)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(e){console.error("WebGLState:",e)}},scissor:function(e){!1===M.equals(e)&&(n.scissor(e.x,e.y,e.z,e.w),M.copy(e))},viewport:function(e){!1===m.equals(e)&&(n.viewport(e.x,e.y,e.z,e.w),m.copy(e))},reset:function(){for(var e=0;e<E.length;e++)1===E[e]&&(n.disableVertexAttribArray(e),E[e]=0);_={},f=null,y=null,k={},p=null,b=null,R=null,g=null,u.reset(),c.reset(),i.reset()}}}
},{"../../constants.js":"HNhV","../../math/Vector4.js":"Z46c"}],"K2jh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLTextures=r;var e=require("../../constants.js"),t=require("../../math/Math.js");function r(r,i,a,n,T,u,f){var E,o={},_="undefined"!=typeof OffscreenCanvas;function l(e,t){return _?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,r,i,a){var n=1;if((e.width>a||e.height>a)&&(n=a/Math.max(e.width,e.height)),n<1||!0===r){if(e instanceof ImageBitmap||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var T=r?t._Math.floorPowerOfTwo:Math.floor,u=T(n*e.width),f=T(n*e.height);void 0===E&&(E=l(u,f));var o=i?l(u,f):E;return o.width=u,o.height=f,o.getContext("2d").drawImage(e,0,0,u,f),console.warn("WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+u+"x"+f+")."),_?o.transferToImageBitmap():o}return"data"in e&&console.warn("WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function s(e){return t._Math.isPowerOfTwo(e.width)&&t._Math.isPowerOfTwo(e.height)}function R(t,r){return t.generateMipmaps&&r&&t.minFilter!==e.NearestFilter&&t.minFilter!==e.LinearFilter}function g(e,t,i,a){r.generateMipmap(e),n.get(t).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function p(e,t){if(!T.isWebGL2)return e;var a=e;return e===r.RED&&(t===r.FLOAT&&(a=r.R32F),t===r.HALF_FLOAT&&(a=r.R16F),t===r.UNSIGNED_BYTE&&(a=r.R8)),e===r.RGB&&(t===r.FLOAT&&(a=r.RGB32F),t===r.HALF_FLOAT&&(a=r.RGB16F),t===r.UNSIGNED_BYTE&&(a=r.RGB8)),e===r.RGBA&&(t===r.FLOAT&&(a=r.RGBA32F),t===r.HALF_FLOAT&&(a=r.RGBA16F),t===r.UNSIGNED_BYTE&&(a=r.RGBA8)),a===r.R16F||a===r.R32F||a===r.RGBA16F||a===r.RGBA32F?i.get("EXT_color_buffer_float"):a!==r.RGB16F&&a!==r.RGB32F||console.warn("WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),a}function m(t){return t===e.NearestFilter||t===e.NearestMipMapNearestFilter||t===e.NearestMipMapLinearFilter?r.NEAREST:r.LINEAR}function b(e){var t=e.target;t.removeEventListener("dispose",b),function(e){var t=n.get(e);if(void 0===t.__webglInit)return;r.deleteTexture(t.__webglTexture),n.remove(e)}(t),t.isVideoTexture&&delete o[t.id],f.memory.textures--}function h(e){var t=e.target;t.removeEventListener("dispose",h),function(e){var t=n.get(e),i=n.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&r.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)r.deleteFramebuffer(t.__webglFramebuffer[a]),t.__webglDepthbuffer&&r.deleteRenderbuffer(t.__webglDepthbuffer[a]);else r.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&r.deleteRenderbuffer(t.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}(t),f.memory.textures--}function F(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=e.id,r=f.render.frame;o[t]!==r&&(o[t]=r,e.update())}(e),e.version>0&&i.__version!==e.version){var T=e.image;if(void 0===T)console.warn("WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==T.complete)return void U(i,e,t);console.warn("WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_2D,i.__webglTexture)}function x(t,a,f){var E;if(f?(r.texParameteri(t,r.TEXTURE_WRAP_S,u.convert(a.wrapS)),r.texParameteri(t,r.TEXTURE_WRAP_T,u.convert(a.wrapT)),t===r.TEXTURE_3D&&r.texParameteri(t,r.TEXTURE_WRAP_R,u.convert(a.wrapR)),r.texParameteri(t,r.TEXTURE_MAG_FILTER,u.convert(a.magFilter)),r.texParameteri(t,r.TEXTURE_MIN_FILTER,u.convert(a.minFilter))):(r.texParameteri(t,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(t,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),t===r.TEXTURE_3D&&r.texParameteri(t,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),a.wrapS===e.ClampToEdgeWrapping&&a.wrapT===e.ClampToEdgeWrapping||console.warn("WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to ClampToEdgeWrapping."),r.texParameteri(t,r.TEXTURE_MAG_FILTER,m(a.magFilter)),r.texParameteri(t,r.TEXTURE_MIN_FILTER,m(a.minFilter)),a.minFilter!==e.NearestFilter&&a.minFilter!==e.LinearFilter&&console.warn("WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to NearestFilter or LinearFilter.")),E=i.get("EXT_texture_filter_anisotropic")){if(a.type===e.FloatType&&null===i.get("OES_texture_float_linear"))return;if(a.type===e.HalfFloatType&&null===(T.isWebGL2||i.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(r.texParameterf(t,E.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,T.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function w(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",b),e.__webglTexture=r.createTexture(),f.memory.textures++)}function U(t,i,n){var f=i.isDataTexture3D?r.TEXTURE_3D:r.TEXTURE_2D;w(t,i),a.activeTexture(r.TEXTURE0+n),a.bindTexture(f,t.__webglTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,i.unpackAlignment);var E=function(t){return!T.isWebGL2&&(t.wrapS!==e.ClampToEdgeWrapping||t.wrapT!==e.ClampToEdgeWrapping||t.minFilter!==e.NearestFilter&&t.minFilter!==e.LinearFilter)}(i)&&!1===s(i.image),o=d(i.image,E,!1,T.maxTextureSize),_=s(o)||T.isWebGL2,l=u.convert(i.format),m=u.convert(i.type),b=p(l,m);x(f,i,_);var h,F=i.mipmaps;if(i.isDepthTexture){if(b=r.DEPTH_COMPONENT,i.type===e.FloatType){if(!T.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=r.DEPTH_COMPONENT32F}else T.isWebGL2&&(b=r.DEPTH_COMPONENT16);i.format===e.DepthFormat&&b===r.DEPTH_COMPONENT&&i.type!==e.UnsignedShortType&&i.type!==e.UnsignedIntType&&(console.warn("WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=e.UnsignedShortType,m=u.convert(i.type)),i.format===e.DepthStencilFormat&&(b=r.DEPTH_STENCIL,i.type!==e.UnsignedInt248Type&&(console.warn("WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=e.UnsignedInt248Type,m=u.convert(i.type))),a.texImage2D(r.TEXTURE_2D,0,b,o.width,o.height,0,l,m,null)}else if(i.isDataTexture)if(F.length>0&&_){for(var U=0,D=F.length;U<D;U++)h=F[U],a.texImage2D(r.TEXTURE_2D,U,b,h.width,h.height,0,l,m,h.data);i.generateMipmaps=!1,t.__maxMipLevel=F.length-1}else a.texImage2D(r.TEXTURE_2D,0,b,o.width,o.height,0,l,m,o.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(U=0,D=F.length;U<D;U++)h=F[U],i.format!==e.RGBAFormat&&i.format!==e.RGBFormat?a.getCompressedTextureFormats().indexOf(l)>-1?a.compressedTexImage2D(r.TEXTURE_2D,U,b,h.width,h.height,0,h.data):console.warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(r.TEXTURE_2D,U,b,h.width,h.height,0,l,m,h.data);t.__maxMipLevel=F.length-1}else if(i.isDataTexture3D)a.texImage3D(r.TEXTURE_3D,0,b,o.width,o.height,o.depth,0,l,m,o.data),t.__maxMipLevel=0;else if(F.length>0&&_){for(U=0,D=F.length;U<D;U++)h=F[U],a.texImage2D(r.TEXTURE_2D,U,b,l,m,h);i.generateMipmaps=!1,t.__maxMipLevel=F.length-1}else a.texImage2D(r.TEXTURE_2D,0,b,l,m,o),t.__maxMipLevel=0;R(i,_)&&g(r.TEXTURE_2D,i,o.width,o.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(e,t,i,T){var f=u.convert(t.texture.format),E=u.convert(t.texture.type),o=p(f,E);a.texImage2D(T,0,o,t.width,t.height,0,f,E,null),r.bindFramebuffer(r.FRAMEBUFFER,e),r.framebufferTexture2D(r.FRAMEBUFFER,i,T,n.get(t.texture).__webglTexture,0),r.bindFramebuffer(r.FRAMEBUFFER,null)}function c(e,t,i){if(r.bindRenderbuffer(r.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer){if(i){var a=M(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,r.DEPTH_COMPONENT16,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t.width,t.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e)}else if(t.depthBuffer&&t.stencilBuffer){if(i){a=M(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,r.DEPTH_STENCIL,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e)}else{var n=p(u.convert(t.texture.format),u.convert(t.texture.type));if(i){a=M(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,n,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,n,t.width,t.height)}r.bindRenderbuffer(r.RENDERBUFFER,null)}function v(t){var i=n.get(t),a=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(r.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),F(i.depthTexture,0);var a=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===e.DepthFormat)r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==e.DepthStencilFormat)throw new Error("Unknown depthTexture format");r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var T=0;T<6;T++)r.bindFramebuffer(r.FRAMEBUFFER,i.__webglFramebuffer[T]),i.__webglDepthbuffer[T]=r.createRenderbuffer(),c(i.__webglDepthbuffer[T],t)}else r.bindFramebuffer(r.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=r.createRenderbuffer(),c(i.__webglDepthbuffer,t);r.bindFramebuffer(r.FRAMEBUFFER,null)}function M(e){return T.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(T.maxSamples,e.samples):0}this.setTexture2D=F,this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?U(i,e,t):(a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_3D,i.__webglTexture))},this.setTextureCube=function(t,i){var f=n.get(t);if(6===t.image.length)if(t.version>0&&f.__version!==t.version){w(f,t),a.activeTexture(r.TEXTURE0+i),a.bindTexture(r.TEXTURE_CUBE_MAP,f.__webglTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var E=t&&t.isCompressedTexture,o=t.image[0]&&t.image[0].isDataTexture,_=[],l=0;l<6;l++)_[l]=E||o?o?t.image[l].image:t.image[l]:d(t.image[l],!1,!0,T.maxCubemapSize);var m=_[0],b=s(m)||T.isWebGL2,h=u.convert(t.format),F=u.convert(t.type),U=p(h,F);for(x(r.TEXTURE_CUBE_MAP,t,b),l=0;l<6;l++)if(E)for(var D,c=_[l].mipmaps,v=0,M=c.length;v<M;v++)D=c[v],t.format!==e.RGBAFormat&&t.format!==e.RGBFormat?a.getCompressedTextureFormats().indexOf(h)>-1?a.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,v,U,D.width,D.height,0,D.data):console.warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,v,U,D.width,D.height,0,h,F,D.data);else o?a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,U,_[l].width,_[l].height,0,h,F,_[l].data):a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,U,h,F,_[l]);f.__maxMipLevel=E?c.length-1:0,R(t,b)&&g(r.TEXTURE_CUBE_MAP,t,m.width,m.height),f.__version=t.version,t.onUpdate&&t.onUpdate(t)}else a.activeTexture(r.TEXTURE0+i),a.bindTexture(r.TEXTURE_CUBE_MAP,f.__webglTexture)},this.setTextureCubeDynamic=function(e,t){a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)},this.setupRenderTarget=function(e){var t=n.get(e),i=n.get(e.texture);e.addEventListener("dispose",h),i.__webglTexture=r.createTexture(),f.memory.textures++;var E=!0===e.isWebGLRenderTargetCube,o=!0===e.isWebGLMultisampleRenderTarget,_=s(e)||T.isWebGL2;if(E){t.__webglFramebuffer=[];for(var l=0;l<6;l++)t.__webglFramebuffer[l]=r.createFramebuffer()}else if(t.__webglFramebuffer=r.createFramebuffer(),o)if(T.isWebGL2){t.__webglMultisampledFramebuffer=r.createFramebuffer(),t.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,t.__webglColorRenderbuffer);var d=p(u.convert(e.texture.format),u.convert(e.texture.type)),m=M(e);r.renderbufferStorageMultisample(r.RENDERBUFFER,m,d,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,t.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,t.__webglColorRenderbuffer),r.bindRenderbuffer(r.RENDERBUFFER,null),e.depthBuffer&&(t.__webglDepthRenderbuffer=r.createRenderbuffer(),c(t.__webglDepthRenderbuffer,e,!0)),r.bindFramebuffer(r.FRAMEBUFFER,null)}else console.warn("WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(E){for(a.bindTexture(r.TEXTURE_CUBE_MAP,i.__webglTexture),x(r.TEXTURE_CUBE_MAP,e.texture,_),l=0;l<6;l++)D(t.__webglFramebuffer[l],e,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+l);R(e.texture,_)&&g(r.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),a.bindTexture(r.TEXTURE_CUBE_MAP,null)}else a.bindTexture(r.TEXTURE_2D,i.__webglTexture),x(r.TEXTURE_2D,e.texture,_),D(t.__webglFramebuffer,e,r.COLOR_ATTACHMENT0,r.TEXTURE_2D),R(e.texture,_)&&g(r.TEXTURE_2D,e.texture,e.width,e.height),a.bindTexture(r.TEXTURE_2D,null);e.depthBuffer&&v(e)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(R(t,s(e)||T.isWebGL2)){var i=e.isWebGLRenderTargetCube?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,u=n.get(t).__webglTexture;a.bindTexture(i,u),g(i,t,e.width,e.height),a.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(T.isWebGL2){var t=n.get(e);r.bindFramebuffer(r.READ_FRAMEBUFFER,t.__webglMultisampledFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,t.__webglFramebuffer);var i=e.width,a=e.height,u=r.COLOR_BUFFER_BIT;e.depthBuffer&&(u|=r.DEPTH_BUFFER_BIT),e.stencilBuffer&&(u|=r.STENCIL_BUFFER_BIT),r.blitFramebuffer(0,0,i,a,0,0,i,a,u,r.NEAREST)}else console.warn("WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}
},{"../../constants.js":"HNhV","../../math/Math.js":"J7M1"}],"DsSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLUtils=_;var r=require("../../constants.js");function _(_,t,e){return{convert:function(n){var i;if(n===r.RepeatWrapping)return _.REPEAT;if(n===r.ClampToEdgeWrapping)return _.CLAMP_TO_EDGE;if(n===r.MirroredRepeatWrapping)return _.MIRRORED_REPEAT;if(n===r.NearestFilter)return _.NEAREST;if(n===r.NearestMipMapNearestFilter)return _.NEAREST_MIPMAP_NEAREST;if(n===r.NearestMipMapLinearFilter)return _.NEAREST_MIPMAP_LINEAR;if(n===r.LinearFilter)return _.LINEAR;if(n===r.LinearMipMapNearestFilter)return _.LINEAR_MIPMAP_NEAREST;if(n===r.LinearMipMapLinearFilter)return _.LINEAR_MIPMAP_LINEAR;if(n===r.UnsignedByteType)return _.UNSIGNED_BYTE;if(n===r.UnsignedShort4444Type)return _.UNSIGNED_SHORT_4_4_4_4;if(n===r.UnsignedShort5551Type)return _.UNSIGNED_SHORT_5_5_5_1;if(n===r.UnsignedShort565Type)return _.UNSIGNED_SHORT_5_6_5;if(n===r.ByteType)return _.BYTE;if(n===r.ShortType)return _.SHORT;if(n===r.UnsignedShortType)return _.UNSIGNED_SHORT;if(n===r.IntType)return _.INT;if(n===r.UnsignedIntType)return _.UNSIGNED_INT;if(n===r.FloatType)return _.FLOAT;if(n===r.HalfFloatType){if(e.isWebGL2)return _.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(n===r.AlphaFormat)return _.ALPHA;if(n===r.RGBFormat)return _.RGB;if(n===r.RGBAFormat)return _.RGBA;if(n===r.LuminanceFormat)return _.LUMINANCE;if(n===r.LuminanceAlphaFormat)return _.LUMINANCE_ALPHA;if(n===r.DepthFormat)return _.DEPTH_COMPONENT;if(n===r.DepthStencilFormat)return _.DEPTH_STENCIL;if(n===r.RedFormat)return _.RED;if(n===r.AddEquation)return _.FUNC_ADD;if(n===r.SubtractEquation)return _.FUNC_SUBTRACT;if(n===r.ReverseSubtractEquation)return _.FUNC_REVERSE_SUBTRACT;if(n===r.ZeroFactor)return _.ZERO;if(n===r.OneFactor)return _.ONE;if(n===r.SrcColorFactor)return _.SRC_COLOR;if(n===r.OneMinusSrcColorFactor)return _.ONE_MINUS_SRC_COLOR;if(n===r.SrcAlphaFactor)return _.SRC_ALPHA;if(n===r.OneMinusSrcAlphaFactor)return _.ONE_MINUS_SRC_ALPHA;if(n===r.DstAlphaFactor)return _.DST_ALPHA;if(n===r.OneMinusDstAlphaFactor)return _.ONE_MINUS_DST_ALPHA;if(n===r.DstColorFactor)return _.DST_COLOR;if(n===r.OneMinusDstColorFactor)return _.ONE_MINUS_DST_COLOR;if(n===r.SrcAlphaSaturateFactor)return _.SRC_ALPHA_SATURATE;if((n===r.RGB_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT3_Format||n===r.RGBA_S3TC_DXT5_Format)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===r.RGB_S3TC_DXT1_Format)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT1_Format)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT3_Format)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===r.RGBA_S3TC_DXT5_Format)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===r.RGB_PVRTC_4BPPV1_Format||n===r.RGB_PVRTC_2BPPV1_Format||n===r.RGBA_PVRTC_4BPPV1_Format||n===r.RGBA_PVRTC_2BPPV1_Format)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===r.RGB_PVRTC_4BPPV1_Format)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r.RGB_PVRTC_2BPPV1_Format)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===r.RGBA_PVRTC_4BPPV1_Format)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r.RGBA_PVRTC_2BPPV1_Format)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===r.RGB_ETC1_Format&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===r.RGBA_ASTC_4x4_Format||n===r.RGBA_ASTC_5x4_Format||n===r.RGBA_ASTC_5x5_Format||n===r.RGBA_ASTC_6x5_Format||n===r.RGBA_ASTC_6x6_Format||n===r.RGBA_ASTC_8x5_Format||n===r.RGBA_ASTC_8x6_Format||n===r.RGBA_ASTC_8x8_Format||n===r.RGBA_ASTC_10x5_Format||n===r.RGBA_ASTC_10x6_Format||n===r.RGBA_ASTC_10x8_Format||n===r.RGBA_ASTC_10x10_Format||n===r.RGBA_ASTC_12x10_Format||n===r.RGBA_ASTC_12x12_Format)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if(n===r.MinEquation||n===r.MaxEquation){if(e.isWebGL2){if(n===r.MinEquation)return _.MIN;if(n===r.MaxEquation)return _.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(n===r.MinEquation)return i.MIN_EXT;if(n===r.MaxEquation)return i.MAX_EXT}}if(n===r.UnsignedInt248Type){if(e.isWebGL2)return _.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}
},{"../../constants.js":"HNhV"}],"Wfuz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=t;var e=require("../core/Object3D.js");function t(){e.Object3D.call(this),this.type="Group"}t.prototype=Object.assign(Object.create(e.Object3D.prototype),{constructor:t,isGroup:!0});
},{"../core/Object3D.js":"Kems"}],"94uR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PerspectiveCamera=s;var t=require("./Camera.js"),i=require("../core/Object3D.js"),e=require("../math/Math.js");function s(i,e,s,h){t.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==i?i:50,this.zoom=1,this.near=void 0!==s?s:.1,this.far=void 0!==h?h:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}s.prototype=Object.assign(Object.create(t.Camera.prototype),{constructor:s,isPerspectiveCamera:!0,copy:function(i,e){return t.Camera.prototype.copy.call(this,i,e),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=null===i.view?null:Object.assign({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this},setFocalLength:function(t){var i=.5*this.getFilmHeight()/t;this.fov=2*e._Math.RAD2DEG*Math.atan(i),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*e._Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*e._Math.RAD2DEG*Math.atan(Math.tan(.5*e._Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,i,e,s,h,a){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=s,this.view.width=h,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,i=t*Math.tan(.5*e._Math.DEG2RAD*this.fov)/this.zoom,s=2*i,h=this.aspect*s,a=-.5*h,o=this.view;if(null!==this.view&&this.view.enabled){var f=o.fullWidth,r=o.fullHeight;a+=o.offsetX*h/f,i-=o.offsetY*s/r,h*=o.width/f,s*=o.height/r}var n=this.filmOffset;0!==n&&(a+=t*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+h,i,i-s,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});
},{"./Camera.js":"bcK4","../core/Object3D.js":"Kems","../math/Math.js":"J7M1"}],"BHdb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArrayCamera=r;var e=require("./PerspectiveCamera.js");function r(r){e.PerspectiveCamera.call(this),this.cameras=r||[]}r.prototype=Object.assign(Object.create(e.PerspectiveCamera.prototype),{constructor:r,isArrayCamera:!0});
},{"./PerspectiveCamera.js":"94uR"}],"kSAc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setProjectionFromUnion=o;var e=require("../../math/Vector3.js"),r=new e.Vector3,t=new e.Vector3;function o(e,o,i){r.setFromMatrixPosition(o.matrixWorld),t.setFromMatrixPosition(i.matrixWorld);var a=r.distanceTo(t),n=o.projectionMatrix.elements,s=i.projectionMatrix.elements,c=n[14]/(n[10]-1),m=n[14]/(n[10]+1),l=(n[9]+1)/n[5],x=(n[9]-1)/n[5],p=(n[8]-1)/n[0],d=(s[8]+1)/s[0],u=c*p,v=c*d,j=a/(-p+d),M=j*-p;o.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(M),e.translateZ(j),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var W=c+j,P=m+j,q=u-M,F=v+(a-M),V=l*m/P*W,f=x*m/P*W;e.projectionMatrix.makePerspective(q,F,V,f,W,P)}
},{"../../math/Vector3.js":"TKlu"}],"KYH7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebVRManager=d;var e=require("../../objects/Group.js"),r=require("../../math/Matrix4.js"),t=require("../../math/Vector2.js"),i=require("../../math/Vector3.js"),n=require("../../math/Vector4.js"),a=require("../../math/Quaternion.js"),o=require("../../cameras/ArrayCamera.js"),s=require("../../cameras/PerspectiveCamera.js"),l=require("../webgl/WebGLAnimation.js"),u=require("./WebVRUtils.js");function d(d){var m=this,p=null,f=null,c=null,v=[],g=new r.Matrix4,h=new r.Matrix4,y=1,x="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",C,!1));var w=new r.Matrix4,b=new a.Quaternion,W=new i.Vector3,A=new s.PerspectiveCamera;A.bounds=new n.Vector4(0,0,.5,1),A.layers.enable(1);var j=new s.PerspectiveCamera;j.bounds=new n.Vector4(.5,0,.5,1),j.layers.enable(2);var q=new o.ArrayCamera([A,j]);function M(){return null!==p&&!0===p.isPresenting}q.layers.enable(1),q.layers.enable(2);var V,P=new t.Vector2;function C(){if(M()){var e=p.getEyeParameters("left"),r=e.renderWidth*y,t=e.renderHeight*y;V=d.getPixelRatio(),d.getSize(P),d.setDrawingBufferSize(2*r,t,1),D.start()}else m.enabled&&d.setDrawingBufferSize(P.width,P.height,V),D.stop()}var I=[];function F(e){for(var r=navigator.getGamepads&&navigator.getGamepads(),t=0,i=0,n=r.length;t<n;t++){var a=r[t];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(i===e)return a;i++}}}this.enabled=!1,this.getController=function(r){var t=v[r];return void 0===t&&((t=new e.Group).matrixAutoUpdate=!1,t.visible=!1,v[r]=t),t},this.getDevice=function(){return p},this.setDevice=function(e){void 0!==e&&(p=e),D.setContext(e)},this.setFramebufferScaleFactor=function(e){y=e},this.setFrameOfReferenceType=function(e){x=e},this.setPoseTarget=function(e){void 0!==e&&(c=e)},this.getCamera=function(e){var r="stage"===x?1.6:0;if(!1===M())return e.position.set(0,r,0),e.rotation.set(0,0,0),e;if(p.depthNear=e.near,p.depthFar=e.far,p.getFrameData(f),"stage"===x){var t=p.stageParameters;t?g.fromArray(t.sittingToStandingTransform):g.makeTranslation(0,r,0)}var i=f.pose,n=null!==c?c:e;n.matrix.copy(g),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(b.fromArray(i.orientation),n.quaternion.multiply(b)),null!==i.position&&(b.setFromRotationMatrix(g),W.fromArray(i.position),W.applyQuaternion(b),n.position.add(W)),n.updateMatrixWorld(),A.near=e.near,j.near=e.near,A.far=e.far,j.far=e.far,A.matrixWorldInverse.fromArray(f.leftViewMatrix),j.matrixWorldInverse.fromArray(f.rightViewMatrix),h.getInverse(g),"stage"===x&&(A.matrixWorldInverse.multiply(h),j.matrixWorldInverse.multiply(h));var a=n.parent;null!==a&&(w.getInverse(a.matrixWorld),A.matrixWorldInverse.multiply(w),j.matrixWorldInverse.multiply(w)),A.matrixWorld.getInverse(A.matrixWorldInverse),j.matrixWorld.getInverse(j.matrixWorldInverse),A.projectionMatrix.fromArray(f.leftProjectionMatrix),j.projectionMatrix.fromArray(f.rightProjectionMatrix),(0,u.setProjectionFromUnion)(q,A,j);var o=p.getLayers();if(o.length){var s=o[0];null!==s.leftBounds&&4===s.leftBounds.length&&A.bounds.fromArray(s.leftBounds),null!==s.rightBounds&&4===s.rightBounds.length&&j.bounds.fromArray(s.rightBounds)}return function(){for(var e=0;e<v.length;e++){var r=v[e],t=F(e);if(void 0!==t&&void 0!==t.pose){if(null===t.pose)return;var i=t.pose;!1===i.hasPosition&&r.position.set(.2,-.6,-.05),null!==i.position&&r.position.fromArray(i.position),null!==i.orientation&&r.quaternion.fromArray(i.orientation),r.matrix.compose(r.position,r.quaternion,r.scale),r.matrix.premultiply(g),r.matrix.decompose(r.position,r.quaternion,r.scale),r.matrixWorldNeedsUpdate=!0,r.visible=!0;var n="Daydream Controller"===t.id?0:1;I[e]!==t.buttons[n].pressed&&(I[e]=t.buttons[n].pressed,!0===I[e]?r.dispatchEvent({type:"selectstart"}):(r.dispatchEvent({type:"selectend"}),r.dispatchEvent({type:"select"})))}else r.visible=!1}}(),q},this.getStandingMatrix=function(){return g},this.isPresenting=M;var D=new l.WebGLAnimation;this.setAnimationLoop=function(e){D.setAnimationLoop(e)},this.submitFrame=function(){M()&&p.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",C)}}
},{"../../objects/Group.js":"Wfuz","../../math/Matrix4.js":"Rio0","../../math/Vector2.js":"qn61","../../math/Vector3.js":"TKlu","../../math/Vector4.js":"Z46c","../../math/Quaternion.js":"eUMQ","../../cameras/ArrayCamera.js":"BHdb","../../cameras/PerspectiveCamera.js":"94uR","../webgl/WebGLAnimation.js":"oNxn","./WebVRUtils.js":"kSAc"}],"KZbU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebXRManager=s;var e=require("../../objects/Group.js"),t=require("../../math/Vector4.js"),r=require("../../cameras/ArrayCamera.js"),n=require("../../cameras/PerspectiveCamera.js"),i=require("../webgl/WebGLAnimation.js"),a=require("./WebVRUtils.js"),o=require("../../math/Matrix4.js");function s(s){var u=s.context,l=null,c=null,m=1,f=null,v="stage",p=null,d=[],g=[];function x(){return null!==c&&null!==f}var b=new n.PerspectiveCamera;b.layers.enable(1),b.viewport=new t.Vector4;var h=new n.PerspectiveCamera;h.layers.enable(2),h.viewport=new t.Vector4;var y=new r.ArrayCamera([b,h]);function w(e){var t=d[g.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function M(){s.setFramebuffer(null),s.setRenderTarget(s.getRenderTarget()),j.stop()}function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}y.layers.enable(1),y.layers.enable(2),this.enabled=!1,this.getController=function(t){var r=d[t];return void 0===r&&((r=new e.Group).matrixAutoUpdate=!1,r.visible=!1,d[t]=r),r},this.getDevice=function(){return l},this.setDevice=function(e){void 0!==e&&(l=e),e instanceof XRDevice&&u.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){m=e},this.setFrameOfReferenceType=function(e){v=e},this.setSession=function(e){null!==(c=e)&&(c.addEventListener("select",w),c.addEventListener("selectstart",w),c.addEventListener("selectend",w),c.addEventListener("end",M),c.baseLayer=new XRWebGLLayer(c,u,{framebufferScaleFactor:m}),c.requestFrameOfReference(v).then(function(e){f=e,s.setFramebuffer(c.baseLayer.framebuffer),j.setContext(c),j.start()}),g=c.getInputSources(),c.addEventListener("inputsourceschange",function(){g=c.getInputSources(),console.log(g);for(var e=0;e<d.length;e++){d[e].userData.inputSource=g[e]}}))},this.getCamera=function(e){if(x()){var t=e.parent,r=y.cameras;L(y,t);for(var n=0;n<r.length;n++)L(r[n],t);e.matrixWorld.copy(y.matrixWorld);for(var i=e.children,o=(n=0,i.length);n<o;n++)i[n].updateMatrixWorld(!0);return(0,a.setProjectionFromUnion)(y,b,h),y}return e},this.isPresenting=x;var W=null;var j=new i.WebGLAnimation;j.setAnimationLoop(function(e,t){if(null!==(p=t.getDevicePose(f)))for(var r=c.baseLayer,n=t.views,i=0;i<n.length;i++){var a=n[i],o=r.getViewport(a),s=p.getViewMatrix(a),u=y.cameras[i];u.matrix.fromArray(s).getInverse(u.matrix),u.projectionMatrix.fromArray(a.projectionMatrix),u.viewport.set(o.x,o.y,o.width,o.height),0===i&&y.matrix.copy(u.matrix)}for(i=0;i<d.length;i++){var l=d[i],m=g[i];if(m){var v=t.getInputPose(m,f);if(null!==v){"targetRay"in v?l.matrix.elements=v.targetRay.transformMatrix:"pointerMatrix"in v&&(l.matrix.elements=v.pointerMatrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.visible=!0;continue}}l.visible=!1}W&&W(e)}),this.setAnimationLoop=function(e){W=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("WebXRManager: getStandingMatrix() is no longer needed."),new o.Matrix4},this.submitFrame=function(){}}
},{"../../objects/Group.js":"Wfuz","../../math/Vector4.js":"Z46c","../../cameras/ArrayCamera.js":"BHdb","../../cameras/PerspectiveCamera.js":"94uR","../webgl/WebGLAnimation.js":"oNxn","./WebVRUtils.js":"kSAc","../../math/Matrix4.js":"Rio0"}],"wu1r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderer=F;var e=require("../constants.js"),t=require("../math/Math.js"),a=require("../textures/DataTexture.js"),r=require("../math/Frustum.js"),i=require("../math/Matrix4.js"),n=require("./shaders/ShaderLib.js"),s=require("./shaders/UniformsLib.js"),o=require("../math/Vector2.js"),l=require("../math/Vector3.js"),u=require("../math/Vector4.js"),p=require("./webgl/WebGLAnimation.js"),d=require("./webgl/WebGLAttributes.js"),c=require("./webgl/WebGLBackground.js"),m=require("./webgl/WebGLBufferRenderer.js"),h=require("./webgl/WebGLCapabilities.js"),g=require("./webgl/WebGLClipping.js"),f=require("./webgl/WebGLExtensions.js"),v=require("./webgl/WebGLGeometries.js"),b=require("./webgl/WebGLIndexedBufferRenderer.js"),M=require("./webgl/WebGLInfo.js"),L=require("./webgl/WebGLMorphtargets.js"),x=require("./webgl/WebGLObjects.js"),w=require("./webgl/WebGLPrograms.js"),S=require("./webgl/WebGLProperties.js"),R=require("./webgl/WebGLRenderLists.js"),A=require("./webgl/WebGLRenderStates.js"),T=require("./webgl/WebGLShadowMap.js"),y=require("./webgl/WebGLState.js"),W=require("./webgl/WebGLTextures.js"),_=require("./webgl/WebGLUniforms.js"),G=require("./webgl/WebGLUtils.js"),E=require("./webvr/WebVRManager.js"),B=require("./webvr/WebXRManager.js"),C=require("./shaders/UniformsUtils");function F(F){console.log("WebGLRenderer",e.REVISION);var I=void 0!==(F=F||{}).canvas?F.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),P=void 0!==F.context?F.context:null,D=void 0!==F.alpha&&F.alpha,U=void 0===F.depth||F.depth,V=void 0===F.stencil||F.stencil,j=void 0!==F.antialias&&F.antialias,O=void 0===F.premultipliedAlpha||F.premultipliedAlpha,q=void 0!==F.preserveDrawingBuffer&&F.preserveDrawingBuffer,N=void 0!==F.powerPreference?F.powerPreference:"default",z=null,k=null;this.domElement=I,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=e.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Y,X,H,J,K,Q,Z,$,ee,te,ae,re,ie,ne,se,oe,le,ue,pe=this,de=!1,ce=null,me=null,he=null,ge=-1,fe={geometry:null,program:null,wireframe:!1},ve=null,be=null,Me=new u.Vector4,Le=new u.Vector4,xe=null,we=0,Se=I.width,Re=I.height,Ae=1,Te=new u.Vector4(0,0,Se,Re),ye=new u.Vector4(0,0,Se,Re),We=!1,_e=new r.Frustum,Ge=new g.WebGLClipping,Ee=!1,Be=!1,Ce=new i.Matrix4,Fe=new l.Vector3;function Ie(){return null===me?Ae:1}try{var Pe={alpha:D,depth:U,stencil:V,antialias:j,premultipliedAlpha:O,preserveDrawingBuffer:q,powerPreference:N};if(I.addEventListener("webglcontextlost",je,!1),I.addEventListener("webglcontextrestored",Oe,!1),null===(Y=P||I.getContext("webgl",Pe)||I.getContext("experimental-webgl",Pe)))throw null!==I.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===Y.getShaderPrecisionFormat&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(et){throw console.error("WebGLRenderer: "+et.message),et}function De(){X=new f.WebGLExtensions(Y),(H=new h.WebGLCapabilities(Y,X,F)).isWebGL2||(X.get("WEBGL_depth_texture"),X.get("OES_texture_float"),X.get("OES_texture_half_float"),X.get("OES_texture_half_float_linear"),X.get("OES_standard_derivatives"),X.get("OES_element_index_uint"),X.get("ANGLE_instanced_arrays")),X.get("OES_texture_float_linear"),ue=new G.WebGLUtils(Y,X,H),(J=new y.WebGLState(Y,X,ue,H)).scissor(Le.copy(ye).multiplyScalar(Ae)),J.viewport(Me.copy(Te).multiplyScalar(Ae)),K=new M.WebGLInfo(Y),Q=new S.WebGLProperties,Z=new W.WebGLTextures(Y,X,J,Q,H,ue,K),$=new d.WebGLAttributes(Y),ee=new v.WebGLGeometries(Y,$,K),te=new x.WebGLObjects(ee,K),se=new L.WebGLMorphtargets(Y),ae=new w.WebGLPrograms(pe,X,H),re=new R.WebGLRenderLists,ie=new A.WebGLRenderStates,ne=new c.WebGLBackground(pe,J,te,O),oe=new m.WebGLBufferRenderer(Y,X,K,H),le=new b.WebGLIndexedBufferRenderer(Y,X,K,H),K.programs=ae.programs,pe.context=Y,pe.capabilities=H,pe.extensions=X,pe.properties=Q,pe.renderLists=re,pe.state=J,pe.info=K}De();var Ue=null;"undefined"!=typeof navigator&&(Ue="xr"in navigator?new B.WebXRManager(pe):new E.WebVRManager(pe)),this.vr=Ue;var Ve=new T.WebGLShadowMap(pe,te,H.maxTextureSize);function je(e){e.preventDefault(),console.log("WebGLRenderer: Context Lost."),de=!0}function Oe(){console.log("WebGLRenderer: Context Restored."),de=!1,De()}function qe(e){var t=e.target;t.removeEventListener("dispose",qe),function(e){Ne(e),Q.remove(e)}(t)}function Ne(e){var t=Q.get(e).program;e.program=void 0,void 0!==t&&ae.releaseProgram(t)}this.shadowMap=Ve,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){var e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(e){void 0!==e&&(Ae=e,this.setSize(Se,Re,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new o.Vector2),e.set(Se,Re)},this.setSize=function(e,t,a){Ue.isPresenting()?console.warn("WebGLRenderer: Can't change size while VR device is presenting."):(Se=e,Re=t,I.width=e*Ae,I.height=t*Ae,!1!==a&&(I.style.width=e+"px",I.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new o.Vector2),e.set(Se*Ae,Re*Ae)},this.setDrawingBufferSize=function(e,t,a){Se=e,Re=t,Ae=a,I.width=e*a,I.height=t*a,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new u.Vector4),e.copy(Me)},this.getViewport=function(e){return e.copy(Te)},this.setViewport=function(e,t,a,r){e.isVector4?Te.set(e.x,e.y,e.z,e.w):Te.set(e,t,a,r),J.viewport(Me.copy(Te).multiplyScalar(Ae))},this.getScissor=function(e){return e.copy(ye)},this.setScissor=function(e,t,a,r){e.isVector4?ye.set(e.x,e.y,e.z,e.w):ye.set(e,t,a,r),J.scissor(Le.copy(ye).multiplyScalar(Ae))},this.getScissorTest=function(){return We},this.setScissorTest=function(e){J.setScissorTest(We=e)},this.getClearColor=function(){return ne.getClearColor()},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(e,t,a){var r=0;(void 0===e||e)&&(r|=Y.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Y.DEPTH_BUFFER_BIT),(void 0===a||a)&&(r|=Y.STENCIL_BUFFER_BIT),Y.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){I.removeEventListener("webglcontextlost",je,!1),I.removeEventListener("webglcontextrestored",Oe,!1),re.dispose(),ie.dispose(),Q.dispose(),te.dispose(),Ue.dispose(),Ye.stop()},this.renderBufferImmediate=function(e,t){J.initAttributes();var a=Q.get(e);e.hasPositions&&!a.position&&(a.position=Y.createBuffer()),e.hasNormals&&!a.normal&&(a.normal=Y.createBuffer()),e.hasUvs&&!a.uv&&(a.uv=Y.createBuffer()),e.hasColors&&!a.color&&(a.color=Y.createBuffer());var r=t.getAttributes();e.hasPositions&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.position),Y.bufferData(Y.ARRAY_BUFFER,e.positionArray,Y.DYNAMIC_DRAW),J.enableAttribute(r.position),Y.vertexAttribPointer(r.position,3,Y.FLOAT,!1,0,0)),e.hasNormals&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.normal),Y.bufferData(Y.ARRAY_BUFFER,e.normalArray,Y.DYNAMIC_DRAW),J.enableAttribute(r.normal),Y.vertexAttribPointer(r.normal,3,Y.FLOAT,!1,0,0)),e.hasUvs&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.uv),Y.bufferData(Y.ARRAY_BUFFER,e.uvArray,Y.DYNAMIC_DRAW),J.enableAttribute(r.uv),Y.vertexAttribPointer(r.uv,2,Y.FLOAT,!1,0,0)),e.hasColors&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.color),Y.bufferData(Y.ARRAY_BUFFER,e.colorArray,Y.DYNAMIC_DRAW),J.enableAttribute(r.color),Y.vertexAttribPointer(r.color,3,Y.FLOAT,!1,0,0)),J.disableUnusedAttributes(),Y.drawArrays(Y.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(t,a,r,i,n,s){var o=n.isMesh&&n.matrixWorld.determinant()<0;J.setMaterial(i,o);var l=Ke(t,a,i,n),u=!1;fe.geometry===r.id&&fe.program===l.id&&fe.wireframe===(!0===i.wireframe)||(fe.geometry=r.id,fe.program=l.id,fe.wireframe=!0===i.wireframe,u=!0),n.morphTargetInfluences&&(se.update(n,r,i,l),u=!0);var p,d=r.index,c=r.attributes.position,m=1;!0===i.wireframe&&(d=ee.getWireframeAttribute(r),m=2);var h=oe;null!==d&&(p=$.get(d),(h=le).setIndex(p)),u&&(!function(e,t,a){if(a&&a.isInstancedBufferGeometry&&!H.isWebGL2&&null===X.get("ANGLE_instanced_arrays"))return void console.error("WebGLRenderer.setupVertexAttributes: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");J.initAttributes();var r=a.attributes,i=t.getAttributes(),n=e.defaultAttributeValues;for(var s in i){var o=i[s];if(o>=0){var l=r[s];if(void 0!==l){var u=l.normalized,p=l.itemSize,d=$.get(l);if(void 0===d)continue;var c=d.buffer,m=d.type,h=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var g=l.data,f=g.stride,v=l.offset;g&&g.isInstancedInterleavedBuffer?(J.enableAttributeAndDivisor(o,g.meshPerAttribute),void 0===a.maxInstancedCount&&(a.maxInstancedCount=g.meshPerAttribute*g.count)):J.enableAttribute(o),Y.bindBuffer(Y.ARRAY_BUFFER,c),Y.vertexAttribPointer(o,p,m,u,f*h,v*h)}else l.isInstancedBufferAttribute?(J.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===a.maxInstancedCount&&(a.maxInstancedCount=l.meshPerAttribute*l.count)):J.enableAttribute(o),Y.bindBuffer(Y.ARRAY_BUFFER,c),Y.vertexAttribPointer(o,p,m,u,0,0)}else if(void 0!==n){var b=n[s];if(void 0!==b)switch(b.length){case 2:Y.vertexAttrib2fv(o,b);break;case 3:Y.vertexAttrib3fv(o,b);break;case 4:Y.vertexAttrib4fv(o,b);break;default:Y.vertexAttrib1fv(o,b)}}}}J.disableUnusedAttributes()}(i,l,r),null!==d&&Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,p.buffer));var g=1/0;null!==d?g=d.count:void 0!==c&&(g=c.count);var f=r.drawRange.start*m,v=r.drawRange.count*m,b=null!==s?s.start*m:0,M=null!==s?s.count*m:1/0,L=Math.max(f,b),x=Math.min(g,f+v,b+M)-1,w=Math.max(0,x-L+1);if(0!==w){if(n.isMesh)if(!0===i.wireframe)J.setLineWidth(i.wireframeLinewidth*Ie()),h.setMode(Y.LINES);else switch(n.drawMode){case e.TrianglesDrawMode:h.setMode(Y.TRIANGLES);break;case e.TriangleStripDrawMode:h.setMode(Y.TRIANGLE_STRIP);break;case e.TriangleFanDrawMode:h.setMode(Y.TRIANGLE_FAN)}else if(n.isLine){var S=i.linewidth;void 0===S&&(S=1),J.setLineWidth(S*Ie()),n.isLineSegments?h.setMode(Y.LINES):n.isLineLoop?h.setMode(Y.LINE_LOOP):h.setMode(Y.LINE_STRIP)}else n.isPoints?h.setMode(Y.POINTS):n.isSprite&&h.setMode(Y.TRIANGLES);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&h.renderInstances(r,L,w):h.render(L,w)}},this.compile=function(e,t){(k=ie.get(e,t)).init(),e.traverse(function(e){e.isLight&&(k.pushLight(e),e.castShadow&&k.pushShadow(e))}),k.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var a=0;a<t.material.length;a++)Je(t.material[a],e.fog,t);else Je(t.material,e.fog,t)})};var ze=null;var ke,Ye=new p.WebGLAnimation;function Xe(e,t,a,r){for(var i=0,n=e.length;i<n;i++){var s=e[i],o=s.object,l=s.geometry,u=void 0===r?s.material:r,p=s.group;if(a.isArrayCamera){be=a;for(var d=a.cameras,c=0,m=d.length;c<m;c++){var h=d[c];if(o.layers.test(h.layers)){if("viewport"in h)J.viewport(Me.copy(h.viewport));else{var g=h.bounds,f=g.x*Se,v=g.y*Re,b=g.z*Se,M=g.w*Re;J.viewport(Me.set(f,v,b,M).multiplyScalar(Ae))}k.setupLights(h),He(o,t,h,l,u,p)}}}else be=null,He(o,t,a,l,u,p)}}function He(e,t,a,r,i,n){if(e.onBeforeRender(pe,t,a,r,i,n),k=ie.get(t,be||a),e.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){J.setMaterial(i);var s=Ke(a,t.fog,i,e);fe.geometry=null,fe.program=null,fe.wireframe=!1,function(e,t){e.render(function(e){pe.renderBufferImmediate(e,t)})}(e,s)}else pe.renderBufferDirect(a,t.fog,r,i,e,n);e.onAfterRender(pe,t,a,r,i,n),k=ie.get(t,be||a)}function Je(e,t,a){var r=Q.get(e),i=k.state.lights,s=k.state.shadowsArray,o=r.lightsHash,l=i.state.hash,u=ae.getParameters(e,i.state,s,t,Ge.numPlanes,Ge.numIntersection,a),p=ae.getProgramCode(e,u),d=r.program,c=!0;if(void 0===d)e.addEventListener("dispose",qe);else if(d.code!==p)Ne(e);else if(o.stateID!==l.stateID||o.directionalLength!==l.directionalLength||o.pointLength!==l.pointLength||o.spotLength!==l.spotLength||o.rectAreaLength!==l.rectAreaLength||o.hemiLength!==l.hemiLength||o.shadowsLength!==l.shadowsLength)o.stateID=l.stateID,o.directionalLength=l.directionalLength,o.pointLength=l.pointLength,o.spotLength=l.spotLength,o.rectAreaLength=l.rectAreaLength,o.hemiLength=l.hemiLength,o.shadowsLength=l.shadowsLength,c=!1;else{if(void 0!==u.shaderID)return;c=!1}if(c){if(u.shaderID){var m=n.ShaderLib[u.shaderID];r.shader={name:e.type,uniforms:(0,C.cloneUniforms)(m.uniforms),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,pe),p=ae.getProgramCode(e,u),d=ae.acquireProgram(e,r.shader,u,p),r.program=d,e.program=d}var h=d.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var g=0;g<pe.maxMorphTargets;g++)h["morphTarget"+g]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(g=0;g<pe.maxMorphNormals;g++)h["morphNormal"+g]>=0&&e.numSupportedMorphNormals++}var f=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Ge.numPlanes,r.numIntersection=Ge.numIntersection,f.clippingPlanes=Ge.uniform),r.fog=t,void 0===o&&(r.lightsHash=o={}),o.stateID=l.stateID,o.directionalLength=l.directionalLength,o.pointLength=l.pointLength,o.spotLength=l.spotLength,o.rectAreaLength=l.rectAreaLength,o.hemiLength=l.hemiLength,o.shadowsLength=l.shadowsLength,e.lights&&(f.ambientLightColor.value=i.state.ambient,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),b=_.WebGLUniforms.seqWithValue(v.seq,f);r.uniformsList=b}function Ke(r,i,n,o){we=0;var l=Q.get(n),u=k.state.lights,p=l.lightsHash,d=u.state.hash;if(Ee&&(Be||r!==ve)){var c=r===ve&&n.id===ge;Ge.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,r,l,c)}!1===n.needsUpdate&&(void 0===l.program?n.needsUpdate=!0:n.fog&&l.fog!==i?n.needsUpdate=!0:(!n.lights||p.stateID===d.stateID&&p.directionalLength===d.directionalLength&&p.pointLength===d.pointLength&&p.spotLength===d.spotLength&&p.rectAreaLength===d.rectAreaLength&&p.hemiLength===d.hemiLength&&p.shadowsLength===d.shadowsLength)&&(void 0===l.numClippingPlanes||l.numClippingPlanes===Ge.numPlanes&&l.numIntersection===Ge.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(Je(n,i,o),n.needsUpdate=!1);var m,h,g=!1,f=!1,v=!1,b=l.program,M=b.getUniforms(),L=l.shader.uniforms;if(J.useProgram(b.program)&&(g=!0,f=!0,v=!0),n.id!==ge&&(ge=n.id,f=!0),g||ve!==r){if(M.setValue(Y,"projectionMatrix",r.projectionMatrix),H.logarithmicDepthBuffer&&M.setValue(Y,"logDepthBufFC",2/(Math.log(r.far+1)/Math.LN2)),ve!==r&&(ve=r,f=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var x=M.map.cameraPosition;void 0!==x&&x.setValue(Y,Fe.setFromMatrixPosition(r.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&M.setValue(Y,"viewMatrix",r.matrixWorldInverse)}if(n.skinning){M.setOptional(Y,o,"bindMatrix"),M.setOptional(Y,o,"bindMatrixInverse");var w=o.skeleton;if(w){var S=w.bones;if(H.floatVertexTextures){if(void 0===w.boneTexture){var R=Math.sqrt(4*S.length);R=t._Math.ceilPowerOfTwo(R),R=Math.max(R,4);var A=new Float32Array(R*R*4);A.set(w.boneMatrices);var T=new a.DataTexture(A,R,R,e.RGBAFormat,e.FloatType);T.needsUpdate=!0,w.boneMatrices=A,w.boneTexture=T,w.boneTextureSize=R}M.setValue(Y,"boneTexture",w.boneTexture),M.setValue(Y,"boneTextureSize",w.boneTextureSize)}else M.setOptional(Y,w,"boneMatrices")}}return f&&(M.setValue(Y,"toneMappingExposure",pe.toneMappingExposure),M.setValue(Y,"toneMappingWhitePoint",pe.toneMappingWhitePoint),n.lights&&(h=v,(m=L).ambientLightColor.needsUpdate=h,m.directionalLights.needsUpdate=h,m.pointLights.needsUpdate=h,m.spotLights.needsUpdate=h,m.rectAreaLights.needsUpdate=h,m.hemisphereLights.needsUpdate=h),i&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(L,i),n.isMeshBasicMaterial?Qe(L,n):n.isMeshLambertMaterial?(Qe(L,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(L,n)):n.isMeshPhongMaterial?(Qe(L,n),n.isMeshToonMaterial?function(e,t){Ze(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(L,n):Ze(L,n)):n.isMeshStandardMaterial?(Qe(L,n),n.isMeshPhysicalMaterial?function(e,t){$e(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(L,n):$e(L,n)):n.isMeshMatcapMaterial?(Qe(L,n),function(t,a){a.matcap&&(t.matcap.value=a.matcap);a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1));a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate());a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}(L,n)):n.isMeshDepthMaterial?(Qe(L,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(L,n)):n.isMeshDistanceMaterial?(Qe(L,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(L,n)):n.isMeshNormalMaterial?(Qe(L,n),function(t,a){a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1));a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate());a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}(L,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(L,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(L,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Ae,e.scale.value=.5*Re,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(L,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(L,n):n.isShadowMaterial&&(L.color.value=n.color,L.opacity.value=n.opacity),void 0!==L.ltc_1&&(L.ltc_1.value=s.UniformsLib.LTC_1),void 0!==L.ltc_2&&(L.ltc_2.value=s.UniformsLib.LTC_2),_.WebGLUniforms.upload(Y,l.uniformsList,L,pe)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(_.WebGLUniforms.upload(Y,l.uniformsList,L,pe),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&M.setValue(Y,"center",o.center),M.setValue(Y,"modelViewMatrix",o.modelViewMatrix),M.setValue(Y,"normalMatrix",o.normalMatrix),M.setValue(Y,"modelMatrix",o.matrixWorld),b}function Qe(e,t){var a;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Q.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?a=t.map:t.specularMap?a=t.specularMap:t.displacementMap?a=t.displacementMap:t.normalMap?a=t.normalMap:t.bumpMap?a=t.bumpMap:t.roughnessMap?a=t.roughnessMap:t.metalnessMap?a=t.metalnessMap:t.alphaMap?a=t.alphaMap:t.emissiveMap&&(a=t.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}function Ze(t,a){t.specular.value=a.specular,t.shininess.value=Math.max(a.shininess,1e-4),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}function $e(t,a){t.roughness.value=a.roughness,t.metalness.value=a.metalness,a.roughnessMap&&(t.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(t.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias),a.envMap&&(t.envMapIntensity.value=a.envMapIntensity)}Ye.setAnimationLoop(function(e){Ue.isPresenting()||ze&&ze(e)}),"undefined"!=typeof window&&Ye.setContext(window),this.setAnimationLoop=function(e){ze=e,Ue.setAnimationLoop(e),Ye.start()},this.render=function(e,t){var a,r;if(void 0!==arguments[2]&&(console.warn("WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),a=arguments[2]),void 0!==arguments[3]&&(console.warn("WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!de){fe.geometry=null,fe.program=null,fe.wireframe=!1,ge=-1,ve=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ue.enabled&&(t=Ue.getCamera(t)),(k=ie.get(e,t)).init(),e.onBeforeRender(pe,e,t,a||me),Ce.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),_e.setFromMatrix(Ce),Be=this.localClippingEnabled,Ee=Ge.init(this.clippingPlanes,Be,t),(z=re.get(e,t)).init(),function e(t,a,r,i){if(!1===t.visible)return;var n=t.layers.test(a.layers);if(n)if(t.isGroup)r=t.renderOrder;else if(t.isLight)k.pushLight(t),t.castShadow&&k.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||_e.intersectsSprite(t)){i&&Fe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ce);var s=te.update(t),o=t.material;z.push(t,s,o,r,Fe.z,null)}}else if(t.isImmediateRenderObject)i&&Fe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ce),z.push(t,null,t.material,r,Fe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||_e.intersectsObject(t))){i&&Fe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ce);var s=te.update(t),o=t.material;if(Array.isArray(o))for(var l=s.groups,u=0,p=l.length;u<p;u++){var d=l[u],c=o[d.materialIndex];c&&c.visible&&z.push(t,s,c,r,Fe.z,d)}else o.visible&&z.push(t,s,o,r,Fe.z,null)}var m=t.children;for(var u=0,p=m.length;u<p;u++)e(m[u],a,r,i)}(e,t,0,pe.sortObjects),!0===pe.sortObjects&&z.sort(),Ee&&Ge.beginShadows();var i=k.state.shadowsArray;Ve.render(i,e,t),k.setupLights(t),Ee&&Ge.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),ne.render(z,e,t,r);var n=z.opaque,s=z.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;n.length&&Xe(n,e,t,o),s.length&&Xe(s,e,t,o)}else n.length&&Xe(n,e,t),s.length&&Xe(s,e,t);null!==me&&(Z.updateRenderTargetMipmap(me),Z.updateMultisampleRenderTarget(me)),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),e.onAfterRender(pe,e,t),Ue.enabled&&Ue.submitFrame(),z=null,k=null}}else console.error("WebGLRenderer.render: camera is not an instance of Camera.")},this.allocTextureUnit=function(){var e=we;return e>=H.maxTextures&&console.warn("WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+H.maxTextures),we+=1,e},this.setTexture2D=(ke=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ke||(console.warn("WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ke=!0),e=e.texture),Z.setTexture2D(e,t)}),this.setTexture3D=function(e,t){Z.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,a){e||(console.warn("WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Z.setTexture2D(t,a)}}(),this.setTextureCube=function(){var e=!1;return function(t,a){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Z.setTextureCube(t,a):Z.setTextureCubeDynamic(t,a)}}(),this.setFramebuffer=function(e){ce=e},this.getRenderTarget=function(){return me},this.setRenderTarget=function(e,t,a){me=e,e&&void 0===Q.get(e).__webglFramebuffer&&Z.setupRenderTarget(e);var r=ce,i=!1;if(e){var n=Q.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=n[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?Q.get(e).__webglMultisampledFramebuffer:n,Me.copy(e.viewport),Le.copy(e.scissor),xe=e.scissorTest}else Me.copy(Te).multiplyScalar(Ae),Le.copy(ye).multiplyScalar(Ae),xe=We;if(he!==r&&(Y.bindFramebuffer(Y.FRAMEBUFFER,r),he=r),J.viewport(Me),J.scissor(Le),J.setScissorTest(xe),i){var s=Q.get(e.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+t||0,s.__webglTexture,a||0)}},this.readRenderTargetPixels=function(t,a,r,i,n,s){if(t&&t.isWebGLRenderTarget){var o=Q.get(t).__webglFramebuffer;if(o){var l=!1;o!==he&&(Y.bindFramebuffer(Y.FRAMEBUFFER,o),l=!0);try{var u=t.texture,p=u.format,d=u.type;if(p!==e.RGBAFormat&&ue.convert(p)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(d===e.UnsignedByteType||ue.convert(d)===Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_TYPE)||d===e.FloatType&&(H.isWebGL2||X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float"))||d===e.HalfFloatType&&(H.isWebGL2?X.get("EXT_color_buffer_float"):X.get("EXT_color_buffer_half_float"))))return void console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Y.checkFramebufferStatus(Y.FRAMEBUFFER)===Y.FRAMEBUFFER_COMPLETE?a>=0&&a<=t.width-i&&r>=0&&r<=t.height-n&&Y.readPixels(a,r,i,n,ue.convert(p),ue.convert(d),s):console.error("WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&Y.bindFramebuffer(Y.FRAMEBUFFER,he)}}}else console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,a){var r=t.image.width,i=t.image.height,n=ue.convert(t.format);this.setTexture2D(t,0),Y.copyTexImage2D(Y.TEXTURE_2D,a||0,n,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,a,r){var i=t.image.width,n=t.image.height,s=ue.convert(a.format),o=ue.convert(a.type);this.setTexture2D(a,0),t.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,r||0,e.x,e.y,i,n,s,o,t.image.data):Y.texSubImage2D(Y.TEXTURE_2D,r||0,e.x,e.y,s,o,t.image)}}
},{"../constants.js":"HNhV","../math/Math.js":"J7M1","../textures/DataTexture.js":"pcP+","../math/Frustum.js":"o6Yv","../math/Matrix4.js":"Rio0","./shaders/ShaderLib.js":"HCi4","./shaders/UniformsLib.js":"S/ew","../math/Vector2.js":"qn61","../math/Vector3.js":"TKlu","../math/Vector4.js":"Z46c","./webgl/WebGLAnimation.js":"oNxn","./webgl/WebGLAttributes.js":"JDIB","./webgl/WebGLBackground.js":"bNFb","./webgl/WebGLBufferRenderer.js":"y28I","./webgl/WebGLCapabilities.js":"lW1H","./webgl/WebGLClipping.js":"2oX8","./webgl/WebGLExtensions.js":"WGJ9","./webgl/WebGLGeometries.js":"qepd","./webgl/WebGLIndexedBufferRenderer.js":"FX0g","./webgl/WebGLInfo.js":"FN4p","./webgl/WebGLMorphtargets.js":"5ZjW","./webgl/WebGLObjects.js":"gbzW","./webgl/WebGLPrograms.js":"An1S","./webgl/WebGLProperties.js":"gfyh","./webgl/WebGLRenderLists.js":"wnqm","./webgl/WebGLRenderStates.js":"7VXK","./webgl/WebGLShadowMap.js":"S3Z1","./webgl/WebGLState.js":"JZYE","./webgl/WebGLTextures.js":"K2jh","./webgl/WebGLUniforms.js":"JHYB","./webgl/WebGLUtils.js":"DsSK","./webvr/WebVRManager.js":"KYH7","./webvr/WebXRManager.js":"KZbU","./shaders/UniformsUtils":"cR4K"}],"nIA+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawShaderMaterial=t;var e=require("./ShaderMaterial.js");function t(t){e.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"}t.prototype=Object.create(e.ShaderMaterial.prototype),t.prototype.constructor=t,t.prototype.isRawShaderMaterial=!0;
},{"./ShaderMaterial.js":"xLVs"}],"PQ83":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pass=void 0;var e=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};exports.Pass=e,Object.assign(e.prototype,{setSize:function(e,s){},render:function(e,s,r,t,n){console.error("Pass: .render() must be implemented in derived pass.")}});
},{}],"ncbM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderPass=void 0;var e=require("./Pass.js"),r=function(r,t,a,s,l){e.Pass.call(this),this.scene=r,this.camera=t,this.overrideMaterial=a,this.clearColor=s,this.clearAlpha=void 0!==l?l:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};exports.RenderPass=r,r.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:r,render:function(e,r,t,a,s){var l,o,i=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(l=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(l,o),this.scene.overrideMaterial=null,e.autoClear=i}});
},{"./Pass.js":"PQ83"}],"nvGX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderPass=void 0;var e=require("./Pass.js"),r=require("../materials/ShaderMaterial.js"),s=require("../cameras/OrthographicCamera.js"),t=require("../scenes/Scene.js"),a=require("../objects/Mesh.js"),i=require("../geometries/PlaneGeometry.js"),n=require("../renderers/shaders/UniformsUtils.js"),h=function(h,u){e.Pass.call(this),this.textureID=void 0!==u?u:"tDiffuse",h instanceof r.ShaderMaterial?(this.uniforms=h.uniforms,this.material=h):h&&(this.uniforms=n.UniformsUtils.clone(h.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},h.defines),uniforms:this.uniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader})),this.camera=new s.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new t.Scene,this.quad=new a.Mesh(new i.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};exports.ShaderPass=h,h.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:h,render:function(e,r,s,t,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=s.texture),this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera))}});
},{"./Pass.js":"PQ83","../materials/ShaderMaterial.js":"xLVs","../cameras/OrthographicCamera.js":"YP16","../scenes/Scene.js":"Baxu","../objects/Mesh.js":"QChY","../geometries/PlaneGeometry.js":"Fpft","../renderers/shaders/UniformsUtils.js":"cR4K"}],"AhYo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DigitalGlitch=void 0;var e={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.5);","float ys = floor(gl_FragCoord.y / 0.5);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p + offset);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")};exports.DigitalGlitch=e;
},{}],"AQo5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlitchPass=void 0;var e=require("three-full/sources/postprocessing/Pass.js"),r=require("three-full/sources/materials/ShaderMaterial.js"),t=require("three-full/sources/cameras/OrthographicCamera.js"),s=require("three-full/sources/scenes/Scene.js"),a=require("three-full/sources/objects/Mesh.js"),i=require("three-full/sources/geometries/PlaneGeometry.js"),n=require("three-full/sources/textures/DataTexture.js"),h=require("three-full/sources/constants.js"),u=require("./DigitalGlitchMod.js"),o=require("three-full/sources/renderers/shaders/UniformsUtils.js"),l=require("three-full/sources/math/Math.js"),d=function(n){e.Pass.call(this),void 0===u.DigitalGlitch&&console.error("GlitchPass relies on DigitalGlitch");var h=u.DigitalGlitch;this.uniforms=o.UniformsUtils.clone(h.uniforms),null==n&&(n=64),this.uniforms.tDisp.value=this.generateHeightmap(n),this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}),this.camera=new t.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new s.Scene,this.quad=new a.Mesh(new i.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.goWild=!1,this.curF=0,this.generateTrigger()};exports.GlitchPass=d,d.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:d,render:function(e,r,t,s,a){this.uniforms.tDiffuse.value=t.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=l._Math.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=l._Math.randFloat(-1,1),this.uniforms.seed_y.value=l._Math.randFloat(-1,1),this.uniforms.distortion_x.value=l._Math.randFloat(0,1),this.uniforms.distortion_y.value=l._Math.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=l._Math.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=l._Math.randFloat(0,1),this.uniforms.distortion_y.value=l._Math.randFloat(0,1),this.uniforms.seed_x.value=l._Math.randFloat(-.3,.3),this.uniforms.seed_y.value=l._Math.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera))},generateTrigger:function(){this.randX=l._Math.randInt(120,240)},generateHeightmap:function(e){for(var r=new Float32Array(e*e*3),t=e*e,s=0;s<t;s++){var a=l._Math.randFloat(0,1);r[3*s+0]=a,r[3*s+1]=a,r[3*s+2]=a}var i=new n.DataTexture(r,e,e,h.RGBFormat,h.FloatType);return i.needsUpdate=!0,i}});
},{"three-full/sources/postprocessing/Pass.js":"PQ83","three-full/sources/materials/ShaderMaterial.js":"xLVs","three-full/sources/cameras/OrthographicCamera.js":"YP16","three-full/sources/scenes/Scene.js":"Baxu","three-full/sources/objects/Mesh.js":"QChY","three-full/sources/geometries/PlaneGeometry.js":"Fpft","three-full/sources/textures/DataTexture.js":"pcP+","three-full/sources/constants.js":"HNhV","./DigitalGlitchMod.js":"AhYo","three-full/sources/renderers/shaders/UniformsUtils.js":"cR4K","three-full/sources/math/Math.js":"J7M1"}],"IiqS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LuminosityHighPassShader=void 0;var e=require("../math/Color.js"),o={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new e.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")};exports.LuminosityHighPassShader=o;
},{"../math/Color.js":"WOLJ"}],"oZx3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CopyShader=void 0;var e={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};exports.CopyShader=e;
},{}],"OSJR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnrealBloomPass=void 0;var t=require("./Pass.js"),e=require("../math/Vector2.js"),r=require("../math/Color.js"),i=require("../renderers/WebGLRenderTarget.js"),a=require("../materials/ShaderMaterial.js"),s=require("../math/Vector3.js"),o=require("../cameras/OrthographicCamera.js"),l=require("../scenes/Scene.js"),n=require("../materials/MeshBasicMaterial.js"),u=require("../objects/Mesh.js"),h=require("../geometries/PlaneGeometry.js"),m=require("../constants.js"),c=require("../shaders/LuminosityHighPassShader.js"),d=require("../renderers/shaders/UniformsUtils.js"),v=require("../shaders/CopyShader.js"),f=function(f,g,p,T){t.Pass.call(this),this.strength=void 0!==g?g:1,this.radius=p,this.threshold=T,this.resolution=void 0!==f?new e.Vector2(f.x,f.y):new e.Vector2(256,256),this.clearColor=new r.Color(0,0,0);var x={minFilter:m.LinearFilter,magFilter:m.LinearFilter,format:m.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var b=Math.round(this.resolution.x/2),M=Math.round(this.resolution.y/2);this.renderTargetBright=new i.WebGLRenderTarget(b,M,x),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var S=0;S<this.nMips;S++){var C=new i.WebGLRenderTarget(b,M,x);C.texture.name="UnrealBloomPass.h"+S,C.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(C);var U=new i.WebGLRenderTarget(b,M,x);U.texture.name="UnrealBloomPass.v"+S,U.texture.generateMipmaps=!1,this.renderTargetsVertical.push(U),b=Math.round(b/2),M=Math.round(M/2)}void 0===c.LuminosityHighPassShader&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var B=c.LuminosityHighPassShader;this.highPassUniforms=d.UniformsUtils.clone(B.uniforms),this.highPassUniforms.luminosityThreshold.value=T,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new a.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var w=[3,5,7,9,11];for(b=Math.round(this.resolution.x/2),M=Math.round(this.resolution.y/2),S=0;S<this.nMips;S++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(w[S])),this.separableBlurMaterials[S].uniforms.texSize.value=new e.Vector2(b,M),b=Math.round(b/2),M=Math.round(M/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=g,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1),new s.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===v.CopyShader&&console.error("BloomPass relies on CopyShader");var P=v.CopyShader;this.copyUniforms=d.UniformsUtils.clone(P.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new a.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,blending:m.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new r.Color,this.oldClearAlpha=1,this.camera=new o.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new l.Scene,this.basic=new n.MeshBasicMaterial,this.quad=new u.Mesh(new h.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};exports.UnrealBloomPass=f,f.prototype=Object.assign(Object.create(t.Pass.prototype),{constructor:f,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,r){var i=Math.round(t/2),a=Math.round(r/2);this.renderTargetBright.setSize(i,a);for(var s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,a),this.renderTargetsVertical[s].setSize(i,a),this.separableBlurMaterials[s].uniforms.texSize.value=new e.Vector2(i,a),i=Math.round(i/2),a=Math.round(a/2)},render:function(t,e,r,i,a){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),a&&t.context.disable(t.context.STENCIL_TEST),this.renderToScreen&&(this.quad.material=this.basic,this.basic.map=r.texture,t.setRenderTarget(null),t.clear(),t.render(this.scene,this.camera)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),t.render(this.scene,this.camera);for(var o=this.renderTargetBright,l=0;l<this.nMips;l++)this.quad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[l].uniforms.direction.value=f.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[l]),t.clear(),t.render(this.scene,this.camera),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=f.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[l]),t.clear(),t.render(this.scene,this.camera),o=this.renderTargetsVertical[l];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),t.render(this.scene,this.camera),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&t.context.enable(t.context.STENCIL_TEST),this.renderToScreen?(t.setRenderTarget(null),t.render(this.scene,this.camera)):(t.setRenderTarget(r),t.render(this.scene,this.camera)),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=s},getSeperableBlurMaterial:function(t){return new a.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new e.Vector2(.5,.5)},direction:{value:new e.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new a.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),f.BlurDirectionX=new e.Vector2(1,0),f.BlurDirectionY=new e.Vector2(0,1);
},{"./Pass.js":"PQ83","../math/Vector2.js":"qn61","../math/Color.js":"WOLJ","../renderers/WebGLRenderTarget.js":"9FdC","../materials/ShaderMaterial.js":"xLVs","../math/Vector3.js":"TKlu","../cameras/OrthographicCamera.js":"YP16","../scenes/Scene.js":"Baxu","../materials/MeshBasicMaterial.js":"5pcm","../objects/Mesh.js":"QChY","../geometries/PlaneGeometry.js":"Fpft","../constants.js":"HNhV","../shaders/LuminosityHighPassShader.js":"IiqS","../renderers/shaders/UniformsUtils.js":"cR4K","../shaders/CopyShader.js":"oZx3"}],"11b3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClearMaskPass=exports.MaskPass=void 0;var e=require("./Pass.js"),s=function(s,t){e.Pass.call(this),this.scene=s,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};exports.MaskPass=s,s.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:s,render:function(e,s,t,r,a){var c,n,o=e.context,i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(c=0,n=1):(c=1,n=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),i.buffers.stencil.setFunc(o.ALWAYS,c,4294967295),i.buffers.stencil.setClear(n),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setFunc(o.EQUAL,1,4294967295),i.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP)}});var t=function(){e.Pass.call(this),this.needsSwap=!1};exports.ClearMaskPass=t,t.prototype=Object.create(e.Pass.prototype),Object.assign(t.prototype,{render:function(e,s,t,r,a){e.state.buffers.stencil.setTest(!1)}});
},{"./Pass.js":"PQ83"}],"K0YY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EffectComposer=void 0;var e=require("../math/Vector2.js"),r=require("../renderers/WebGLRenderTarget.js"),s=require("./ShaderPass.js"),t=require("./MaskPass.js"),i=require("../constants.js"),a=require("../shaders/CopyShader.js"),n=function(t,n){if(this.renderer=t,void 0===n){var o={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},h=t.getDrawingBufferSize(new e.Vector2);(n=new r.WebGLRenderTarget(h.width,h.height,o)).texture.name="EffectComposer.rt1"}this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===a.CopyShader&&console.error("EffectComposer relies on CopyShader"),void 0===s.ShaderPass&&console.error("EffectComposer relies on ShaderPass"),this.copyPass=new s.ShaderPass(a.CopyShader),this._previousFrameTime=Date.now()};exports.EffectComposer=n,Object.assign(n.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(r){this.passes.push(r);var s=this.renderer.getDrawingBufferSize(new e.Vector2);r.setSize(s.width,s.height)},insertPass:function(e,r){this.passes.splice(r,0,e)},render:function(e){void 0===e&&(e=.001*(Date.now()-this._previousFrameTime)),this._previousFrameTime=Date.now();var r,s,i=this.renderer.getRenderTarget(),a=!1,n=this.passes.length;for(s=0;s<n;s++)if(!1!==(r=this.passes[s]).enabled){if(r.render(this.renderer,this.writeBuffer,this.readBuffer,e,a),r.needsSwap){if(a){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==t.MaskPass&&(r instanceof t.MaskPass?a=!0:r instanceof t.ClearMaskPass&&(a=!1))}this.renderer.setRenderTarget(i)},reset:function(r){if(void 0===r){var s=this.renderer.getDrawingBufferSize(new e.Vector2);(r=this.renderTarget1.clone()).setSize(s.width,s.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,r){this.renderTarget1.setSize(e,r),this.renderTarget2.setSize(e,r);for(var s=0;s<this.passes.length;s++)this.passes[s].setSize(e,r)}});
},{"../math/Vector2.js":"qn61","../renderers/WebGLRenderTarget.js":"9FdC","./ShaderPass.js":"nvGX","./MaskPass.js":"11b3","../constants.js":"HNhV","../shaders/CopyShader.js":"oZx3"}],"7r8k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilmShader=void 0;var e={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float dx = rand( vUv + time );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")};exports.FilmShader=e;
},{}],"lSta":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilmPass=void 0;var e=require("./Pass.js"),r=require("../materials/ShaderMaterial.js"),s=require("../cameras/OrthographicCamera.js"),i=require("../scenes/Scene.js"),t=require("../objects/Mesh.js"),a=require("../geometries/PlaneGeometry.js"),n=require("../shaders/FilmShader.js"),o=require("../renderers/shaders/UniformsUtils.js"),u=function(u,h,l,m){e.Pass.call(this),void 0===n.FilmShader&&console.error("FilmPass relies on FilmShader");var d=n.FilmShader;this.uniforms=o.UniformsUtils.clone(d.uniforms),this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}),void 0!==m&&(this.uniforms.grayscale.value=m),void 0!==u&&(this.uniforms.nIntensity.value=u),void 0!==h&&(this.uniforms.sIntensity.value=h),void 0!==l&&(this.uniforms.sCount.value=l),this.camera=new s.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new i.Scene,this.quad=new t.Mesh(new a.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};exports.FilmPass=u,u.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:u,render:function(e,r,s,i,t){this.uniforms.tDiffuse.value=s.texture,this.uniforms.time.value+=i,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera))}});
},{"./Pass.js":"PQ83","../materials/ShaderMaterial.js":"xLVs","../cameras/OrthographicCamera.js":"YP16","../scenes/Scene.js":"Baxu","../objects/Mesh.js":"QChY","../geometries/PlaneGeometry.js":"Fpft","../shaders/FilmShader.js":"7r8k","../renderers/shaders/UniformsUtils.js":"cR4K"}],"hk3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FXAAShader=void 0;var e=require("../math/Vector2.js"),a={uniforms:{tDiffuse:{value:null},resolution:{value:new e.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","","","","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","","#if (FXAA_PC == 1)","","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","","                    }","                    #endif","","                }","                #endif","","            }","            #endif","","        }","        #endif","","    }","    #endif","","                        }","                        #endif","","                    }","                    #endif","","                }","                #endif","","            }","            #endif","","        }","        #endif","","    }","","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")};exports.FXAAShader=a;
},{"../math/Vector2.js":"qn61"}],"RFzX":[function(require,module,exports) {
"use strict";function e(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Interpolant=e,Object.assign(e.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{var n;r:{i:if(!(e<i)){for(var s=r+2;;){if(void 0===i){if(e<a)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,a)}if(r===s)break;if(a=i,e<(i=t[++r]))break t}n=t.length;break r}if(e>=a)break e;var o=t[1];e<o&&(r=2,a=o);for(s=r-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===s)break;if(i=a,e>=(a=t[--r-1]))break t}n=r,r=0}for(;r<n;){var h=r+n>>>1;e<t[h]?n=h:r=h+1}if(i=t[r],void 0===(a=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,a,e)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i,n=0;n!==i;++n)t[n]=r[a+n];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(e.prototype,{beforeStart_:e.prototype.copySampleValue_,afterEnd_:e.prototype.copySampleValue_});
},{}],"H4l1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cache=void 0;var e={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};exports.Cache=e;
},{}],"Eb6M":[function(require,module,exports) {
"use strict";function o(o,t,r){var n=this,i=!1,e=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=o,this.onProgress=t,this.onError=r,this.itemStart=function(o){s++,!1===i&&void 0!==n.onStart&&n.onStart(o,e,s),i=!0},this.itemEnd=function(o){e++,void 0!==n.onProgress&&n.onProgress(o,e,s),e===s&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(o){void 0!==n.onError&&n.onError(o)},this.resolveURL=function(o){return a?a(o):o},this.setURLModifier=function(o){return a=o,this}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadingManager=o,exports.DefaultLoadingManager=void 0;var t=new o;exports.DefaultLoadingManager=t;
},{}],"4dVX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileLoader=n;var e=require("./Cache.js"),r=require("./LoadingManager.js"),t={};function n(e){this.manager=void 0!==e?e:r.DefaultLoadingManager}Object.assign(n.prototype,{load:function(r,n,a,s){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);var o=this,i=e.Cache.get(r);if(void 0!==i)return o.manager.itemStart(r),setTimeout(function(){n&&n(i),o.manager.itemEnd(r)},0),i;if(void 0===t[r]){var d=r.match(/^data:(.*?)(;base64)?,(.*)$/);if(d){var h=d[1],u=!!d[2],m=d[3];m=decodeURIComponent(m),u&&(m=atob(m));try{var v,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var f=new Uint8Array(m.length),g=0;g<m.length;g++)f[g]=m.charCodeAt(g);v="blob"===p?new Blob([f.buffer],{type:h}):f.buffer;break;case"document":var c=new DOMParser;v=c.parseFromString(m,h);break;case"json":v=JSON.parse(m);break;default:v=m}setTimeout(function(){n&&n(v),o.manager.itemEnd(r)},0)}catch(y){setTimeout(function(){s&&s(y),o.manager.itemError(r),o.manager.itemEnd(r)},0)}}else{t[r]=[],t[r].push({onLoad:n,onProgress:a,onError:s});var l=new XMLHttpRequest;for(var E in l.open("GET",r,!0),l.addEventListener("load",function(n){var a=this.response;e.Cache.add(r,a);var s=t[r];if(delete t[r],200===this.status||0===this.status){0===this.status&&console.warn("FileLoader: HTTP Status 0 received.");for(var i=0,d=s.length;i<d;i++){(h=s[i]).onLoad&&h.onLoad(a)}o.manager.itemEnd(r)}else{for(i=0,d=s.length;i<d;i++){var h;(h=s[i]).onError&&h.onError(n)}o.manager.itemError(r),o.manager.itemEnd(r)}},!1),l.addEventListener("progress",function(e){for(var n=t[r],a=0,s=n.length;a<s;a++){var o=n[a];o.onProgress&&o.onProgress(e)}},!1),l.addEventListener("error",function(e){var n=t[r];delete t[r];for(var a=0,s=n.length;a<s;a++){var i=n[a];i.onError&&i.onError(e)}o.manager.itemError(r),o.manager.itemEnd(r)},!1),l.addEventListener("abort",function(e){var n=t[r];delete t[r];for(var a=0,s=n.length;a<s;a++){var i=n[a];i.onError&&i.onError(e)}o.manager.itemError(r),o.manager.itemEnd(r)},!1),void 0!==this.responseType&&(l.responseType=this.responseType),void 0!==this.withCredentials&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)l.setRequestHeader(E,this.requestHeader[E]);l.send(null)}return o.manager.itemStart(r),l}t[r].push({onLoad:n,onProgress:a,onError:s})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});
},{"./Cache.js":"H4l1","./LoadingManager.js":"Eb6M"}],"02yY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompressedTexture=t;var e=require("./Texture.js");function t(t,r,s,p,o,i,u,a,c,h,l,x){e.Texture.call(this,null,i,u,a,c,h,p,o,l,x),this.image={width:r,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}t.prototype=Object.create(e.Texture.prototype),t.prototype.constructor=t,t.prototype.isCompressedTexture=!0;
},{"./Texture.js":"05Bz"}],"Ns5v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompressedTextureLoader=i;var e=require("../constants.js"),t=require("./FileLoader.js"),r=require("../textures/CompressedTexture.js"),a=require("./LoadingManager.js");function i(e){this.manager=void 0!==e?e:a.DefaultLoadingManager,this._parser=null}Object.assign(i.prototype,{load:function(a,i,s,m){var p=this,o=[],n=new r.CompressedTexture;n.image=o;var h=new t.FileLoader(this.manager);function u(t){h.load(a[t],function(r){var a=p._parser(r,!0);o[t]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},6===(d+=1)&&(1===a.mipmapCount&&(n.minFilter=e.LinearFilter),n.format=a.format,n.needsUpdate=!0,i&&i(n))},s,m)}if(h.setPath(this.path),h.setResponseType("arraybuffer"),Array.isArray(a))for(var d=0,f=0,g=a.length;f<g;++f)u(f);else h.load(a,function(t){var r=p._parser(t,!0);if(r.isCubemap)for(var a=r.mipmaps.length/r.mipmapCount,s=0;s<a;s++){o[s]={mipmaps:[]};for(var m=0;m<r.mipmapCount;m++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+m]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else n.image.width=r.width,n.image.height=r.height,n.mipmaps=r.mipmaps;1===r.mipmapCount&&(n.minFilter=e.LinearFilter),n.format=r.format,n.needsUpdate=!0,i&&i(n)},s,m);return n},setPath:function(e){return this.path=e,this}});
},{"../constants.js":"HNhV","./FileLoader.js":"4dVX","../textures/CompressedTexture.js":"02yY","./LoadingManager.js":"Eb6M"}],"4fkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DDSLoader=void 0;var r=require("./CompressedTextureLoader.js"),e=require("../constants.js"),a=function(e){r.CompressedTextureLoader.call(this,e),this._parser=a.parse};exports.DDSLoader=a,a.prototype=Object.create(r.CompressedTextureLoader.prototype),a.prototype.constructor=a,a.parse=function(r,a){var t={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function o(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function n(r,e,a,t){for(var o=a*t*4,n=new Uint8Array(r,e,o),s=new Uint8Array(o),i=0,p=0,m=0;m<t;m++)for(var u=0;u<a;u++){var c=n[p],d=n[++p],h=n[++p],C=n[++p];p++,s[i]=h,s[++i]=d,s[++i]=c,s[++i]=C,i++}return s}var s,i=o("DXT1"),p=o("DXT3"),m=o("DXT5"),u=o("ETC1"),c=new Int32Array(r,0,31);if(542327876!==c[0])return console.error("DDSLoader.parse: Invalid magic number in DDS header."),t;if(4&!c[20])return console.error("DDSLoader.parse: Unsupported format, must contain a FourCC code."),t;var d,h=c[21],C=!1;switch(h){case i:s=8,t.format=e.RGB_S3TC_DXT1_Format;break;case p:s=16,t.format=e.RGBA_S3TC_DXT3_Format;break;case m:s=16,t.format=e.RGBA_S3TC_DXT5_Format;break;case u:s=8,t.format=e.RGB_ETC1_Format;break;default:if(!(32===c[22]&&16711680&c[23]&&65280&c[24]&&255&c[25]&&4278190080&c[26]))return console.error("DDSLoader.parse: Unsupported FourCC code ",(d=h,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))),t;C=!0,s=64,t.format=e.RGBAFormat}t.mipmapCount=1,131072&c[2]&&!1!==a&&(t.mipmapCount=Math.max(1,c[7]));var f=c[28];if(t.isCubemap=!!(512&f),t.isCubemap&&(!(1024&f)||!(2048&f)||!(4096&f)||!(8192&f)||!(16384&f)||!(32768&f)))return console.error("DDSLoader.parse: Incomplete cubemap faces"),t;t.width=c[4],t.height=c[3];for(var D=c[1]+4,v=t.isCubemap?6:1,l=0;l<v;l++)for(var T=t.width,_=t.height,b=0;b<t.mipmapCount;b++){if(C)var x=(A=n(r,D,T,_)).length;else{x=Math.max(4,T)/4*Math.max(4,_)/4*s;var A=new Uint8Array(r,D,x)}var S={data:A,width:T,height:_};t.mipmaps.push(S),D+=x,T=Math.max(T>>1,1),_=Math.max(_>>1,1)}return t};
},{"./CompressedTextureLoader.js":"Ns5v","../constants.js":"HNhV"}],"tnJ/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Light=e;var t=require("../core/Object3D.js"),o=require("../math/Color.js");function e(e,i){t.Object3D.call(this),this.type="Light",this.color=new o.Color(e),this.intensity=void 0!==i?i:1,this.receiveShadow=void 0}e.prototype=Object.assign(Object.create(t.Object3D.prototype),{constructor:e,isLight:!0,copy:function(o){return t.Object3D.prototype.copy.call(this,o),this.color.copy(o.color),this.intensity=o.intensity,this},toJSON:function(o){var e=t.Object3D.prototype.toJSON.call(this,o);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}});
},{"../core/Object3D.js":"Kems","../math/Color.js":"WOLJ"}],"tqf6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightShadow=a;var i=require("../math/Matrix4.js"),t=require("../math/Vector2.js");function a(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new t.Vector2(512,512),this.map=null,this.matrix=new i.Matrix4}Object.assign(a.prototype,{copy:function(i){return this.camera=i.camera.clone(),this.bias=i.bias,this.radius=i.radius,this.mapSize.copy(i.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var i={};return 0!==this.bias&&(i.bias=this.bias),1!==this.radius&&(i.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(i.mapSize=this.mapSize.toArray()),i.camera=this.camera.toJSON(!1).object,delete i.camera.matrix,i}});
},{"../math/Matrix4.js":"Rio0","../math/Vector2.js":"qn61"}],"7KrV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLightShadow=r;var e=require("./LightShadow.js"),t=require("../cameras/OrthographicCamera.js");function r(){e.LightShadow.call(this,new t.OrthographicCamera(-5,5,5,-5,.5,500))}r.prototype=Object.assign(Object.create(e.LightShadow.prototype),{constructor:r});
},{"./LightShadow.js":"tqf6","../cameras/OrthographicCamera.js":"YP16"}],"mZTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=o;var t=require("./Light.js"),e=require("./DirectionalLightShadow.js"),i=require("../core/Object3D.js");function o(o,r){t.Light.call(this,o,r),this.type="DirectionalLight",this.position.copy(i.Object3D.DefaultUp),this.updateMatrix(),this.target=new i.Object3D,this.shadow=new e.DirectionalLightShadow}o.prototype=Object.assign(Object.create(t.Light.prototype),{constructor:o,isDirectionalLight:!0,copy:function(e){return t.Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});
},{"./Light.js":"tnJ/","./DirectionalLightShadow.js":"7KrV","../core/Object3D.js":"Kems"}],"ef09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=s;var t=require("./Light.js"),e=require("../cameras/PerspectiveCamera.js"),i=require("./LightShadow.js");function s(s,o,r,h){t.Light.call(this,s,o),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==h?h:1,this.shadow=new i.LightShadow(new e.PerspectiveCamera(90,1,.5,500))}s.prototype=Object.assign(Object.create(t.Light.prototype),{constructor:s,isPointLight:!0,copy:function(e){return t.Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});
},{"./Light.js":"tnJ/","../cameras/PerspectiveCamera.js":"94uR","./LightShadow.js":"tqf6"}],"mM3K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpotLightShadow=r;var e=require("./LightShadow.js"),t=require("../math/Math.js"),a=require("../cameras/PerspectiveCamera.js");function r(){e.LightShadow.call(this,new a.PerspectiveCamera(50,1,.5,500))}r.prototype=Object.assign(Object.create(e.LightShadow.prototype),{constructor:r,isSpotLightShadow:!0,update:function(e){var a=this.camera,r=2*t._Math.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,o=e.distance||a.far;r===a.fov&&i===a.aspect&&o===a.far||(a.fov=r,a.aspect=i,a.far=o,a.updateProjectionMatrix())}});
},{"./LightShadow.js":"tqf6","../math/Math.js":"J7M1","../cameras/PerspectiveCamera.js":"94uR"}],"LPRn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpotLight=s;var t=require("./Light.js"),e=require("./SpotLightShadow.js"),i=require("../core/Object3D.js");function s(s,o,h,r,a,n){t.Light.call(this,s,o),this.type="SpotLight",this.position.copy(i.Object3D.DefaultUp),this.updateMatrix(),this.target=new i.Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==h?h:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==a?a:0,this.decay=void 0!==n?n:1,this.shadow=new e.SpotLightShadow}s.prototype=Object.assign(Object.create(t.Light.prototype),{constructor:s,isSpotLight:!0,copy:function(e){return t.Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});
},{"./Light.js":"tnJ/","./SpotLightShadow.js":"mM3K","../core/Object3D.js":"Kems"}],"U5eL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshStandardMaterial=a;var i=require("../constants.js"),e=require("./Material.js"),t=require("../math/Vector2.js"),s=require("../math/Color.js");function a(a){e.Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new s.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new s.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.TangentSpaceNormalMap,this.normalScale=new t.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}a.prototype=Object.create(e.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshStandardMaterial=!0,a.prototype.copy=function(i){return e.Material.prototype.copy.call(this,i),this.defines={STANDARD:""},this.color.copy(i.color),this.roughness=i.roughness,this.metalness=i.metalness,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.roughnessMap=i.roughnessMap,this.metalnessMap=i.metalnessMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.envMapIntensity=i.envMapIntensity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};
},{"../constants.js":"HNhV","./Material.js":"FNW4","../math/Vector2.js":"qn61","../math/Color.js":"WOLJ"}],"aE0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageLoader=t;var e=require("./Cache.js"),r=require("./LoadingManager.js");function t(e){this.manager=void 0!==e?e:r.DefaultLoadingManager}Object.assign(t.prototype,{crossOrigin:"anonymous",load:function(r,t,i,n){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);var a=this,s=e.Cache.get(r);if(void 0!==s)return a.manager.itemStart(r),setTimeout(function(){t&&t(s),a.manager.itemEnd(r)},0),s;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function d(){o.removeEventListener("load",d,!1),o.removeEventListener("error",m,!1),e.Cache.add(r,this),t&&t(this),a.manager.itemEnd(r)}function m(e){o.removeEventListener("load",d,!1),o.removeEventListener("error",m,!1),n&&n(e),a.manager.itemError(r),a.manager.itemEnd(r)}return o.addEventListener("load",d,!1),o.addEventListener("error",m,!1),"data:"!==r.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(r),o.src=r,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});
},{"./Cache.js":"H4l1","./LoadingManager.js":"Eb6M"}],"lg6c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextureLoader=a;var e=require("../constants.js"),r=require("./ImageLoader.js"),t=require("../textures/Texture.js"),s=require("./LoadingManager.js");function a(e){this.manager=void 0!==e?e:s.DefaultLoadingManager}Object.assign(a.prototype,{crossOrigin:"anonymous",load:function(s,a,i,n){var o=new t.Texture,u=new r.ImageLoader(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(s,function(r){o.image=r;var t=s.search(/\.jpe?g($|\?)/i)>0||0===s.search(/^data\:image\/jpeg/);o.format=t?e.RGBFormat:e.RGBAFormat,o.needsUpdate=!0,void 0!==a&&a(o)},i,n),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});
},{"../constants.js":"HNhV","./ImageLoader.js":"aE0J","../textures/Texture.js":"05Bz","./LoadingManager.js":"Eb6M"}],"gGae":[function(require,module,exports) {
"use strict";function t(t,r){this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InterleavedBuffer=t,Object.defineProperty(t.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(t.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,r,e){t*=this.stride,e*=r.stride;for(var i=0,n=this.stride;i<n;i++)this.array[t+i]=r.array[e+i];return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});
},{}],"PAFj":[function(require,module,exports) {
"use strict";function t(t,a,r,s){this.data=t,this.itemSize=a,this.offset=r,this.normalized=!0===s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InterleavedBufferAttribute=t,Object.defineProperties(t.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(t.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,a){return this.data.array[t*this.data.stride+this.offset]=a,this},setY:function(t,a){return this.data.array[t*this.data.stride+this.offset+1]=a,this},setZ:function(t,a){return this.data.array[t*this.data.stride+this.offset+2]=a,this},setW:function(t,a){return this.data.array[t*this.data.stride+this.offset+3]=a,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,a,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this},setXYZ:function(t,a,r,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this.data.array[t+2]=s,this},setXYZW:function(t,a,r,s,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this.data.array[t+2]=s,this.data.array[t+3]=i,this}});
},{}],"ghAq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SkinnedMesh=s;var e=require("./Mesh.js"),t=require("../math/Matrix4.js"),i=require("../math/Vector4.js");function s(i,s){i&&i.isGeometry&&console.error("SkinnedMesh no longer supports Geometry. Use BufferGeometry instead."),e.Mesh.call(this,i,s),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new t.Matrix4,this.bindMatrixInverse=new t.Matrix4}s.prototype=Object.assign(Object.create(e.Mesh.prototype),{constructor:s,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new i.Vector4,t=this.geometry.attributes.skinWeight,s=0,r=t.count;s<r;s++){e.x=t.getX(s),e.y=t.getY(s),e.z=t.getZ(s),e.w=t.getW(s);var n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(s,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(t){e.Mesh.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});
},{"./Mesh.js":"QChY","../math/Matrix4.js":"Rio0","../math/Vector4.js":"Z46c"}],"HCb9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineBasicMaterial=e;var t=require("./Material.js"),i=require("../math/Color.js");function e(e){t.Material.call(this),this.type="LineBasicMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}e.prototype=Object.create(t.Material.prototype),e.prototype.constructor=e,e.prototype.isLineBasicMaterial=!0,e.prototype.copy=function(i){return t.Material.prototype.copy.call(this,i),this.color.copy(i.color),this.linewidth=i.linewidth,this.linecap=i.linecap,this.linejoin=i.linejoin,this};
},{"./Material.js":"FNW4","../math/Color.js":"WOLJ"}],"aIAo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Line=c;var e=require("../math/Sphere.js"),t=require("../math/Ray.js"),r=require("../math/Matrix4.js"),i=require("../core/Object3D.js"),n=require("../math/Vector3.js"),a=require("../materials/LineBasicMaterial.js"),o=require("../core/BufferGeometry.js"),s=require("../core/BufferAttribute.js");function c(e,t,r){1===r&&console.error("Line: parameter LinePieces no longer supported. Use LineSegments instead."),i.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new o.BufferGeometry,this.material=void 0!==t?t:new a.LineBasicMaterial({color:16777215*Math.random()})}c.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:c,isLine:!0,computeLineDistances:function(){var e=new n.Vector3,t=new n.Vector3;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var i=r.attributes.position,n=[0],a=1,o=i.count;a<o;a++)e.fromBufferAttribute(i,a-1),t.fromBufferAttribute(i,a),n[a]=n[a-1],n[a]+=e.distanceTo(t);r.addAttribute("lineDistance",new s.Float32BufferAttribute(n,1))}else console.warn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry){var c=r.vertices;(n=r.lineDistances)[0]=0;for(a=1,o=c.length;a<o;a++)n[a]=n[a-1],n[a]+=c[a-1].distanceTo(c[a])}return this}}(),raycast:function(){var i=new r.Matrix4,a=new t.Ray,o=new e.Sphere;return function(e,t){var r=e.linePrecision,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),o.copy(s.boundingSphere),o.applyMatrix4(c),o.radius+=r,!1!==e.ray.intersectsSphere(o)){i.getInverse(c),a.copy(e.ray).applyMatrix4(i);var l=r/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=new n.Vector3,p=new n.Vector3,y=new n.Vector3,h=new n.Vector3,m=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var d=s.index,x=s.attributes.position.array;if(null!==d)for(var g=d.array,b=0,v=g.length-1;b<v;b+=m){var j=g[b],w=g[b+1];if(f.fromArray(x,3*j),p.fromArray(x,3*w),!(a.distanceSqToSegment(f,p,h,y)>u))h.applyMatrix4(this.matrixWorld),(B=e.ray.origin.distanceTo(h))<e.near||B>e.far||t.push({distance:B,point:y.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(b=0,v=x.length/3-1;b<v;b+=m){if(f.fromArray(x,3*b),p.fromArray(x,3*b+3),!(a.distanceSqToSegment(f,p,h,y)>u))h.applyMatrix4(this.matrixWorld),(B=e.ray.origin.distanceTo(h))<e.near||B>e.far||t.push({distance:B,point:y.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var M=s.vertices,S=M.length;for(b=0;b<S-1;b+=m){var B;if(!(a.distanceSqToSegment(M[b],M[b+1],h,y)>u))h.applyMatrix4(this.matrixWorld),(B=e.ray.origin.distanceTo(h))<e.near||B>e.far||t.push({distance:B,point:y.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),copy:function(e){return i.Object3D.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}});
},{"../math/Sphere.js":"L4Ep","../math/Ray.js":"mea/","../math/Matrix4.js":"Rio0","../core/Object3D.js":"Kems","../math/Vector3.js":"TKlu","../materials/LineBasicMaterial.js":"HCb9","../core/BufferGeometry.js":"e+4p","../core/BufferAttribute.js":"mpLf"}],"BsrJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineSegments=i;var e=require("./Line.js"),t=require("../math/Vector3.js"),r=require("../core/BufferAttribute.js");function i(t,r){e.Line.call(this,t,r),this.type="LineSegments"}i.prototype=Object.assign(Object.create(e.Line.prototype),{constructor:i,isLineSegments:!0,computeLineDistances:function(){var e=new t.Vector3,i=new t.Vector3;return function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var n=t.attributes.position,o=[],s=0,u=n.count;s<u;s+=2)e.fromBufferAttribute(n,s),i.fromBufferAttribute(n,s+1),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+e.distanceTo(i);t.addAttribute("lineDistance",new r.Float32BufferAttribute(o,1))}else console.warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var c=t.vertices;for(o=t.lineDistances,s=0,u=c.length;s<u;s+=2)e.copy(c[s]),i.copy(c[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+e.distanceTo(i)}return this}}()});
},{"./Line.js":"aIAo","../math/Vector3.js":"TKlu","../core/BufferAttribute.js":"mpLf"}],"6KdS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineLoop=t;var e=require("./Line.js");function t(t,o){e.Line.call(this,t,o),this.type="LineLoop"}t.prototype=Object.assign(Object.create(e.Line.prototype),{constructor:t,isLineLoop:!0});
},{"./Line.js":"aIAo"}],"oZSP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointsMaterial=i;var t=require("./Material.js"),e=require("../math/Color.js");function i(i){t.Material.call(this),this.type="PointsMaterial",this.color=new e.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isPointsMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};
},{"./Material.js":"FNW4","../math/Color.js":"WOLJ"}],"sG1g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Points=n;var e=require("../math/Sphere.js"),r=require("../math/Ray.js"),t=require("../math/Matrix4.js"),i=require("../core/Object3D.js"),a=require("../math/Vector3.js"),o=require("../materials/PointsMaterial.js"),s=require("../core/BufferGeometry.js");function n(e,r){i.Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new s.BufferGeometry,this.material=void 0!==r?r:new o.PointsMaterial({color:16777215*Math.random()})}n.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:n,isPoints:!0,raycast:function(){var i=new t.Matrix4,o=new r.Ray,s=new e.Sphere;return function(e,r){var t=this,n=this.geometry,c=this.matrixWorld,u=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),s.copy(n.boundingSphere),s.applyMatrix4(c),s.radius+=u,!1!==e.ray.intersectsSphere(s)){i.getInverse(c),o.copy(e.ray).applyMatrix4(i);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),l=h*h,p=new a.Vector3,y=new a.Vector3;if(n.isBufferGeometry){var f=n.index,m=n.attributes.position.array;if(null!==f)for(var d=f.array,v=0,j=d.length;v<j;v++){var g=d[v];p.fromArray(m,3*g),M(p,g)}else{v=0;for(var x=m.length/3;v<x;v++)p.fromArray(m,3*v),M(p,v)}}else{var b=n.vertices;for(v=0,x=b.length;v<x;v++)M(b[v],v)}}function M(i,a){var s=o.distanceSqToPoint(i);if(s<l){o.closestPointToPoint(i,y),y.applyMatrix4(c);var n=e.ray.origin.distanceTo(y);if(n<e.near||n>e.far)return;r.push({distance:n,distanceToRay:Math.sqrt(s),point:y.clone(),index:a,face:null,object:t})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});
},{"../math/Sphere.js":"L4Ep","../math/Ray.js":"mea/","../math/Matrix4.js":"Rio0","../core/Object3D.js":"Kems","../math/Vector3.js":"TKlu","../materials/PointsMaterial.js":"oZSP","../core/BufferGeometry.js":"e+4p"}],"Yaq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationUtils=void 0;var r={arraySlice:function(e,t,o){return r.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==o?o:e.length)):e.slice(t,o)},convertArray:function(r,e,t){return!r||!t&&r.constructor===e?r:"number"==typeof e.BYTES_PER_ELEMENT?new e(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){for(var e=r.length,t=new Array(e),o=0;o!==e;++o)t[o]=o;return t.sort(function(e,t){return r[e]-r[t]}),t},sortedArray:function(r,e,t){for(var o=r.length,i=new r.constructor(o),n=0,a=0;a!==o;++n)for(var s=t[n]*e,u=0;u!==e;++u)i[a++]=r[s+u];return i},flattenJSON:function(r,e,t,o){for(var i=1,n=r[0];void 0!==n&&void 0===n[o];)n=r[i++];if(void 0!==n){var a=n[o];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=n[o])&&(e.push(n.time),t.push.apply(t,a)),n=r[i++]}while(void 0!==n);else if(void 0!==a.toArray)do{void 0!==(a=n[o])&&(e.push(n.time),a.toArray(t,t.length)),n=r[i++]}while(void 0!==n);else do{void 0!==(a=n[o])&&(e.push(n.time),t.push(a)),n=r[i++]}while(void 0!==n)}}};exports.AnimationUtils=r;
},{}],"xjhA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CubicInterpolant=i;var t=require("../../constants.js"),e=require("../Interpolant.js");function i(t,i,r,n){e.Interpolant.call(this,t,i,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}i.prototype=Object.assign(Object.create(e.Interpolant.prototype),{constructor:i,DefaultSettings_:{endingStart:t.ZeroCurvatureEnding,endingEnd:t.ZeroCurvatureEnding},intervalChanged_:function(e,i,r){var n=this.parameterPositions,s=e-2,a=e+1,o=n[s],h=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case t.ZeroSlopeEnding:s=e,o=2*i-r;break;case t.WrapAroundEnding:o=i+n[s=n.length-2]-n[s+1];break;default:s=e,o=r}if(void 0===h)switch(this.getSettings_().endingEnd){case t.ZeroSlopeEnding:a=e,h=2*r-i;break;case t.WrapAroundEnding:a=1,h=r+n[1]-n[0];break;default:a=e-1,h=i}var u=.5*(r-i),f=this.valueSize;this._weightPrev=u/(i-o),this._weightNext=u/(h-r),this._offsetPrev=s*f,this._offsetNext=a*f},interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,h=o-a,u=this._offsetPrev,f=this._offsetNext,g=this._weightPrev,d=this._weightNext,l=(i-e)/(r-e),c=l*l,_=c*l,p=-g*_+2*g*c-g*l,v=(1+g)*_+(-1.5-2*g)*c+(-.5+g)*l+1,S=(-1-d)*_+(1.5+d)*c+.5*l,b=d*_-d*c,w=0;w!==a;++w)n[w]=p*s[u+w]+v*s[h+w]+S*s[o+w]+b*s[f+w];return n}});
},{"../../constants.js":"HNhV","../Interpolant.js":"RFzX"}],"9Qjf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinearInterpolant=e;var t=require("../Interpolant.js");function e(e,r,n,o){t.Interpolant.call(this,e,r,n,o)}e.prototype=Object.assign(Object.create(t.Interpolant.prototype),{constructor:e,interpolate_:function(t,e,r,n){for(var o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,i=t*a,l=i-a,p=(r-e)/(n-e),u=1-p,c=0;c!==a;++c)o[c]=s[l+c]*u+s[i+c]*p;return o}});
},{"../Interpolant.js":"RFzX"}],"Bhs+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiscreteInterpolant=e;var t=require("../Interpolant.js");function e(e,r,o,n){t.Interpolant.call(this,e,r,o,n)}e.prototype=Object.assign(Object.create(t.Interpolant.prototype),{constructor:e,interpolate_:function(t){return this.copySampleValue_(t-1)}});
},{"../Interpolant.js":"RFzX"}],"PUce":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyframeTrack=n;var t=require("../constants.js"),e=require("../math/interpolants/CubicInterpolant.js"),r=require("../math/interpolants/LinearInterpolant.js"),i=require("../math/interpolants/DiscreteInterpolant.js"),a=require("./AnimationUtils.js");function n(t,e,r,i){if(void 0===t)throw new Error("KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=a.AnimationUtils.convertArray(e,this.TimeBufferType),this.values=a.AnimationUtils.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(n,{toJSON:function(t){var e,r=t.constructor;if(void 0!==r.toJSON)e=r.toJSON(t);else{e={name:t.name,times:a.AnimationUtils.convertArray(t.times,Array),values:a.AnimationUtils.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(n.prototype,{constructor:n,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:t.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(t){return new i.DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new r.LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new e.CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(e){var r;switch(e){case t.InterpolateDiscrete:r=this.InterpolantFactoryMethodDiscrete;break;case t.InterpolateLinear:r=this.InterpolantFactoryMethodLinear;break;case t.InterpolateSmooth:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("KeyframeTrack:",i),this}return this.createInterpolant=r,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return t.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return t.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return t.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,i=r.length,n=0,o=i-1;n!==i&&r[n]<t;)++n;for(;-1!==o&&r[o]>e;)--o;if(++o,0!==n||o!==i){n>=o&&(n=(o=Math.max(o,1))-1);var s=this.getValueSize();this.times=a.AnimationUtils.arraySlice(r,n,o),this.values=a.AnimationUtils.arraySlice(this.values,n*s,o*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,s=0;s!==n;s++){var l=r[s];if("number"==typeof l&&isNaN(l)){console.error("KeyframeTrack: Time is not a valid number.",this,s,l),t=!1;break}if(null!==o&&o>l){console.error("KeyframeTrack: Out of order keys.",this,s,l,o),t=!1;break}o=l}if(void 0!==i&&a.AnimationUtils.isTypedArray(i)){s=0;for(var h=i.length;s!==h;++s){var c=i[s];if(isNaN(c)){console.error("KeyframeTrack: Value is not a valid number.",this,s,c),t=!1;break}}}return t},optimize:function(){for(var e=this.times,r=this.values,i=this.getValueSize(),n=this.getInterpolation()===t.InterpolateSmooth,o=1,s=e.length-1,l=1;l<s;++l){var h=!1,c=e[l];if(c!==e[l+1]&&(1!==l||c!==c[0]))if(n)h=!0;else for(var u=l*i,f=u-i,m=u+i,p=0;p!==i;++p){var v=r[u+p];if(v!==r[f+p]||v!==r[m+p]){h=!0;break}}if(h){if(l!==o){e[o]=e[l];var y=l*i,I=o*i;for(p=0;p!==i;++p)r[I+p]=r[y+p]}++o}}if(s>0){e[o]=e[s];for(y=s*i,I=o*i,p=0;p!==i;++p)r[I+p]=r[y+p];++o}return o!==e.length&&(this.times=a.AnimationUtils.arraySlice(e,0,o),this.values=a.AnimationUtils.arraySlice(r,0,o*i)),this},clone:function(){var t=a.AnimationUtils.arraySlice(this.times,0),e=a.AnimationUtils.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}});
},{"../constants.js":"HNhV","../math/interpolants/CubicInterpolant.js":"xjhA","../math/interpolants/LinearInterpolant.js":"9Qjf","../math/interpolants/DiscreteInterpolant.js":"Bhs+","./AnimationUtils.js":"Yaq1"}],"T5bk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BooleanKeyframeTrack=t;var e=require("../../constants.js"),r=require("../KeyframeTrack.js");function t(e,t,o){r.KeyframeTrack.call(this,e,t,o)}t.prototype=Object.assign(Object.create(r.KeyframeTrack.prototype),{constructor:t,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:e.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});
},{"../../constants.js":"HNhV","../KeyframeTrack.js":"PUce"}],"CzBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorKeyframeTrack=r;var e=require("../KeyframeTrack.js");function r(r,t,a,o){e.KeyframeTrack.call(this,r,t,a,o)}r.prototype=Object.assign(Object.create(e.KeyframeTrack.prototype),{constructor:r,ValueTypeName:"color"});
},{"../KeyframeTrack.js":"PUce"}],"tUi2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NumberKeyframeTrack=r;var e=require("../KeyframeTrack.js");function r(r,t,a,c){e.KeyframeTrack.call(this,r,t,a,c)}r.prototype=Object.assign(Object.create(e.KeyframeTrack.prototype),{constructor:r,ValueTypeName:"number"});
},{"../KeyframeTrack.js":"PUce"}],"Wz0Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QuaternionLinearInterpolant=r;var e=require("../Interpolant.js"),t=require("../Quaternion.js");function r(t,r,n,o){e.Interpolant.call(this,t,r,n,o)}r.prototype=Object.assign(Object.create(e.Interpolant.prototype),{constructor:r,interpolate_:function(e,r,n,o){for(var a=this.resultBuffer,s=this.sampleValues,i=this.valueSize,u=e*i,l=(n-r)/(o-r),p=u+i;u!==p;u+=4)t.Quaternion.slerpFlat(a,0,s,u-i,s,u,l);return a}});
},{"../Interpolant.js":"RFzX","../Quaternion.js":"eUMQ"}],"KLuP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QuaternionKeyframeTrack=a;var e=require("../../constants.js"),t=require("../KeyframeTrack.js"),r=require("../../math/interpolants/QuaternionLinearInterpolant.js");function a(e,r,a,n){t.KeyframeTrack.call(this,e,r,a,n)}a.prototype=Object.assign(Object.create(t.KeyframeTrack.prototype),{constructor:a,ValueTypeName:"quaternion",DefaultInterpolation:e.InterpolateLinear,InterpolantFactoryMethodLinear:function(e){return new r.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});
},{"../../constants.js":"HNhV","../KeyframeTrack.js":"PUce","../../math/interpolants/QuaternionLinearInterpolant.js":"Wz0Q"}],"q33q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringKeyframeTrack=t;var e=require("../../constants.js"),r=require("../KeyframeTrack.js");function t(e,t,a,o){r.KeyframeTrack.call(this,e,t,a,o)}t.prototype=Object.assign(Object.create(r.KeyframeTrack.prototype),{constructor:t,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:e.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});
},{"../../constants.js":"HNhV","../KeyframeTrack.js":"PUce"}],"+7PS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VectorKeyframeTrack=r;var e=require("../KeyframeTrack.js");function r(r,t,a,c){e.KeyframeTrack.call(this,r,t,a,c)}r.prototype=Object.assign(Object.create(e.KeyframeTrack.prototype),{constructor:r,ValueTypeName:"vector"});
},{"../KeyframeTrack.js":"PUce"}],"0MwG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationClip=c;var r=require("./AnimationUtils.js"),e=require("./KeyframeTrack.js"),t=require("./tracks/BooleanKeyframeTrack.js"),a=require("./tracks/ColorKeyframeTrack.js"),n=require("./tracks/NumberKeyframeTrack.js"),i=require("./tracks/QuaternionKeyframeTrack.js"),s=require("./tracks/StringKeyframeTrack.js"),o=require("./tracks/VectorKeyframeTrack.js"),u=require("../math/Math.js");function c(r,e,t){this.name=r,this.tracks=t,this.duration=void 0!==e?e:-1,this.uuid=u._Math.generateUUID(),this.duration<0&&this.resetDuration()}function h(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return n.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return o.VectorKeyframeTrack;case"color":return a.ColorKeyframeTrack;case"quaternion":return i.QuaternionKeyframeTrack;case"bool":case"boolean":return t.BooleanKeyframeTrack;case"string":return s.StringKeyframeTrack}throw new Error("KeyframeTrack: Unsupported typeName: "+r)}function m(e){if(void 0===e.type)throw new Error("KeyframeTrack: track type undefined, can not parse");var t=h(e.type);if(void 0===e.times){var a=[],n=[];r.AnimationUtils.flattenJSON(e.keys,a,n,"value"),e.times=a,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(c,{parse:function(r){for(var e=[],t=r.tracks,a=1/(r.fps||1),n=0,i=t.length;n!==i;++n)e.push(m(t[n]).scale(a));return new c(r.name,r.duration,e)},toJSON:function(r){for(var t=[],a=r.tracks,n={name:r.name,duration:r.duration,tracks:t,uuid:r.uuid},i=0,s=a.length;i!==s;++i)t.push(e.KeyframeTrack.toJSON(a[i]));return n},CreateFromMorphTargetSequence:function(e,t,a,i){for(var s=t.length,o=[],u=0;u<s;u++){var h=[],m=[];h.push((u+s-1)%s,u,(u+1)%s),m.push(0,1,0);var f=r.AnimationUtils.getKeyframeOrder(h);h=r.AnimationUtils.sortedArray(h,1,f),m=r.AnimationUtils.sortedArray(m,1,f),i||0!==h[0]||(h.push(s),m.push(m[0])),o.push(new n.NumberKeyframeTrack(".morphTargetInfluences["+t[u].name+"]",h,m).scale(1/a))}return new c(e,-1,o)},findByName:function(r,e){var t=r;if(!Array.isArray(r)){var a=r;t=a.geometry&&a.geometry.animations||a.animations}for(var n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},CreateClipsFromMorphTargetSequences:function(r,e,t){for(var a={},n=/^([\w-]*?)([\d]+)$/,i=0,s=r.length;i<s;i++){var o=r[i],u=o.name.match(n);if(u&&u.length>1){var h=a[f=u[1]];h||(a[f]=h=[]),h.push(o)}}var m=[];for(var f in a)m.push(c.CreateFromMorphTargetSequence(f,a[f],e,t));return m},parseAnimation:function(e,t){if(!e)return console.error("AnimationClip: No animation in JSONLoader data."),null;for(var a=function(e,t,a,n,i){if(0!==a.length){var s=[],o=[];r.AnimationUtils.flattenJSON(a,s,o,n),0!==s.length&&i.push(new e(t,s,o))}},s=[],u=e.name||"default",h=e.length||-1,m=e.fps||30,f=e.hierarchy||[],l=0;l<f.length;l++){var p=f[l].keys;if(p&&0!==p.length)if(p[0].morphTargets){for(var v={},k=0;k<p.length;k++)if(p[k].morphTargets)for(var g=0;g<p[k].morphTargets.length;g++)v[p[k].morphTargets[g]]=-1;for(var y in v){var T=[],d=[];for(g=0;g!==p[k].morphTargets.length;++g){var K=p[k];T.push(K.time),d.push(K.morphTarget===y?1:0)}s.push(new n.NumberKeyframeTrack(".morphTargetInfluence["+y+"]",T,d))}h=v.length*(m||1)}else{var w=".bones["+t[l].name+"]";a(o.VectorKeyframeTrack,w+".position",p,"pos",s),a(i.QuaternionKeyframeTrack,w+".quaternion",p,"rot",s),a(o.VectorKeyframeTrack,w+".scale",p,"scl",s)}}return 0===s.length?null:new c(u,h,s)}}),Object.assign(c.prototype,{resetDuration:function(){for(var r=0,e=0,t=this.tracks.length;e!==t;++e){var a=this.tracks[e];r=Math.max(r,a.times[a.times.length-1])}return this.duration=r,this},trim:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this},validate:function(){for(var r=!0,e=0;e<this.tracks.length;e++)r=r&&this.tracks[e].validate();return r},optimize:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this},clone:function(){for(var r=[],e=0;e<this.tracks.length;e++)r.push(this.tracks[e].clone());return new c(this.name,this.duration,r)}});
},{"./AnimationUtils.js":"Yaq1","./KeyframeTrack.js":"PUce","./tracks/BooleanKeyframeTrack.js":"T5bk","./tracks/ColorKeyframeTrack.js":"CzBC","./tracks/NumberKeyframeTrack.js":"tUi2","./tracks/QuaternionKeyframeTrack.js":"KLuP","./tracks/StringKeyframeTrack.js":"q33q","./tracks/VectorKeyframeTrack.js":"+7PS","../math/Math.js":"J7M1"}],"em2F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bone=t;var e=require("../core/Object3D.js");function t(){e.Object3D.call(this),this.type="Bone"}t.prototype=Object.assign(Object.create(e.Object3D.prototype),{constructor:t,isBone:!0});
},{"../core/Object3D.js":"Kems"}],"BmRL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Skeleton=t;var e=require("../math/Matrix4.js");function t(t,n){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===n)this.calculateInverses();else if(this.bones.length===n.length)this.boneInverses=n.slice(0);else{console.warn("Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var s=0,r=this.bones.length;s<r;s++)this.boneInverses.push(new e.Matrix4)}}Object.assign(t.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,n=this.bones.length;t<n;t++){var s=new e.Matrix4;this.bones[t]&&s.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(s)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var t=new e.Matrix4,n=new e.Matrix4;return function(){for(var e=this.bones,s=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,i=0,a=e.length;i<a;i++){var h=e[i]?e[i].matrixWorld:n;t.multiplyMatrices(h,s[i]),t.toArray(r,16*i)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new t(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var s=this.bones[t];if(s.name===e)return s}}});
},{"../math/Matrix4.js":"Rio0"}],"HwdB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineDashedMaterial=t;var e=require("./LineBasicMaterial.js");function t(t){e.LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}t.prototype=Object.create(e.LineBasicMaterial.prototype),t.prototype.constructor=t,t.prototype.isLineDashedMaterial=!0,t.prototype.copy=function(t){return e.LineBasicMaterial.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};
},{"./LineBasicMaterial.js":"HCb9"}],"eJER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshLambertMaterial=s;var i=require("./Material.js"),t=require("../constants.js"),e=require("../math/Color.js");function s(s){i.Material.call(this),this.type="MeshLambertMaterial",this.color=new e.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new e.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(s)}s.prototype=Object.create(i.Material.prototype),s.prototype.constructor=s,s.prototype.isMeshLambertMaterial=!0,s.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};
},{"./Material.js":"FNW4","../constants.js":"HNhV","../math/Color.js":"WOLJ"}],"Yb1f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshNormalMaterial=i;var e=require("../constants.js"),t=require("./Material.js"),a=require("../math/Vector2.js");function i(i){t.Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=e.TangentSpaceNormalMap,this.normalScale=new a.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isMeshNormalMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};
},{"../constants.js":"HNhV","./Material.js":"FNW4","../math/Vector2.js":"qn61"}],"0kfP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshPhongMaterial=a;var i=require("../constants.js"),e=require("./Material.js"),t=require("../math/Vector2.js"),s=require("../math/Color.js");function a(a){e.Material.call(this),this.type="MeshPhongMaterial",this.color=new s.Color(16777215),this.specular=new s.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new s.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.TangentSpaceNormalMap,this.normalScale=new t.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}a.prototype=Object.create(e.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshPhongMaterial=!0,a.prototype.copy=function(i){return e.Material.prototype.copy.call(this,i),this.color.copy(i.color),this.specular.copy(i.specular),this.shininess=i.shininess,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};
},{"../constants.js":"HNhV","./Material.js":"FNW4","../math/Vector2.js":"qn61","../math/Color.js":"WOLJ"}],"uqo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshPhysicalMaterial=e;var t=require("./MeshStandardMaterial.js");function e(e){t.MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}e.prototype=Object.create(t.MeshStandardMaterial.prototype),e.prototype.constructor=e,e.prototype.isMeshPhysicalMaterial=!0,e.prototype.copy=function(e){return t.MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this};
},{"./MeshStandardMaterial.js":"U5eL"}],"tdcD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshToonMaterial=e;var t=require("./MeshPhongMaterial.js");function e(e){t.MeshPhongMaterial.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}e.prototype=Object.create(t.MeshPhongMaterial.prototype),e.prototype.constructor=e,e.prototype.isMeshToonMaterial=!0,e.prototype.copy=function(e){return t.MeshPhongMaterial.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};
},{"./MeshPhongMaterial.js":"0kfP"}],"Uuee":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShadowMaterial=o;var t=require("./Material.js"),e=require("../math/Color.js");function o(o){t.Material.call(this),this.type="ShadowMaterial",this.color=new e.Color(0),this.transparent=!0,this.setValues(o)}o.prototype=Object.create(t.Material.prototype),o.prototype.constructor=o,o.prototype.isShadowMaterial=!0,o.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.color.copy(e.color),this};
},{"./Material.js":"FNW4","../math/Color.js":"WOLJ"}],"B15b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpriteMaterial=i;var t=require("./Material.js"),e=require("../math/Color.js");function i(i){t.Material.call(this),this.type="SpriteMaterial",this.color=new e.Color(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isSpriteMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};
},{"./Material.js":"FNW4","../math/Color.js":"WOLJ"}],"yvz+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaterialLoader=x;var e=require("../math/Color.js"),a=require("../math/Vector2.js"),i=require("../math/Vector3.js"),r=require("../math/Vector4.js"),t=require("../math/Matrix3.js"),s=require("../math/Matrix4.js"),o=require("./FileLoader.js"),n=require("./LoadingManager.js"),l=require("../constants.js"),d=require("../materials/LineBasicMaterial.js"),M=require("../materials/LineDashedMaterial.js"),p=require("../materials/MeshBasicMaterial.js"),v=require("../materials/MeshDepthMaterial.js"),h=require("../materials/MeshDistanceMaterial.js"),m=require("../materials/MeshLambertMaterial.js"),u=require("../materials/MeshNormalMaterial.js"),c=require("../materials/MeshPhongMaterial.js"),f=require("../materials/MeshPhysicalMaterial.js"),g=require("../materials/MeshStandardMaterial.js"),y=require("../materials/MeshToonMaterial.js"),S=require("../materials/PointsMaterial.js"),w=require("../materials/RawShaderMaterial.js"),j=require("../materials/ShaderMaterial.js"),b=require("../materials/ShadowMaterial.js"),q=require("../materials/SpriteMaterial.js");function x(e){this.manager=void 0!==e?e:n.DefaultLoadingManager,this.textures={}}Object.assign(x.prototype,{load:function(e,a,i,r){var t=this,s=new o.FileLoader(t.manager);s.setPath(t.path),s.load(e,function(e){a(t.parse(JSON.parse(e)))},i,r)},parse:function(o){var n=this.textures;function l(e){return void 0===n[e]&&console.warn("MaterialLoader: Undefined texture",e),n[e]}var x=new{LineBasicMaterial:d.LineBasicMaterial,LineDashedMaterial:M.LineDashedMaterial,MeshBasicMaterial:p.MeshBasicMaterial,MeshDepthMaterial:v.MeshDepthMaterial,MeshDistanceMaterial:h.MeshDistanceMaterial,MeshLambertMaterial:m.MeshLambertMaterial,MeshNormalMaterial:u.MeshNormalMaterial,MeshPhongMaterial:c.MeshPhongMaterial,MeshPhysicalMaterial:f.MeshPhysicalMaterial,MeshStandardMaterial:g.MeshStandardMaterial,MeshToonMaterial:y.MeshToonMaterial,PointsMaterial:S.PointsMaterial,RawShaderMaterial:w.RawShaderMaterial,ShaderMaterial:j.ShaderMaterial,ShadowMaterial:b.ShadowMaterial,SpriteMaterial:q.SpriteMaterial}[o.type];if(void 0!==o.uuid&&(x.uuid=o.uuid),void 0!==o.name&&(x.name=o.name),void 0!==o.color&&x.color.setHex(o.color),void 0!==o.roughness&&(x.roughness=o.roughness),void 0!==o.metalness&&(x.metalness=o.metalness),void 0!==o.emissive&&x.emissive.setHex(o.emissive),void 0!==o.specular&&x.specular.setHex(o.specular),void 0!==o.shininess&&(x.shininess=o.shininess),void 0!==o.clearCoat&&(x.clearCoat=o.clearCoat),void 0!==o.clearCoatRoughness&&(x.clearCoatRoughness=o.clearCoatRoughness),void 0!==o.vertexColors&&(x.vertexColors=o.vertexColors),void 0!==o.fog&&(x.fog=o.fog),void 0!==o.flatShading&&(x.flatShading=o.flatShading),void 0!==o.blending&&(x.blending=o.blending),void 0!==o.combine&&(x.combine=o.combine),void 0!==o.side&&(x.side=o.side),void 0!==o.opacity&&(x.opacity=o.opacity),void 0!==o.transparent&&(x.transparent=o.transparent),void 0!==o.alphaTest&&(x.alphaTest=o.alphaTest),void 0!==o.depthTest&&(x.depthTest=o.depthTest),void 0!==o.depthWrite&&(x.depthWrite=o.depthWrite),void 0!==o.colorWrite&&(x.colorWrite=o.colorWrite),void 0!==o.wireframe&&(x.wireframe=o.wireframe),void 0!==o.wireframeLinewidth&&(x.wireframeLinewidth=o.wireframeLinewidth),void 0!==o.wireframeLinecap&&(x.wireframeLinecap=o.wireframeLinecap),void 0!==o.wireframeLinejoin&&(x.wireframeLinejoin=o.wireframeLinejoin),void 0!==o.rotation&&(x.rotation=o.rotation),1!==o.linewidth&&(x.linewidth=o.linewidth),void 0!==o.dashSize&&(x.dashSize=o.dashSize),void 0!==o.gapSize&&(x.gapSize=o.gapSize),void 0!==o.scale&&(x.scale=o.scale),void 0!==o.polygonOffset&&(x.polygonOffset=o.polygonOffset),void 0!==o.polygonOffsetFactor&&(x.polygonOffsetFactor=o.polygonOffsetFactor),void 0!==o.polygonOffsetUnits&&(x.polygonOffsetUnits=o.polygonOffsetUnits),void 0!==o.skinning&&(x.skinning=o.skinning),void 0!==o.morphTargets&&(x.morphTargets=o.morphTargets),void 0!==o.dithering&&(x.dithering=o.dithering),void 0!==o.visible&&(x.visible=o.visible),void 0!==o.userData&&(x.userData=o.userData),void 0!==o.uniforms)for(var L in o.uniforms){var T=o.uniforms[L];switch(x.uniforms[L]={},T.type){case"t":x.uniforms[L].value=l(T.value);break;case"c":x.uniforms[L].value=(new e.Color).setHex(T.value);break;case"v2":x.uniforms[L].value=(new a.Vector2).fromArray(T.value);break;case"v3":x.uniforms[L].value=(new i.Vector3).fromArray(T.value);break;case"v4":x.uniforms[L].value=(new r.Vector4).fromArray(T.value);break;case"m3":x.uniforms[L].value=(new t.Matrix3).fromArray(T.value);case"m4":x.uniforms[L].value=(new s.Matrix4).fromArray(T.value);break;default:x.uniforms[L].value=T.value}}if(void 0!==o.defines&&(x.defines=o.defines),void 0!==o.vertexShader&&(x.vertexShader=o.vertexShader),void 0!==o.fragmentShader&&(x.fragmentShader=o.fragmentShader),void 0!==o.extensions)for(var D in o.extensions)x.extensions[D]=o.extensions[D];if(void 0!==o.shading&&(x.flatShading=1===o.shading),void 0!==o.size&&(x.size=o.size),void 0!==o.sizeAttenuation&&(x.sizeAttenuation=o.sizeAttenuation),void 0!==o.map&&(x.map=l(o.map)),void 0!==o.alphaMap&&(x.alphaMap=l(o.alphaMap),x.transparent=!0),void 0!==o.bumpMap&&(x.bumpMap=l(o.bumpMap)),void 0!==o.bumpScale&&(x.bumpScale=o.bumpScale),void 0!==o.normalMap&&(x.normalMap=l(o.normalMap)),void 0!==o.normalMapType&&(x.normalMapType=o.normalMapType),void 0!==o.normalScale){var z=o.normalScale;!1===Array.isArray(z)&&(z=[z,z]),x.normalScale=(new a.Vector2).fromArray(z)}return void 0!==o.displacementMap&&(x.displacementMap=l(o.displacementMap)),void 0!==o.displacementScale&&(x.displacementScale=o.displacementScale),void 0!==o.displacementBias&&(x.displacementBias=o.displacementBias),void 0!==o.roughnessMap&&(x.roughnessMap=l(o.roughnessMap)),void 0!==o.metalnessMap&&(x.metalnessMap=l(o.metalnessMap)),void 0!==o.emissiveMap&&(x.emissiveMap=l(o.emissiveMap)),void 0!==o.emissiveIntensity&&(x.emissiveIntensity=o.emissiveIntensity),void 0!==o.specularMap&&(x.specularMap=l(o.specularMap)),void 0!==o.envMap&&(x.envMap=l(o.envMap)),void 0!==o.envMapIntensity&&(x.envMapIntensity=o.envMapIntensity),void 0!==o.reflectivity&&(x.reflectivity=o.reflectivity),void 0!==o.lightMap&&(x.lightMap=l(o.lightMap)),void 0!==o.lightMapIntensity&&(x.lightMapIntensity=o.lightMapIntensity),void 0!==o.aoMap&&(x.aoMap=l(o.aoMap)),void 0!==o.aoMapIntensity&&(x.aoMapIntensity=o.aoMapIntensity),void 0!==o.gradientMap&&(x.gradientMap=l(o.gradientMap)),x},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});
},{"../math/Color.js":"WOLJ","../math/Vector2.js":"qn61","../math/Vector3.js":"TKlu","../math/Vector4.js":"Z46c","../math/Matrix3.js":"ibIB","../math/Matrix4.js":"Rio0","./FileLoader.js":"4dVX","./LoadingManager.js":"Eb6M","../constants.js":"HNhV","../materials/LineBasicMaterial.js":"HCb9","../materials/LineDashedMaterial.js":"HwdB","../materials/MeshBasicMaterial.js":"5pcm","../materials/MeshDepthMaterial.js":"+N1O","../materials/MeshDistanceMaterial.js":"+HRM","../materials/MeshLambertMaterial.js":"eJER","../materials/MeshNormalMaterial.js":"Yb1f","../materials/MeshPhongMaterial.js":"0kfP","../materials/MeshPhysicalMaterial.js":"uqo1","../materials/MeshStandardMaterial.js":"U5eL","../materials/MeshToonMaterial.js":"tdcD","../materials/PointsMaterial.js":"oZSP","../materials/RawShaderMaterial.js":"nIA+","../materials/ShaderMaterial.js":"xLVs","../materials/ShadowMaterial.js":"Uuee","../materials/SpriteMaterial.js":"B15b"}],"ZxzG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=t;var e=require("../constants.js"),a=require("../math/Math.js"),r=require("./MaterialLoader.js"),s=require("./TextureLoader.js"),p=require("../math/Color.js");function t(){}t.Handlers={handlers:[],add:function(e,a){this.handlers.push(e,a)},get:function(e){for(var a=this.handlers,r=0,s=a.length;r<s;r+=2){var p=a[r],t=a[r+1];if(p.test(e))return t}return null}},Object.assign(t.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,a,r){for(var s=[],p=0;p<e.length;++p)s[p]=this.createMaterial(e[p],a,r);return s},createMaterial:function(){var o={NoBlending:e.NoBlending,NormalBlending:e.NormalBlending,AdditiveBlending:e.AdditiveBlending,SubtractiveBlending:e.SubtractiveBlending,MultiplyBlending:e.MultiplyBlending,CustomBlending:e.CustomBlending},i=new p.Color,n=new s.TextureLoader,m=new r.MaterialLoader;return function(r,s,p){var c={};function l(r,o,i,m,l){var u,f=s+r,d=t.Handlers.get(f);null!==d?u=d.load(f):(n.setCrossOrigin(p),u=n.load(f)),void 0!==o&&(u.repeat.fromArray(o),1!==o[0]&&(u.wrapS=e.RepeatWrapping),1!==o[1]&&(u.wrapT=e.RepeatWrapping)),void 0!==i&&u.offset.fromArray(i),void 0!==m&&("repeat"===m[0]&&(u.wrapS=e.RepeatWrapping),"mirror"===m[0]&&(u.wrapS=e.MirroredRepeatWrapping),"repeat"===m[1]&&(u.wrapT=e.RepeatWrapping),"mirror"===m[1]&&(u.wrapT=e.MirroredRepeatWrapping)),void 0!==l&&(u.anisotropy=l);var g=a._Math.generateUUID();return c[g]=u,g}var u={uuid:a._Math.generateUUID(),type:"MeshLambertMaterial"};for(var f in r){var d=r[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=d;break;case"blending":u.blending=o[d];break;case"colorAmbient":case"mapAmbient":console.warn("Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":u.color=i.fromArray(d).getHex();break;case"colorSpecular":u.specular=i.fromArray(d).getHex();break;case"colorEmissive":u.emissive=i.fromArray(d).getHex();break;case"specularCoef":u.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=l(d,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=l(d,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=l(d,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=l(d,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=l(d,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=l(d,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=d;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=l(d,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=l(d,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=l(d,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=l(d,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=e.BackSide;break;case"doubleSided":u.side=e.DoubleSide;break;case"transparency":console.warn("Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[f]=d;break;case"vertexColors":!0===d&&(u.vertexColors=e.VertexColors),"face"===d&&(u.vertexColors=e.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",f,d)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),m.setTextures(c),m.parse(u)}}()});
},{"../constants.js":"HNhV","../math/Math.js":"J7M1","./MaterialLoader.js":"yvz+","./TextureLoader.js":"lg6c","../math/Color.js":"WOLJ"}],"EExw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoaderUtils=void 0;var e={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r="",t=0,o=e.length;t<o;t++)r+=String.fromCharCode(e[t]);return decodeURIComponent(escape(r))},extractUrlBase:function(e){var r=e.lastIndexOf("/");return-1===r?"./":e.substr(0,r+1)}};exports.LoaderUtils=e;
},{}],"e9H6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PropertyBinding=r;var e="\\[\\]\\.:\\/";function t(e,t,n){var o=n||r.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}function r(e,t,n){this.path=t,this.parsedPath=n||r.parseTrackName(t),this.node=r.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(t.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,o=r.length;n!==o;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(r,{Composite:t,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new r.Composite(e,t,n):new r(e,t,n)},sanitizeNodeName:function(){var t=new RegExp("["+e+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+e+"]",r="[^"+e.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),o=/(WCOD+)?/.source.replace("WCOD",r),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),s=new RegExp("^"+n+o+i+a+"$"),d=["material","materials","bones"];return function(e){var t=s.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var o=r.nodeName.substring(n+1);-1!==d.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var o=e[r];if(o.name===t||o.uuid===t)return o;var i=n(o.children);if(i)return i}return null},o=n(e.children);if(o)return o}return null}}),Object.assign(r.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,o=t.propertyName,i=t.propertyIndex;if(e||(e=r.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[n])return void console.error("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var d=e[o];if(void 0!==d){var p=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===o){if(!e.geometry)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===i){i=s;break}}else{if(!e.geometry.morphTargets)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===i){i=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=i}else void 0!==d.fromArray&&void 0!==d.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(u=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][p]}else{var h=t.nodeName;console.error("PropertyBinding: Trying to update property for track: "+h+"."+o+" but it wasn't found.",e)}}else console.error("PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(r.prototype,{_getValue_unbound:r.prototype.getValue,_setValue_unbound:r.prototype.setValue});
},{}],"VhKS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferGeometryUtils=void 0;var r=require("../core/BufferAttribute.js"),e=require("../math/Vector3.js"),t=require("../math/Vector2.js"),n=require("../core/BufferGeometry.js"),a=require("../core/InterleavedBuffer.js"),o=require("../core/InterleavedBufferAttribute.js"),i={computeTangents:function(n){var a=n.index,o=n.attributes;if(null!==a&&void 0!==o.position&&void 0!==o.normal&&void 0!==o.uv){var i=a.array,u=o.position.array,s=o.normal.array,f=o.uv.array,l=u.length/3;void 0===o.tangent&&n.addAttribute("tangent",new r.BufferAttribute(new Float32Array(4*l),4));for(var c=o.tangent.array,v=[],d=[],g=0;g<l;g++)v[g]=new e.Vector3,d[g]=new e.Vector3;var m=new e.Vector3,h=new e.Vector3,y=new e.Vector3,b=new t.Vector2,A=new t.Vector2,p=new t.Vector2,w=new e.Vector3,B=new e.Vector3,x=n.groups;0===x.length&&(x=[{start:0,count:i.length}]);g=0;for(var z=x.length;g<z;++g)for(var V=T=(D=x[g]).start,S=T+D.count;V<S;V+=3)_(i[V+0],i[V+1],i[V+2]);var I,E,j,M=new e.Vector3,U=new e.Vector3,G=new e.Vector3,q=new e.Vector3;for(g=0,z=x.length;g<z;++g){var D,T;for(V=T=(D=x[g]).start,S=T+D.count;V<S;V+=3)O(i[V+0]),O(i[V+1]),O(i[V+2])}}else console.warn("BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function _(r,e,t){m.fromArray(u,3*r),h.fromArray(u,3*e),y.fromArray(u,3*t),b.fromArray(f,2*r),A.fromArray(f,2*e),p.fromArray(f,2*t);var n=h.x-m.x,a=y.x-m.x,o=h.y-m.y,i=y.y-m.y,s=h.z-m.z,l=y.z-m.z,c=A.x-b.x,g=p.x-b.x,x=A.y-b.y,z=p.y-b.y,V=1/(c*z-g*x);w.set((z*n-x*a)*V,(z*o-x*i)*V,(z*s-x*l)*V),B.set((c*a-g*n)*V,(c*i-g*o)*V,(c*l-g*s)*V),v[r].add(w),v[e].add(w),v[t].add(w),d[r].add(B),d[e].add(B),d[t].add(B)}function O(r){G.fromArray(s,3*r),q.copy(G),E=v[r],M.copy(E),M.sub(G.multiplyScalar(G.dot(E))).normalize(),U.crossVectors(q,E),j=U.dot(d[r]),I=j<0?-1:1,c[4*r]=M.x,c[4*r+1]=M.y,c[4*r+2]=M.z,c[4*r+3]=I}},mergeBufferGeometries:function(r,e){for(var t=null!==r[0].index,a=new Set(Object.keys(r[0].attributes)),o=new Set(Object.keys(r[0].morphAttributes)),i={},u={},s=new n.BufferGeometry,f=0,l=0;l<r.length;++l){var c=r[l];if(t!==(null!==c.index))return null;for(var v in c.attributes){if(!a.has(v))return null;void 0===i[v]&&(i[v]=[]),i[v].push(c.attributes[v])}for(var v in c.morphAttributes){if(!o.has(v))return null;void 0===u[v]&&(u[v]=[]),u[v].push(c.morphAttributes[v])}if(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(c.userData),e){var d;if(t)d=c.index.count;else{if(void 0===c.attributes.position)return null;d=c.attributes.position.count}s.addGroup(f,d,l),f+=d}}if(t){var g=0,m=[];for(l=0;l<r.length;++l){for(var h=r[l].index,y=0;y<h.count;++y)m.push(h.getX(y)+g);g+=r[l].attributes.position.count}s.setIndex(m)}for(var v in i){var b=this.mergeBufferAttributes(i[v]);if(!b)return null;s.addAttribute(v,b)}for(var v in u){var A=u[v][0].length;if(0===A)break;s.morphAttributes=s.morphAttributes||{},s.morphAttributes[v]=[];for(l=0;l<A;++l){var p=[];for(y=0;y<u[v].length;++y)p.push(u[v][y][l]);var w=this.mergeBufferAttributes(p);if(!w)return null;s.morphAttributes[v].push(w)}}return s},mergeBufferAttributes:function(e){for(var t,n,a,o=0,i=0;i<e.length;++i){var u=e[i];if(u.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=u.array.constructor),t!==u.array.constructor)return null;if(void 0===n&&(n=u.itemSize),n!==u.itemSize)return null;if(void 0===a&&(a=u.normalized),a!==u.normalized)return null;o+=u.array.length}var s=new t(o),f=0;for(i=0;i<e.length;++i)s.set(e[i].array,f),f+=e[i].array.length;return new r.BufferAttribute(s,n,a)},interleaveAttributes:function(r){for(var e,t=0,n=0,i=0,u=r.length;i<u;++i){var s=r[i];if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;t+=s.array.length,n+=s.itemSize}var f=new a.InterleavedBuffer(new e(t),n),l=0,c=[],v=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"],g=0;for(u=r.length;g<u;g++){var m=(s=r[g]).itemSize,h=s.count,y=new o.InterleavedBufferAttribute(f,m,l,s.normalized);c.push(y),l+=m;for(var b=0;b<h;b++)for(var A=0;A<m;A++)y[d[A]](b,s[v[A]](b))}return c},estimateBytesUsed:function(r){var e=0;for(var t in r.attributes){var n=r.getAttribute(t);e+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var a=r.getIndex();return e+=a?a.count*a.itemSize*a.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var n={},a=e.getIndex(),o=e.getAttribute("position"),i=a?a.count:o.count,u=0,s=Object.keys(e.attributes),f={},l={},c=[],v=["getX","getY","getZ","getW"],d=0,g=s.length;d<g;d++){f[B=s[d]]=[],(S=e.morphAttributes[B])&&(l[B]=new Array(S.length).fill().map(()=>[]))}for(var m=Math.log10(1/t),h=Math.pow(10,m),y=0;y<i;y++){for(var b=a?a.getX(y):y,A="",p=0,w=s.length;p<w;p++)for(var B=s[p],x=(V=e.getAttribute(B)).itemSize,z=0;z<x;z++)A+=`${~~(V[v[z]](b)*h)},`;if(A in n)c.push(n[A]);else{for(p=0,w=s.length;p<w;p++){B=s[p];var V=e.getAttribute(B),S=e.morphAttributes[B],I=(x=V.itemSize,f[B]),E=l[B];for(z=0;z<x;z++){var j=v[z];if(I.push(V[j](b)),S)for(var M=0,U=S.length;M<U;M++)E[M].push(S[M][j](b))}}n[A]=u,c.push(u),u++}}const G=e.clone();for(y=0,w=s.length;y<w;y++){B=s[y];var q=e.getAttribute(B),D=new q.array.constructor(f[B]);if(q.isInterleavedBufferAttribute?V=new r.BufferAttribute(D,q.itemSize,q.itemSize):(V=e.getAttribute(B).clone()).setArray(D),G.addAttribute(B,V),B in l)for(p=0;p<l[B].length;p++){var T=e.morphAttributes[B][p].clone();T.setArray(new T.array.constructor(l[B][p])),G.morphAttributes[B][p]=T}}var _=Uint8Array;c.length>=Math.pow(2,8)&&(_=Uint16Array),c.length>=Math.pow(2,16)&&(_=Uint32Array);var O=new _(c);c=null;return null===a?c=new r.BufferAttribute(O,1):(c=e.getIndex().clone()).setArray(O),G.setIndex(c),G}};exports.BufferGeometryUtils=i;
},{"../core/BufferAttribute.js":"mpLf","../math/Vector3.js":"TKlu","../math/Vector2.js":"qn61","../core/BufferGeometry.js":"e+4p","../core/InterleavedBuffer.js":"gGae","../core/InterleavedBufferAttribute.js":"PAFj"}],"J6/7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GLTFLoader=void 0;var e=require("../math/Interpolant.js"),r=require("./FileLoader.js"),t=require("./DDSLoader.js"),a=require("../math/Color.js"),n=require("../lights/DirectionalLight.js"),i=require("../lights/PointLight.js"),s=require("../lights/SpotLight.js"),o=require("../materials/ShaderMaterial.js"),l=require("../materials/MeshStandardMaterial.js"),u=require("../core/BufferAttribute.js"),c=require("./TextureLoader.js"),p=require("../core/InterleavedBuffer.js"),d=require("../core/InterleavedBufferAttribute.js"),h=require("../math/Vector2.js"),m=require("../core/BufferGeometry.js"),f=require("../objects/SkinnedMesh.js"),v=require("../objects/Mesh.js"),g=require("../objects/LineSegments.js"),M=require("../objects/Line.js"),S=require("../objects/LineLoop.js"),y=require("../objects/Points.js"),T=require("../materials/PointsMaterial.js"),L=require("../materials/LineBasicMaterial.js"),R=require("../objects/Group.js"),A=require("../cameras/PerspectiveCamera.js"),_=require("../cameras/OrthographicCamera.js"),b=require("../animation/AnimationClip.js"),x=require("../objects/Bone.js"),w=require("../core/Object3D.js"),E=require("../math/Matrix4.js"),P=require("../objects/Skeleton.js"),I=require("../scenes/Scene.js"),U=require("../constants.js"),F=require("./LoadingManager.js"),D=require("../materials/MeshBasicMaterial.js"),j=require("../renderers/shaders/ShaderLib.js"),C=require("../renderers/shaders/UniformsUtils.js"),G=require("./Loader.js"),O=require("./LoaderUtils.js"),N=require("../animation/AnimationUtils.js"),B=require("../math/Math.js"),k=require("../math/Matrix3.js"),H=require("../math/Vector3.js"),q=require("../math/Vector4.js"),K=require("../textures/Texture.js"),V=require("../materials/Material.js"),X=require("../animation/tracks/NumberKeyframeTrack.js"),z=require("../animation/tracks/QuaternionKeyframeTrack.js"),Y=require("../animation/tracks/VectorKeyframeTrack.js"),W=require("../animation/PropertyBinding.js"),Z=require("../utils/BufferGeometryUtils.js"),J=function(){function J(e){this.manager=void 0!==e?e:F.DefaultLoadingManager,this.dracoLoader=null}function Q(){var e={};return{get:function(r){return e[r]},add:function(r,t){e[r]=t},remove:function(r){delete e[r]},removeAll:function(){e={}}}}J.prototype={constructor:J,crossOrigin:"anonymous",load:function(e,t,a,n){var i,s=this;i=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:O.LoaderUtils.extractUrlBase(e),s.manager.itemStart(e);var o=function(r){n?n(r):console.error(r),s.manager.itemError(e),s.manager.itemEnd(e)},l=new r.FileLoader(s.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.load(e,function(r){try{s.parse(r,i,function(r){t(r),s.manager.itemEnd(e)},o)}catch(a){o(a)}},a,o)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,r,t,a){var n,i={};if("string"==typeof e)n=e;else if(O.LoaderUtils.decodeText(new Uint8Array(e,0,4))===ae){try{i[$.KHR_BINARY_GLTF]=new se(e)}catch(p){return void(a&&a(p))}n=i[$.KHR_BINARY_GLTF].content}else n=O.LoaderUtils.decodeText(new Uint8Array(e));var s=JSON.parse(n);if(void 0===s.asset||s.asset.version[0]<2)a&&a(new Error("GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(s.extensionsUsed)for(var o=0;o<s.extensionsUsed.length;++o){var l=s.extensionsUsed[o],u=s.extensionsRequired||[];switch(l){case $.KHR_LIGHTS_PUNCTUAL:i[l]=new re(s);break;case $.KHR_MATERIALS_UNLIT:i[l]=new te(s);break;case $.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[l]=new ue(s);break;case $.KHR_DRACO_MESH_COMPRESSION:i[l]=new oe(s,this.dracoLoader);break;case $.MSFT_TEXTURE_DDS:i[$.MSFT_TEXTURE_DDS]=new ee;break;case $.KHR_TEXTURE_TRANSFORM:i[$.KHR_TEXTURE_TRANSFORM]=new le(s);break;default:u.indexOf(l)>=0&&console.warn('GLTFLoader: Unknown extension "'+l+'".')}}var c=new Ge(s,i,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});c.parse(function(e,r,a,n,s){var o={scene:e,scenes:r,cameras:a,animations:n,asset:s.asset,parser:c,userData:{}};Pe(i,o,s),t(o)},a)}}};var $={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function ee(){if(!t.DDSLoader)throw new Error("GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=$.MSFT_TEXTURE_DDS,this.ddsLoader=new t.DDSLoader}function re(e){this.name=$.KHR_LIGHTS_PUNCTUAL;var r=e.extensions&&e.extensions[$.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=r.lights||[]}function te(e){this.name=$.KHR_MATERIALS_UNLIT}re.prototype.loadLight=function(e){var r,t=this.lightDefs[e],o=new a.Color(16777215);void 0!==t.color&&o.fromArray(t.color);var l=void 0!==t.range?t.range:0;switch(t.type){case"directional":(r=new n.DirectionalLight(o)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new i.PointLight(o)).distance=l;break;case"spot":(r=new s.SpotLight(o)).distance=l,t.spot=t.spot||{},t.spot.innerConeAngle=void 0!==t.spot.innerConeAngle?t.spot.innerConeAngle:0,t.spot.outerConeAngle=void 0!==t.spot.outerConeAngle?t.spot.outerConeAngle:Math.PI/4,r.angle=t.spot.outerConeAngle,r.penumbra=1-t.spot.innerConeAngle/t.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error('GLTFLoader: Unexpected light type, "'+t.type+'".')}return r.position.set(0,0,0),r.decay=2,void 0!==t.intensity&&(r.intensity=t.intensity),r.name=t.name||"light_"+e,Promise.resolve(r)},te.prototype.getMaterialType=function(e){return D.MeshBasicMaterial},te.prototype.extendParams=function(e,r,t){var n=[];e.color=new a.Color(1,1,1),e.opacity=1;var i=r.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var s=i.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==i.baseColorTexture&&n.push(t.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(n)};var ae="glTF",ne=12,ie={JSON:1313821514,BIN:5130562};function se(e){this.name=$.KHR_BINARY_GLTF,this.content=null,this.body=null;var r=new DataView(e,0,ne);if(this.header={magic:O.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==ae)throw new Error("GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var t=new DataView(e,ne),a=0;a<t.byteLength;){var n=t.getUint32(a,!0);a+=4;var i=t.getUint32(a,!0);if(a+=4,i===ie.JSON){var s=new Uint8Array(e,ne+a,n);this.content=O.LoaderUtils.decodeText(s)}else if(i===ie.BIN){var o=ne+a;this.body=e.slice(o,o+n)}a+=n}if(null===this.content)throw new Error("GLTFLoader: JSON content not found.")}function oe(e,r){if(!r)throw new Error("GLTFLoader: No DRACOLoader instance provided.");this.name=$.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,DRACOLoader.getDecoderModule()}function le(e){this.name=$.KHR_TEXTURE_TRANSFORM}function ue(){return{name:$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return o.ShaderMaterial},extendParams:function(e,r,t){var n=r.extensions[this.name],i=j.ShaderLib.standard,s=C.UniformsUtils.clone(i.uniforms),o=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),l=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),u=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),p=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=i.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",o).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",u).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",p);delete s.roughness,delete s.metalness,delete s.roughnessMap,delete s.metalnessMap,s.specular={value:(new a.Color).setHex(1118481)},s.glossiness={value:.5},s.specularMap={value:null},s.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=d,e.uniforms=s,e.defines={STANDARD:""},e.color=new a.Color(1,1,1),e.opacity=1;var h=[];if(Array.isArray(n.diffuseFactor)){var m=n.diffuseFactor;e.color.fromArray(m),e.opacity=m[3]}if(void 0!==n.diffuseTexture&&h.push(t.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new a.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new a.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var f=n.specularGlossinessTexture;h.push(t.assignTexture(e,"glossinessMap",f)),h.push(t.assignTexture(e,"specularMap",f))}return Promise.all(h)},createMaterial:function(e){var r=new o.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return r.isGLTFSpecularGlossinessMaterial=!0,r.color=e.color,r.map=void 0===e.map?null:e.map,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=void 0===e.aoMap?null:e.aoMap,r.aoMapIntensity=1,r.emissive=e.emissive,r.emissiveIntensity=1,r.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,r.bumpMap=void 0===e.bumpMap?null:e.bumpMap,r.bumpScale=1,r.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(r.normalScale=e.normalScale),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=void 0===e.specularMap?null:e.specularMap,r.specular=e.specular,r.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,r.glossiness=e.glossiness,r.alphaMap=null,r.envMap=void 0===e.envMap?null:e.envMap,r.envMapIntensity=1,r.refractionRatio=.98,r.extensions.derivatives=!0,r},cloneMaterial:function(e){var r=e.clone();r.isGLTFSpecularGlossinessMaterial=!0;for(var t=this.specularGlossinessParams,a=0,n=t.length;a<n;a++)r[t[a]]=e[t[a]];return r},refreshUniforms:function(e,r,t,a,n,i){if(!0===n.isGLTFSpecularGlossinessMaterial){var s,o=n.uniforms,l=n.defines;o.opacity.value=n.opacity,o.diffuse.value.copy(n.color),o.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),o.map.value=n.map,o.specularMap.value=n.specularMap,o.alphaMap.value=n.alphaMap,o.lightMap.value=n.lightMap,o.lightMapIntensity.value=n.lightMapIntensity,o.aoMap.value=n.aoMap,o.aoMapIntensity.value=n.aoMapIntensity,n.map?s=n.map:n.specularMap?s=n.specularMap:n.displacementMap?s=n.displacementMap:n.normalMap?s=n.normalMap:n.bumpMap?s=n.bumpMap:n.glossinessMap?s=n.glossinessMap:n.alphaMap?s=n.alphaMap:n.emissiveMap&&(s=n.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),n.envMap&&(o.envMap.value=n.envMap,o.envMapIntensity.value=n.envMapIntensity,o.flipEnvMap.value=n.envMap.isCubeTexture?-1:1,o.reflectivity.value=n.reflectivity,o.refractionRatio.value=n.refractionRatio,o.maxMipLevel.value=e.properties.get(n.envMap).__maxMipLevel),o.specular.value.copy(n.specular),o.glossiness.value=n.glossiness,o.glossinessMap.value=n.glossinessMap,o.emissiveMap.value=n.emissiveMap,o.bumpMap.value=n.bumpMap,o.normalMap.value=n.normalMap,o.displacementMap.value=n.displacementMap,o.displacementScale.value=n.displacementScale,o.displacementBias.value=n.displacementBias,null!==o.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function ce(r,t,a,n){e.Interpolant.call(this,r,t,a,n)}oe.prototype.decodePrimitive=function(e,r){var t=this.json,a=this.dracoLoader,n=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,s={},o={},l={};for(var u in i)u in Le&&(s[Le[u]]=i[u]);for(u in e.attributes)if(void 0!==Le[u]&&void 0!==i[u]){var c=t.accessors[e.attributes[u]],p=Me[c.componentType];l[Le[u]]=p,o[Le[u]]=!0===c.normalized}return r.getDependency("bufferView",n).then(function(e){return new Promise(function(r){a.decodeDracoFile(e,function(e){for(var t in e.attributes){var a=e.attributes[t],n=o[t];void 0!==n&&(a.normalized=n)}r(e)},s,l)})})},le.prototype.extendTexture=function(e,r){return e=e.clone(),void 0!==r.offset&&e.offset.fromArray(r.offset),void 0!==r.rotation&&(e.rotation=r.rotation),void 0!==r.scale&&e.repeat.fromArray(r.scale),void 0!==r.texCoord&&console.warn('GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},ce.prototype=Object.create(e.Interpolant.prototype),ce.prototype.constructor=ce,ce.prototype.copySampleValue_=function(e){for(var r=this.resultBuffer,t=this.sampleValues,a=this.valueSize,n=e*a*3+a,i=0;i!==a;i++)r[i]=t[n+i];return r},ce.prototype.beforeStart_=ce.prototype.copySampleValue_,ce.prototype.afterEnd_=ce.prototype.copySampleValue_,ce.prototype.interpolate_=function(e,r,t,a){for(var n=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,u=a-r,c=(t-r)/u,p=c*c,d=p*c,h=e*l,m=h-l,f=-2*d+3*p,v=d-p,g=1-f,M=v-p+c,S=0;S!==s;S++){var y=i[m+S+s],T=i[m+S+o]*u,L=i[h+S+s],R=i[h+S]*u;n[S]=g*y+M*T+f*L+v*R}return n};var pe=0,de=1,he=2,me=3,fe=4,ve=5,ge=6,Me=(Number,k.Matrix3,E.Matrix4,h.Vector2,H.Vector3,q.Vector4,K.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),Se={9728:U.NearestFilter,9729:U.LinearFilter,9984:U.NearestMipMapNearestFilter,9985:U.LinearMipMapNearestFilter,9986:U.NearestMipMapLinearFilter,9987:U.LinearMipMapLinearFilter},ye={33071:U.ClampToEdgeWrapping,33648:U.MirroredRepeatWrapping,10497:U.RepeatWrapping},Te=(U.BackSide,U.FrontSide,U.NeverDepth,U.LessDepth,U.EqualDepth,U.LessEqualDepth,U.GreaterEqualDepth,U.NotEqualDepth,U.GreaterEqualDepth,U.AlwaysDepth,U.AddEquation,U.SubtractEquation,U.ReverseSubtractEquation,U.ZeroFactor,U.OneFactor,U.SrcColorFactor,U.OneMinusSrcColorFactor,U.SrcAlphaFactor,U.OneMinusSrcAlphaFactor,U.DstAlphaFactor,U.OneMinusDstAlphaFactor,U.DstColorFactor,U.OneMinusDstColorFactor,U.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),Le={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Re={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ae={CUBICSPLINE:U.InterpolateSmooth,LINEAR:U.InterpolateLinear,STEP:U.InterpolateDiscrete},_e="OPAQUE",be="MASK",xe="BLEND",we={"image/png":U.RGBAFormat,"image/jpeg":U.RGBFormat};function Ee(e,r){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:r+e}function Pe(e,r,t){for(var a in t.extensions)void 0===e[a]&&(r.userData.gltfExtensions=r.userData.gltfExtensions||{},r.userData.gltfExtensions[a]=t.extensions[a])}function Ie(e,r){void 0!==r.extras&&("object"==typeof r.extras?e.userData=r.extras:console.warn("GLTFLoader: Ignoring primitive type .extras, "+r.extras))}function Ue(e,r){if(e.updateMorphTargets(),void 0!==r.weights)for(var t=0,a=r.weights.length;t<a;t++)e.morphTargetInfluences[t]=r.weights[t];if(r.extras&&Array.isArray(r.extras.targetNames)){var n=r.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(t=0,a=n.length;t<a;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Fe(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var t in e)if(e[t]!==r[t])return!1;return!0}function De(e){var r=e.extensions&&e.extensions[$.KHR_DRACO_MESH_COMPRESSION];return r?"draco:"+r.bufferView+":"+r.indices+":"+je(r.attributes):e.indices+":"+je(e.attributes)+":"+e.mode}function je(e){for(var r="",t=Object.keys(e).sort(),a=0,n=t.length;a<n;a++)r+=t[a]+":"+e[t[a]]+";";return r}function Ce(e){if(e.isInterleavedBufferAttribute){for(var r=e.count,t=e.itemSize,a=e.array.slice(0,r*t),n=0,i=0;n<r;++n)a[i++]=e.getX(n),t>=2&&(a[i++]=e.getY(n)),t>=3&&(a[i++]=e.getZ(n)),t>=4&&(a[i++]=e.getW(n));return new u.BufferAttribute(a,t,e.normalized)}return e.clone()}function Ge(e,t,a){this.json=e||{},this.extensions=t||{},this.options=a||{},this.cache=new Q,this.primitiveCache={},this.multiplePrimitivesCache={},this.multiPassGeometryCache={},this.textureLoader=new c.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function Oe(e,r,t){var a=r.attributes,n=[];function i(r,a){return t.getDependency("accessor",r).then(function(r){e.addAttribute(a,r)})}for(var s in a){var o=Le[s];o&&(o in e.attributes||n.push(i(a[s],o)))}if(void 0!==r.indices&&!e.index){var l=t.getDependency("accessor",r.indices).then(function(r){e.setIndex(r)});n.push(l)}return Ie(e,r),Promise.all(n).then(function(){return void 0!==r.targets?function(e,r,t){for(var a=!1,n=!1,i=0,s=r.length;i<s&&(void 0!==(u=r[i]).POSITION&&(a=!0),void 0!==u.NORMAL&&(n=!0),!a||!n);i++);if(!a&&!n)return Promise.resolve(e);var o=[],l=[];for(i=0,s=r.length;i<s;i++){var u=r[i];if(a){var c=void 0!==u.POSITION?t.getDependency("accessor",u.POSITION).then(function(e){return Ce(e)}):e.attributes.position;o.push(c)}n&&(c=void 0!==u.NORMAL?t.getDependency("accessor",u.NORMAL).then(function(e){return Ce(e)}):e.attributes.normal,l.push(c))}return Promise.all([Promise.all(o),Promise.all(l)]).then(function(t){for(var i=t[0],s=t[1],o=0,l=r.length;o<l;o++){var u=r[o],c="morphTarget"+o;if(a&&void 0!==u.POSITION){var p=i[o];p.name=c;for(var d=e.attributes.position,h=0,m=p.count;h<m;h++)p.setXYZ(h,p.getX(h)+d.getX(h),p.getY(h)+d.getY(h),p.getZ(h)+d.getZ(h))}if(n&&void 0!==u.NORMAL){var f=s[o];f.name=c;var v=e.attributes.normal;for(h=0,m=f.count;h<m;h++)f.setXYZ(h,f.getX(h)+v.getX(h),f.getY(h)+v.getY(h),f.getZ(h)+v.getZ(h))}}return a&&(e.morphAttributes.position=i),n&&(e.morphAttributes.normal=s),e})}(e,r.targets,t):e})}return Ge.prototype.parse=function(e,r){var t=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(r){var a=r.scenes||[],n=a[t.scene||0],i=r.animations||[],s=r.cameras||[];e(n,a,s,i,t)}).catch(r)},Ge.prototype.markDefs=function(){for(var e=this.json.nodes||[],r=this.json.skins||[],t=this.json.meshes||[],a={},n={},i=0,s=r.length;i<s;i++)for(var o=r[i].joints,l=0,u=o.length;l<u;l++)e[o[l]].isBone=!0;for(var c=0,p=e.length;c<p;c++){var d=e[c];void 0!==d.mesh&&(void 0===a[d.mesh]&&(a[d.mesh]=n[d.mesh]=0),a[d.mesh]++,void 0!==d.skin&&(t[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=a,this.json.meshUses=n},Ge.prototype.getDependency=function(e,r){var t=e+":"+r,a=this.cache.get(t);if(!a){switch(e){case"scene":a=this.loadScene(r);break;case"node":a=this.loadNode(r);break;case"mesh":a=this.loadMesh(r);break;case"accessor":a=this.loadAccessor(r);break;case"bufferView":a=this.loadBufferView(r);break;case"buffer":a=this.loadBuffer(r);break;case"material":a=this.loadMaterial(r);break;case"texture":a=this.loadTexture(r);break;case"skin":a=this.loadSkin(r);break;case"animation":a=this.loadAnimation(r);break;case"camera":a=this.loadCamera(r);break;case"light":a=this.extensions[$.KHR_LIGHTS_PUNCTUAL].loadLight(r);break;default:throw new Error("Unknown type: "+e)}this.cache.add(t,a)}return a},Ge.prototype.getDependencies=function(e){var r=this.cache.get(e);if(!r){var t=this,a=this.json[e+("mesh"===e?"es":"s")]||[];r=Promise.all(a.map(function(r,a){return t.getDependency(e,a)})),this.cache.add(e,r)}return r},Ge.prototype.getMultiDependencies=function(e){for(var r={},t=[],a=0,n=e.length;a<n;a++){var i=e[a],s=this.getDependencies(i);s=s.then(function(e,t){r[e]=t}.bind(this,i+("mesh"===i?"es":"s"))),t.push(s)}return Promise.all(t).then(function(){return r})},Ge.prototype.loadBuffer=function(e){var r=this.json.buffers[e],t=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===e)return Promise.resolve(this.extensions[$.KHR_BINARY_GLTF].body);var a=this.options;return new Promise(function(e,n){t.load(Ee(r.uri,a.path),e,void 0,function(){n(new Error('GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})},Ge.prototype.loadBufferView=function(e){var r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(e){var t=r.byteLength||0,a=r.byteOffset||0;return e.slice(a,a+t)})},Ge.prototype.loadAccessor=function(e){var r=this,t=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return Promise.resolve(null);var n=[];return void 0!==a.bufferView?n.push(this.getDependency("bufferView",a.bufferView)):n.push(null),void 0!==a.sparse&&(n.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(n).then(function(e){var n,i,s=e[0],o=Te[a.type],l=Me[a.componentType],c=l.BYTES_PER_ELEMENT,h=c*o,m=a.byteOffset||0,f=void 0!==a.bufferView?t.bufferViews[a.bufferView].byteStride:void 0,v=!0===a.normalized;if(f&&f!==h){var g="InterleavedBuffer:"+a.bufferView+":"+a.componentType,M=r.cache.get(g);M||(n=new l(s),M=new p.InterleavedBuffer(n,f/c),r.cache.add(g,M)),i=new d.InterleavedBufferAttribute(M,o,m/c,v)}else n=null===s?new l(a.count*o):new l(s,m,a.count*o),i=new u.BufferAttribute(n,o,v);if(void 0!==a.sparse){var S=Te.SCALAR,y=Me[a.sparse.indices.componentType],T=a.sparse.indices.byteOffset||0,L=a.sparse.values.byteOffset||0,R=new y(e[1],T,a.sparse.count*S),A=new l(e[2],L,a.sparse.count*o);null!==s&&i.setArray(i.array.slice());for(var _=0,b=R.length;_<b;_++){var x=R[_];if(i.setX(x,A[_*o]),o>=2&&i.setY(x,A[_*o+1]),o>=3&&i.setZ(x,A[_*o+2]),o>=4&&i.setW(x,A[_*o+3]),o>=5)throw new Error("GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},Ge.prototype.loadTexture=function(e){var r,t=this,a=this.json,n=this.options,i=this.textureLoader,s=window.URL||window.webkitURL,o=a.textures[e],l=o.extensions||{},u=(r=l[$.MSFT_TEXTURE_DDS]?a.images[l[$.MSFT_TEXTURE_DDS].source]:a.images[o.source]).uri,c=!1;return void 0!==r.bufferView&&(u=t.getDependency("bufferView",r.bufferView).then(function(e){c=!0;var t=new Blob([e],{type:r.mimeType});return u=s.createObjectURL(t)})),Promise.resolve(u).then(function(e){var r=G.Loader.Handlers.get(e);return r||(r=l[$.MSFT_TEXTURE_DDS]?t.extensions[$.MSFT_TEXTURE_DDS].ddsLoader:i),new Promise(function(t,a){r.load(Ee(e,n.path),t,void 0,a)})}).then(function(e){!0===c&&s.revokeObjectURL(u),e.flipY=!1,void 0!==o.name&&(e.name=o.name),r.mimeType in we&&(e.format=we[r.mimeType]);var t=(a.samplers||{})[o.sampler]||{};return e.magFilter=Se[t.magFilter]||U.LinearFilter,e.minFilter=Se[t.minFilter]||U.LinearMipMapLinearFilter,e.wrapS=ye[t.wrapS]||U.RepeatWrapping,e.wrapT=ye[t.wrapT]||U.RepeatWrapping,e})},Ge.prototype.assignTexture=function(e,r,t){var a=this;return this.getDependency("texture",t.index).then(function(n){switch(r){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":n.format=U.RGBFormat}if(a.extensions[$.KHR_TEXTURE_TRANSFORM]){var i=void 0!==t.extensions?t.extensions[$.KHR_TEXTURE_TRANSFORM]:void 0;i&&(n=a.extensions[$.KHR_TEXTURE_TRANSFORM].extendTexture(n,i))}e[r]=n})},Ge.prototype.loadMaterial=function(e){var r,t=this.json,n=this.extensions,i=t.materials[e],s={},u=i.extensions||{},c=[];if(u[$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var p=n[$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];r=p.getMaterialType(i),c.push(p.extendParams(s,i,this))}else if(u[$.KHR_MATERIALS_UNLIT]){var d=n[$.KHR_MATERIALS_UNLIT];r=d.getMaterialType(i),c.push(d.extendParams(s,i,this))}else{r=l.MeshStandardMaterial;var m=i.pbrMetallicRoughness||{};if(s.color=new a.Color(1,1,1),s.opacity=1,Array.isArray(m.baseColorFactor)){var f=m.baseColorFactor;s.color.fromArray(f),s.opacity=f[3]}void 0!==m.baseColorTexture&&c.push(this.assignTexture(s,"map",m.baseColorTexture)),s.metalness=void 0!==m.metallicFactor?m.metallicFactor:1,s.roughness=void 0!==m.roughnessFactor?m.roughnessFactor:1,void 0!==m.metallicRoughnessTexture&&(c.push(this.assignTexture(s,"metalnessMap",m.metallicRoughnessTexture)),c.push(this.assignTexture(s,"roughnessMap",m.metallicRoughnessTexture)))}!0===i.doubleSided&&(s.side=U.DoubleSide);var v=i.alphaMode||_e;return v===xe?s.transparent=!0:(s.transparent=!1,v===be&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&r!==D.MeshBasicMaterial&&(c.push(this.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new h.Vector2(1,1),void 0!==i.normalTexture.scale&&s.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&r!==D.MeshBasicMaterial&&(c.push(this.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&r!==D.MeshBasicMaterial&&(s.emissive=(new a.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&r!==D.MeshBasicMaterial&&c.push(this.assignTexture(s,"emissiveMap",i.emissiveTexture)),Promise.all(c).then(function(){var e;return e=r===o.ShaderMaterial?n[$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new r(s),void 0!==i.name&&(e.name=i.name),e.map&&(e.map.encoding=U.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=U.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=U.sRGBEncoding),Ie(e,i),i.extensions&&Pe(n,e,i),e})},Ge.prototype.loadGeometries=function(e){var r,t=this,a=this.extensions,n=this.primitiveCache,i=function(e){if(e.length<2)return!1;var r=e[0],t=r.targets||[];if(void 0===r.indices)return!1;for(var a=1,n=e.length;a<n;a++){var i=e[a];if(r.mode!==i.mode)return!1;if(void 0===i.indices)return!1;if(i.extensions&&i.extensions[$.KHR_DRACO_MESH_COMPRESSION])return!1;if(!Fe(r.attributes,i.attributes))return!1;var s=i.targets||[];if(t.length!==s.length)return!1;for(var o=0,l=t.length;o<l;o++)if(!Fe(t[o],s[o]))return!1}return!0}(e);function s(e){return a[$.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(r){return Oe(r,e,t)})}i&&(r=e,e=[e[0]]);for(var o=[],l=0,u=e.length;l<u;l++){var c,p=e[l],d=De(p),h=n[d];if(h)o.push(h.promise);else c=p.extensions&&p.extensions[$.KHR_DRACO_MESH_COMPRESSION]?s(p):Oe(new m.BufferGeometry,p,t),n[d]={primitive:p,promise:c},o.push(c)}return Promise.all(o).then(function(a){if(i){var n=a[0],s=t.multiPassGeometryCache,o=function(e,r){for(var t=e.uuid,a=0,n=r.length;a<n;a++)t+=a+De(r[a]);return t}(n,r);if(null!==(h=s[o]))return[h.geometry];var l=new m.BufferGeometry;for(var u in l.name=n.name,l.userData=n.userData,n.attributes)l.addAttribute(u,n.attributes[u]);for(var u in n.morphAttributes)l.morphAttributes[u]=n.morphAttributes[u];for(var c=[],p=0,d=r.length;p<d;p++)c.push(t.getDependency("accessor",r[p].indices));return Promise.all(c).then(function(e){for(var t=[],a=0,i=0,u=r.length;i<u;i++){for(var c=e[i],p=0,d=c.count;p<d;p++)t.push(c.array[p]);l.addGroup(a,c.count,i),a+=c.count}return l.setIndex(t),s[o]={geometry:l,baseGeometry:n,primitives:r},[l]})}if(a.length>1&&void 0!==Z.BufferGeometryUtils){for(p=1,d=e.length;p<d;p++)if(e[0].mode!==e[p].mode)return a;var h;s=t.multiplePrimitivesCache,o=function(e){for(var r="",t=0,a=e.length;t<a;t++)r+=":"+e[t].uuid;return r}(a);if(h=s[o]){if(null!==h.geometry)return[h.geometry]}else{l=Z.BufferGeometryUtils.mergeBufferGeometries(a,!0);if(s[o]={geometry:l,baseGeometries:a},null!==l)return[l]}}return a})},Ge.prototype.loadMesh=function(e){for(var r=this,t=this.json,a=this.extensions,n=t.meshes[e],i=n.primitives,s=[],o=0,c=i.length;o<c;o++){var p=void 0===i[o].material?new l.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:U.FrontSide}):this.getDependency("material",i[o].material);s.push(p)}return Promise.all(s).then(function(t){return r.loadGeometries(i).then(function(s){for(var o=1===s.length&&s[0].groups.length>0,l=[],c=0,p=s.length;c<p;c++){var d,h=s[c],m=i[c],A=o?t:t[c];if(m.mode===fe||m.mode===ve||m.mode===ge||void 0===m.mode)!0===(d=!0===n.isSkinnedMesh?new f.SkinnedMesh(h,A):new v.Mesh(h,A)).isSkinnedMesh&&d.normalizeSkinWeights(),m.mode===ve?d.drawMode=U.TriangleStripDrawMode:m.mode===ge&&(d.drawMode=U.TriangleFanDrawMode);else if(m.mode===de)d=new g.LineSegments(h,A);else if(m.mode===me)d=new M.Line(h,A);else if(m.mode===he)d=new S.LineLoop(h,A);else{if(m.mode!==pe)throw new Error("GLTFLoader: Primitive mode unsupported: "+m.mode);d=new y.Points(h,A)}Object.keys(d.geometry.morphAttributes).length>0&&Ue(d,n),d.name=n.name||"mesh_"+e,s.length>1&&(d.name+="_"+c),Ie(d,n),l.push(d);for(var _=o?d.material:[d.material],b=void 0!==h.attributes.tangent,x=void 0!==h.attributes.color,w=void 0===h.attributes.normal,E=!0===d.isSkinnedMesh,P=Object.keys(h.morphAttributes).length>0,I=P&&void 0!==h.morphAttributes.normal,F=0,D=_.length;F<D;F++){A=_[F];if(d.isPoints){var j="PointsMaterial:"+A.uuid,C=r.cache.get(j);C||(C=new T.PointsMaterial,V.Material.prototype.copy.call(C,A),C.color.copy(A.color),C.map=A.map,C.lights=!1,r.cache.add(j,C)),A=C}else if(d.isLine){j="LineBasicMaterial:"+A.uuid;var G=r.cache.get(j);G||(G=new L.LineBasicMaterial,V.Material.prototype.copy.call(G,A),G.color.copy(A.color),G.lights=!1,r.cache.add(j,G)),A=G}if(b||x||w||E||P){j="ClonedMaterial:"+A.uuid+":";A.isGLTFSpecularGlossinessMaterial&&(j+="specular-glossiness:"),E&&(j+="skinning:"),b&&(j+="vertex-tangents:"),x&&(j+="vertex-colors:"),w&&(j+="flat-shading:"),P&&(j+="morph-targets:"),I&&(j+="morph-normals:");var O=r.cache.get(j);O||(O=A.isGLTFSpecularGlossinessMaterial?a[$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(A):A.clone(),E&&(O.skinning=!0),b&&(O.vertexTangents=!0),x&&(O.vertexColors=U.VertexColors),w&&(O.flatShading=!0),P&&(O.morphTargets=!0),I&&(O.morphNormals=!0),r.cache.add(j,O)),A=O}_[F]=A,A.aoMap&&void 0===h.attributes.uv2&&void 0!==h.attributes.uv&&(console.log("GLTFLoader: Duplicating UVs to support aoMap."),h.addAttribute("uv2",new u.BufferAttribute(h.attributes.uv.array,2))),A.isGLTFSpecularGlossinessMaterial&&(d.onBeforeRender=a[$.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}d.material=o?_:_[0]}if(1===l.length)return l[0];var N=new R.Group;for(c=0,p=l.length;c<p;c++)N.add(l[c]);return N})})},Ge.prototype.loadCamera=function(e){var r,t=this.json.cameras[e],a=t[t.type];if(a)return"perspective"===t.type?r=new A.PerspectiveCamera(B._Math.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===t.type&&(r=new _.OrthographicCamera(a.xmag/-2,a.xmag/2,a.ymag/2,a.ymag/-2,a.znear,a.zfar)),void 0!==t.name&&(r.name=t.name),Ie(r,t),Promise.resolve(r);console.warn("GLTFLoader: Missing camera parameters.")},Ge.prototype.loadSkin=function(e){var r=this.json.skins[e],t={joints:r.joints};return void 0===r.inverseBindMatrices?Promise.resolve(t):this.getDependency("accessor",r.inverseBindMatrices).then(function(e){return t.inverseBindMatrices=e,t})},Ge.prototype.loadAnimation=function(e){for(var r=this.json.animations[e],t=[],a=[],n=[],i=[],s=[],o=0,l=r.channels.length;o<l;o++){var u=r.channels[o],c=r.samplers[u.sampler],p=u.target,d=void 0!==p.node?p.node:p.id,h=void 0!==r.parameters?r.parameters[c.input]:c.input,m=void 0!==r.parameters?r.parameters[c.output]:c.output;t.push(this.getDependency("node",d)),a.push(this.getDependency("accessor",h)),n.push(this.getDependency("accessor",m)),i.push(c),s.push(p)}return Promise.all([Promise.all(t),Promise.all(a),Promise.all(n),Promise.all(i),Promise.all(s)]).then(function(t){for(var a=t[0],n=t[1],i=t[2],s=t[3],o=t[4],l=[],u=0,c=a.length;u<c;u++){var p=a[u],d=n[u],h=i[u],m=s[u],f=o[u];if(void 0!==p){var v;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,Re[f.path]){case Re.weights:v=X.NumberKeyframeTrack;break;case Re.rotation:v=z.QuaternionKeyframeTrack;break;case Re.position:case Re.scale:default:v=Y.VectorKeyframeTrack}var g=p.name?p.name:p.uuid,M=void 0!==m.interpolation?Ae[m.interpolation]:U.InterpolateLinear,S=[];Re[f.path]===Re.weights?p.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&S.push(e.name?e.name:e.uuid)}):S.push(g);for(var y=0,T=S.length;y<T;y++){var L=new v(S[y]+"."+Re[f.path],N.AnimationUtils.arraySlice(d.array,0),N.AnimationUtils.arraySlice(h.array,0),M);"CUBICSPLINE"===m.interpolation&&(L.createInterpolant=function(e){return new ce(this.times,this.values,this.getValueSize()/3,e)},L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(L)}}}var R=void 0!==r.name?r.name:"animation_"+e;return new b.AnimationClip(R,void 0,l)})},Ge.prototype.loadNode=function(e){var r=this.json,t=this.extensions,a=this,n=r.meshReferences,i=r.meshUses,s=r.nodes[e];return(!0===s.isBone?Promise.resolve(new x.Bone):void 0!==s.mesh?a.getDependency("mesh",s.mesh).then(function(e){var r;if(n[s.mesh]>1){var t=i[s.mesh]++;(r=e.clone()).name+="_instance_"+t,r.onBeforeRender=e.onBeforeRender;for(var a=0,o=r.children.length;a<o;a++)r.children[a].name+="_instance_"+t,r.children[a].onBeforeRender=e.children[a].onBeforeRender}else r=e;return void 0!==s.weights&&r.traverse(function(e){if(e.isMesh)for(var r=0,t=s.weights.length;r<t;r++)e.morphTargetInfluences[r]=s.weights[r]}),r}):void 0!==s.camera?a.getDependency("camera",s.camera):s.extensions&&s.extensions[$.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[$.KHR_LIGHTS_PUNCTUAL].light?a.getDependency("light",s.extensions[$.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new w.Object3D)).then(function(e){if(void 0!==s.name&&(e.name=W.PropertyBinding.sanitizeNodeName(s.name)),Ie(e,s),s.extensions&&Pe(t,e,s),void 0!==s.matrix){var r=new E.Matrix4;r.fromArray(s.matrix),e.applyMatrix(r)}else void 0!==s.translation&&e.position.fromArray(s.translation),void 0!==s.rotation&&e.quaternion.fromArray(s.rotation),void 0!==s.scale&&e.scale.fromArray(s.scale);return e})},Ge.prototype.loadScene=function(){function e(r,t,a,n){var i=a.nodes[r];return n.getDependency("node",r).then(function(e){return void 0===i.skin?e:n.getDependency("skin",i.skin).then(function(e){for(var t=[],a=0,i=(r=e).joints.length;a<i;a++)t.push(n.getDependency("node",r.joints[a]));return Promise.all(t)}).then(function(t){for(var a=!0===e.isGroup?e.children:[e],n=0,i=a.length;n<i;n++){for(var s=a[n],o=[],l=[],u=0,c=t.length;u<c;u++){var p=t[u];if(p){o.push(p);var d=new E.Matrix4;void 0!==r.inverseBindMatrices&&d.fromArray(r.inverseBindMatrices.array,16*u),l.push(d)}else console.warn('GLTFLoader: Joint "%s" could not be found.',r.joints[u])}s.bind(new P.Skeleton(o,l),s.matrixWorld)}return e});var r}).then(function(r){t.add(r);var s=[];if(i.children)for(var o=i.children,l=0,u=o.length;l<u;l++){var c=o[l];s.push(e(c,r,a,n))}return Promise.all(s)})}return function(r){var t=this.json,a=this.extensions,n=this.json.scenes[r],i=new I.Scene;void 0!==n.name&&(i.name=n.name),Ie(i,n),n.extensions&&Pe(a,i,n);for(var s=n.nodes||[],o=[],l=0,u=s.length;l<u;l++)o.push(e(s[l],i,t,this));return Promise.all(o).then(function(){return i})}}(),J}();exports.GLTFLoader=J;
},{"../math/Interpolant.js":"RFzX","./FileLoader.js":"4dVX","./DDSLoader.js":"4fkn","../math/Color.js":"WOLJ","../lights/DirectionalLight.js":"mZTM","../lights/PointLight.js":"ef09","../lights/SpotLight.js":"LPRn","../materials/ShaderMaterial.js":"xLVs","../materials/MeshStandardMaterial.js":"U5eL","../core/BufferAttribute.js":"mpLf","./TextureLoader.js":"lg6c","../core/InterleavedBuffer.js":"gGae","../core/InterleavedBufferAttribute.js":"PAFj","../math/Vector2.js":"qn61","../core/BufferGeometry.js":"e+4p","../objects/SkinnedMesh.js":"ghAq","../objects/Mesh.js":"QChY","../objects/LineSegments.js":"BsrJ","../objects/Line.js":"aIAo","../objects/LineLoop.js":"6KdS","../objects/Points.js":"sG1g","../materials/PointsMaterial.js":"oZSP","../materials/LineBasicMaterial.js":"HCb9","../objects/Group.js":"Wfuz","../cameras/PerspectiveCamera.js":"94uR","../cameras/OrthographicCamera.js":"YP16","../animation/AnimationClip.js":"0MwG","../objects/Bone.js":"em2F","../core/Object3D.js":"Kems","../math/Matrix4.js":"Rio0","../objects/Skeleton.js":"BmRL","../scenes/Scene.js":"Baxu","../constants.js":"HNhV","./LoadingManager.js":"Eb6M","../materials/MeshBasicMaterial.js":"5pcm","../renderers/shaders/ShaderLib.js":"HCi4","../renderers/shaders/UniformsUtils.js":"cR4K","./Loader.js":"ZxzG","./LoaderUtils.js":"EExw","../animation/AnimationUtils.js":"Yaq1","../math/Math.js":"J7M1","../math/Matrix3.js":"ibIB","../math/Vector3.js":"TKlu","../math/Vector4.js":"Z46c","../textures/Texture.js":"05Bz","../materials/Material.js":"FNW4","../animation/tracks/NumberKeyframeTrack.js":"tUi2","../animation/tracks/QuaternionKeyframeTrack.js":"KLuP","../animation/tracks/VectorKeyframeTrack.js":"+7PS","../animation/PropertyBinding.js":"e9H6","../utils/BufferGeometryUtils.js":"VhKS"}],"A626":[function(require,module,exports) {
module.exports="/mswsn3d.b74d4761.glb";
},{}],"x1M8":[function(require,module,exports) {
module.exports="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\nattribute vec3 position;\nattribute vec2 uv;\nattribute vec3 normal;\n\nuniform float time;\nuniform float scroll;\nuniform float hoverVal;\nuniform float index;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvarying vec2 vUv;\nvarying vec3 nposition;\nvarying vec3 vNormal;\n\nvoid main(){\n\tvUv=uv;\n\t\n\tvNormal=normal;\n\t\n\tvec3 offset=position;\n\tfloat dist=(sin(time/10.)+1.)*.05*scroll+scroll;\n\t\n\toffset.xyz+=normal*dist;\n\t\n\tvec3 hoveredOffset=offset;\n\tfloat noiseA=snoise(vec4(hoveredOffset.xyz,sin(time/20.)/20.))/200.;\n\tfloat noiseB=snoise(vec4(hoveredOffset.xyz,cos(time/20.)/20.))/200.;\n\t\n\thoveredOffset+=normal*mix(noiseA,noiseB,index);\n\t\n\tvec3 finalPosition=mix(offset,hoveredOffset,hoverVal);\n\t\n\tnposition=position;\n\t\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(finalPosition,1.);\n}";
},{}],"0WeQ":[function(require,module,exports) {
module.exports="precision mediump float;\n#define GLSLIFY 1\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\nfloat hue2rgb(float f1, float f2, float hue) {\n    if (hue < 0.0)\n        hue += 1.0;\n    else if (hue > 1.0)\n        hue -= 1.0;\n    float res;\n    if ((6.0 * hue) < 1.0)\n        res = f1 + (f2 - f1) * 6.0 * hue;\n    else if ((2.0 * hue) < 1.0)\n        res = f2;\n    else if ((3.0 * hue) < 2.0)\n        res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n    else\n        res = f1;\n    return res;\n}\n\nvec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb;\n    \n    if (hsl.y == 0.0) {\n        rgb = vec3(hsl.z); // Luminance\n    } else {\n        float f2;\n        \n        if (hsl.z < 0.5)\n            f2 = hsl.z * (1.0 + hsl.y);\n        else\n            f2 = hsl.z + hsl.y - hsl.y * hsl.z;\n            \n        float f1 = 2.0 * hsl.z - f2;\n        \n        rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\n        rgb.g = hue2rgb(f1, f2, hsl.x);\n        rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\n    }   \n    return rgb;\n}\n\nvec3 hsl2rgb(float h, float s, float l) {\n    return hsl2rgb(vec3(h, s, l));\n}\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nfloat luma(vec4 color) {\n  return dot(color.rgb, vec3(0.299, 0.587, 0.114));\n}\n\nfloat character(float n, vec2 p) {\n  p = floor(p*vec2(4.0, -4.0) + 2.5);\n  if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y){\n    if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n  }\n  return 0.0;\n}\n\nfloat asciiFilter(vec3 color, vec2 uv, float pixelSize) {\n  float threshold = luma(color);\n  float n =  65536.0;                  // .\n  if (threshold > 0.2) n = 65600.0;    // :\n  if (threshold > 0.3) n = 332772.0;   // *\n  if (threshold > 0.4) n = 15255086.0; // o\n  if (threshold > 0.5) n = 23385164.0; // &\n  if (threshold > 0.6) n = 15252014.0; // 8\n  if (threshold > 0.7) n = 13199452.0; // @\n  if (threshold > 0.8) n = 11512810.0; // #\n  vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n  return character(n, p);\n}\n\nfloat asciiFilter(vec3 color, vec2 uv) {\n  return asciiFilter(color, uv, 1.0 / 25.0);\n}\n\nuniform float time;\nuniform float scroll;\nuniform float hoverVal;\nuniform float index;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 nposition;\n\nfloat norm1(float factor){\n\treturn sin((vNormal.y*nposition.x)/time*factor);\n}\n\nvoid main(){\n\tvec4 colorA=vec4(.02,0.,(sin(time/vNormal.y)+.5)*.4,norm1(.01)+.5);\n\tvec4 colorB=vec4(norm1(1.)+.5,.2,1.,(norm1(.01)+.5)*5.);\n\t\n\tfloat slowTime=time*.01;\n\t\n\tfloat n=snoise(vec4(vNormal.xyz,slowTime));\n\tvec3 hovercolor1=hsl2rgb(.75+n*.2-.1*index,.85,.5*vNormal.x);\n\t\n\t// vec3 hoverAscii=hovercolor1*asciiFilter(hovercolor1,vUv.xy);\n\t\n\tvec4 hoveredMix=vec4(hovercolor1,.1);\n\tvec4 untouched=mix(colorA,colorB,sin((time*vNormal.y)/10.));\n\t\n\tvec4 color=mix(untouched,hoveredMix,hoverVal);\n\t\n\tgl_FragColor=color;\n}";
},{}],"6PNS":[function(require,module,exports) {
module.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform float time;\nuniform float scroll;\nuniform float hoverVal;\nuniform float index;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 nposition;\n\nfloat norm1(float factor){\n\treturn sin((vNormal.y*nposition.x)/time*factor);\n}\n\nvoid main(){\n\tvec4 colorA=vec4(.02,0.,(sin(time/vNormal.y)+.5)*.4,norm1(.01)+.5);\n\tvec4 colorB=vec4(norm1(1.)+.5,.2,1.,(norm1(.01)+.5)*5.);\n\t\n\tvec4 color=mix(colorA,colorB,sin((time*vNormal.y)/10.));\n\t\n\tgl_FragColor=color;\n}";
},{}],"bcrK":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.Stats=n()}(this,function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function l(e){return n.appendChild(e.dom),e}function i(e){for(var l=0;l<n.children.length;l++)n.children[l].style.display=l===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),i(++t%n.children.length)},!1);var a=(performance||Date).now(),o=a,r=0,f=l(new e.Panel("FPS","#0ff","#002")),c=l(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=l(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:l,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(c.update(e-a,200),o+1e3<=e&&(f.update(1e3*r/(e-o),100),o=e,r=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:n,setMode:i}};return e.Panel=function(e,t,n){var l=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),r=80*o,f=48*o,c=3*o,d=2*o,p=3*o,u=15*o,s=74*o,m=30*o,h=document.createElement("canvas");h.width=r,h.height=f,h.style.cssText="width:80px;height:48px";var v=h.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,r,f),v.fillStyle=t,v.fillText(e,c,d),v.fillRect(p,u,s,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p,u,s,m),{dom:h,update:function(f,y){l=Math.min(l,f),i=Math.max(i,f),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,r,u),v.fillStyle=t,v.fillText(a(f)+" "+e+" ("+a(l)+"-"+a(i)+")",c,d),v.drawImage(h,p+o,u,s-o,m,p,u,s-o,m),v.fillRect(p+s-o,u,o,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p+s-o,u,o,a((1-f/y)*m))}}},e});
},{}],"//+0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("three-full/sources/scenes/Scene"),r=require("three-full/sources/cameras/OrthographicCamera"),t=require("three-full/sources/renderers/WebGLRenderer"),a=require("three-full/sources/materials/RawShaderMaterial"),n=require("three-full/sources/math/Vector2"),o=require("three-full/sources/math/Vector3"),s=require("three-full/sources/postprocessing/RenderPass"),i=require("three-full/sources/postprocessing/ShaderPass"),l=require("./GlitchPassMod"),u=require("three-full/sources/postprocessing/UnrealBloomPass"),d=require("three-full/sources/postprocessing/EffectComposer"),c=require("three-full/sources/postprocessing/FilmPass"),f=require("three-full/sources/shaders/FXAAShader"),v=require("three-full/sources/loaders/GLTFLoader"),h=P(require("../assets/mswsn3d.glb")),m=P(require("../shaders/vertex1.glsl")),p=P(require("../shaders/fragment-desktop.glsl")),w=P(require("../shaders/fragment-mobile.glsl")),g=P(require("stats-js"));function P(e){return e&&e.__esModule?e:{default:e}}function x(e,r){return b(e)||S(e,r)||q()}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function S(e,r){var t=[],a=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(t.push(s.value),!r||t.length!==r);a=!0);}catch(l){n=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return t}function b(e){if(Array.isArray(e))return e}var y=function(P){var q=P.width,S=P.height,b=P.browserPixelRatio,y=P.onMobile,M=P.devMode,V=y?.15:0,A=new e.Scene,R=new r.OrthographicCamera,I=new t.WebGLRenderer({alpha:!0}),T=new a.RawShaderMaterial({uniforms:{time:{value:1},hoverVal:{value:0},index:{value:.5},scroll:{value:0},resolution:{value:new n.Vector2}},vertexShader:m.default,fragmentShader:y?w.default:p.default}),F=M?new g.default:null;M&&(F.showPanel(0),document.body.appendChild(F.dom));var z=function(){var e=new s.RenderPass(A,R),r=new u.UnrealBloomPass(new n.Vector2(q,S),1.5,.15,0);r.renderToScreen=!1;var t=new c.FilmPass(.25,0,1200,!1);t.renderToScreen=!1;var a=new l.GlitchPass;a.renderToScreen=!1,a.enabled=!1;var o=new i.ShaderPass(f.FXAAShader);o.renderToScreen=!0;var v=I.getPixelRatio(),h=o.material.uniforms;h.resolution.value.x=1/(q*v),h.resolution.value.y=1/(S*v);var m=new d.EffectComposer(I);return m.setSize(q,S),m.addPass(e),m.addPass(r),m.addPass(t),m.addPass(a),m.addPass(o),m}(),G=new Promise(function(e,r){z.passes[3].goWild=!0,(new v.GLTFLoader).load(h.default,function(r){var t=r.scene.children[0];t.material=T,q<720&&(t.rotation.y=(720-q)/-500),y&&t.position.set(0,V,0),E=0,A.add(t),e(t)},function(e){M&&console.log(e.loaded/e.total*100+"% loaded")},function(e){r(e)})}).catch(function(e){return console.log(e)}),L=function(e,r){var t;t=e>r||e>720?e/r*b*25:e/r*b*40,G.then(function(e){e.scale.set(t,t,t)})};L(q,S);var C=function(){var e=q/S;R.left=-1*e,R.right=1*e,R.top=1,R.bottom=-1,R.near=-100,R.far=100,R.position.set(1,1,1),R.lookAt(new o.Vector3),z.setSize(q,S),I.setSize(q,S),R.updateProjectionMatrix()};C();var E=0;!function e(){M&&F.begin(),G.then(function(e){e.rotation.x=Math.sin(E/1e3)/40-100,e.rotation.y+=Math.sin(E/400)/5e3,e.rotation.z=Math.sin(E/400)/100,e.position.set(0,V+Math.sin(E/200)/75,0)}),75==E&&(z.passes[3].goWild=!1),T.uniforms.time.value=E/10,z.render(),E++,M&&F.end(),requestAnimationFrame(e)}();var W=!1;return{domElement:I.domElement,resize:function(e){if(!(y&&Math.abs(e[1]-S)<70)){var r=x(e,2);q=r[0],S=r[1],y&&(S+=70),G.then(function(e){e&&q>720?e.rotation.y=0:e&&q<720&&(e.rotation.y=(720-q)/-500)}),L(q,S),C();var t=I.getPixelRatio();z.passes[4].material.uniforms.resolution.value.x=1/(q*t),z.passes[4].material.uniforms.resolution.value.y=1/(S*t)}},scroll:function(e){T.uniforms.scroll.value=e/75e4,R.position.x=1+e/55,R.position.y=1+e/55,R.zoom=1+e/55,z.passes[1].radius=.15+e/1500,e>0&&z.passes[3].enabled&&!z.passes[3].goWild?z.passes[3].enabled=!1:0!==e&&E>75&&(z.passes[3].enabled=!1),R.lookAt(new o.Vector3),R.updateProjectionMatrix()},hoverIn:function(e){W=!0;var r=setInterval(function(){T.uniforms.hoverVal.value+=.01,(!W||T.uniforms.hoverVal.value>=1)&&clearInterval(r)},10),t=setInterval(function(){T.uniforms.index.value+=1===e?.01:-.01,(!W||T.uniforms.index.value>=1||T.uniforms.index.value<=0)&&clearInterval(t)},10)},hoverOut:function(e){W=!1;var r=setInterval(function(){T.uniforms.index.value+=1===e?-.005:.005,T.uniforms.hoverVal.value-=.01,(W||T.uniforms.hoverVal.value<=0)&&clearInterval(r)},5);setTimeout(function(){W||(T.uniforms.index.value=.5)},1e3)}}},M=y;exports.default=M;
},{"three-full/sources/scenes/Scene":"Baxu","three-full/sources/cameras/OrthographicCamera":"YP16","three-full/sources/renderers/WebGLRenderer":"wu1r","three-full/sources/materials/RawShaderMaterial":"nIA+","three-full/sources/math/Vector2":"qn61","three-full/sources/math/Vector3":"TKlu","three-full/sources/postprocessing/RenderPass":"ncbM","three-full/sources/postprocessing/ShaderPass":"nvGX","./GlitchPassMod":"AQo5","three-full/sources/postprocessing/UnrealBloomPass":"OSJR","three-full/sources/postprocessing/EffectComposer":"K0YY","three-full/sources/postprocessing/FilmPass":"lSta","three-full/sources/shaders/FXAAShader":"hk3P","three-full/sources/loaders/GLTFLoader":"J6/7","../assets/mswsn3d.glb":"A626","../shaders/vertex1.glsl":"x1M8","../shaders/fragment-desktop.glsl":"0WeQ","../shaders/fragment-mobile.glsl":"6PNS","stats-js":"bcrK"}],"Hbd1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGL=void 0;var e={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},r='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',n=document.createElement("div");return n.id="webglmessage",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",r=(r=t[e]?r.replace("$0","graphics card"):r.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),n.innerHTML=r,n}};exports.WebGL=e;
},{}],"I7Ak":[function(require,module,exports) {

},{}],"d6sW":[function(require,module,exports) {
"use strict";var e=n(require("./ThreeLogo")),t=require("three-full/sources/helpers/WebGL");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||r(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}require("../css/main.css"),!1===t.WebGL.isWebGLAvailable()&&(document.body.innerHTML=t.WebGL.getWebGLErrorMessage());var s=!1,c=window.innerWidth,d=window.innerHeight,a=window.devicePixelRatio,u=document.getElementById("scroll-marker"),y=document.getElementById("bg"),w=document.getElementById("main-container"),m=document.getElementById("three"),f=o(document.getElementsByClassName("work-project")),p=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);if(p){var g=d+56;d=g,m.style.height=g+"px",u.style.marginBottom="75px",document.getElementsByClassName("project-description").item(0).getElementsByTagName("p").item(0).innerHTML+=" (Desktop only)";var h=document.getElementById("work");h.insertBefore(h.children.item(2),h.children.item(1))}var v=(0,e.default)({width:c,height:d,browserPixelRatio:a,onMobile:p,devMode:s});m.appendChild(v.domElement),setTimeout(function(){0===window.scrollY&&(u.style.opacity=1)},2500),window.addEventListener("resize",function(){v.resize([window.innerWidth,window.innerHeight])});var b=!1;window.addEventListener("scroll",function(){window.scrollY>=0&&(v.scroll(window.scrollY),window.scrollY>0?u.style.opacity=0:0===window.scrollY&&(u.style.opacity=1),window.scrollY>window.innerHeight/2?(y.style.opacity=.75,b||(b=!0,setTimeout(function(){w.style.opacity=1},200))):(y.style.opacity=0,w.style.opacity=0,b=!1))}),f.forEach(function(e,t){var n=0===t?"./tapefumes":"./musicforecast";if(e.onclick=function(){return window.open(n)},p)e.style.border="1px dashed rgba(64, 104, 224, 0.3)";else{var o=e.querySelector(".github-link");e.addEventListener("mouseenter",function(){v.hoverIn(t),o.style.opacity=.25,o.style.cursor="pointer"}),e.addEventListener("mouseleave",function(){v.hoverOut(t),o.style.opacity=0,o.style.cursor="none"}),o.addEventListener("mouseenter",function(){o.style.opacity=1,e.onclick=null}),o.addEventListener("mouseleave",function(){o.style.opacity=.25,e.onclick=function(){return window.open(n)}})}}),window.onbeforeunload=function(){window.scrollTo(0,0)};
},{"./ThreeLogo":"//+0","three-full/sources/helpers/WebGL":"Hbd1","../css/main.css":"I7Ak"}]},{},["d6sW"], null)
//# sourceMappingURL=/main.153a6d22.js.map